(this["webpackJsonpvv-map"]=this["webpackJsonpvv-map"]||[]).push([[0],{204:function(e,t,a){e.exports=a(277)},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},246:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),o=a(107),i=a.n(o),l=a(149),c=a(89),s=a(72),d=a(150),u=a(283),m=a(186),p=a(187),h=a(93),g=a(201),f=a(198),v=a(188),w=a(200),b=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(g.a)(Object(h.a)(a.prototype),"get",this).call(this,e);return null!==n?n:t}}]),a}(Object(w.a)(URLSearchParams));function y(){return new b(Object(c.g)().search)}function D(e){return e.get("lat")||e.get("lng")?"":"London"}var x="51.533",O="-0.129",C=a(53),E=a(38),j=a(202),k=a(116),M=a(56),_="DejaVu Sans Mono";function F(e){var t=e.createChild(C.a);t.width=5,t.height=5,t.horizontalCenter="middle",t.verticalCenter="middle",e.states.create("hover").properties.scale=2}function T(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.propertyFields.rotation="winddirDegree";var a=e.createChild(C.d);a.horizontalCenter="middle",a.verticalCenter="bottom",a.strokeWidth=1,a.strokeOpacity=.7,a.direction="top",a.scale=2,a.width=5,t?a.propertyFields.height="windspeedKmph":a.height=10,a.fillOpacity=.5;var n=e.states.create("hover");n.properties.scale=2}function S(e){e.title.text="Temperature (\xb0C)",e.title.fontWeight=700,e.title.fontFamily=_,e.strictMinMax=!0,e.renderer.minGridDistance=30}var N=function(e,t){var a=t.startDate,n=t.endDate;e.leftAxesContainer.layout="vertical",e.rightAxesContainer.layout="vertical",e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[C.e("blue"),C.e("red"),C.e("#573fd1"),C.e("green"),C.e("#0384fc"),C.e("#6f9ec9"),C.e("magenta"),C.e("white")],function(e,t,a){e.renderer.grid.template.disabled=!0;var n=Object(k.a)(new Date(t),1);n.setHours(18);var r=Object(M.a)(new Date(a),1);r.setHours(6),e.min=n.getTime(),e.max=r.getTime(),e.renderer.labels.template.location=.5,e.tooltipDateFormat="MM-dd:HH",e.groupData=!0,e.groupCount=300,e.groupIntervals.setAll([{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"month",count:1},{timeUnit:"year",count:1},{timeUnit:"year",count:10}])}(e.xAxes.push(new E.b),a,n);var r=e.yAxes.push(new E.f);!function(e){e.title.text="Percent (%)",e.title.fontWeight=700,e.title.fontFamily=_,e.min=-5,e.max=105,e.strictMinMax=!0,e.renderer.minGridDistance=30}(r),r.marginTop=10,r.marginBottom=10;var o=e.yAxes.push(new E.f);S(o),o.marginTop=40,o.marginBottom=10;var i=e.yAxes.push(new E.f);S(i),i.marginTop=40,i.marginBottom=10,i.renderer.opposite=!0;var l=e.yAxes.push(new E.f);!function(e){e.title.text="Speed (km/h)",e.title.fontWeight=700,e.title.fontFamily=_,e.min=-20,e.max=120,e.strictMinMax=!0,e.renderer.minGridDistance=30}(l),l.marginTop=10,l.marginBottom=10,l.renderer.opposite=!0;var c=new E.h,s=e.series.push(new E.e);!function(e){e.name="Min. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="mintempC",e.tooltipText="Min.: {valueY.value} \xb0C",e.startLocation=.5}(s),s.yAxis=o,function(e){e.name="Max. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="maxtempC",e.tooltipText="Max.: {valueY.value} \xb0C",e.startLocation=.5}(s=e.series.push(new E.e)),s.yAxis=o,function(e){e.name="Temperature",e.dataFields.dateX="date",e.dataFields.valueY="tempC",e.tooltipText="Temperature: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new E.a))}(s=e.series.push(new E.d)),s.yAxis=o,function(e){e.name="Dew point",e.dataFields.dateX="date",e.dataFields.valueY="DewPointC",e.tooltipText="DewPoint: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new E.a))}(s=e.series.push(new E.d)),s.yAxis=o,function(e){e.name="Relative humidity",e.dataFields.dateX="date",e.dataFields.valueY="Humidity",e.tooltipText="Humidity: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new E.a))}(s=e.series.push(new E.d)),s.yAxis=r,c.series.push(s),r.renderer.line.stroke=s.stroke,r.renderer.labels.template.fill=s.stroke,function(e){e.name="Cloud cover",e.dataFields.dateX="date",e.dataFields.valueY="cloudcover",e.tooltipText="Clouds: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new E.a))}(s=e.series.push(new E.d)),s.yAxis=r,c.series.push(s),r.title.fill=s.stroke,function(e){e.name="Wind",e.dataFields.dateX="date",e.dataFields.valueY="windspeedKmph",e.tooltipText="wind ({winddirDegree}\xb0): {windspeedKmph} km/h",T(e.bullets.push(new E.a)),e.strokeWidth=1}(s=e.series.push(new E.d)),s.yAxis=l,l.renderer.line.stroke=s.stroke,l.renderer.labels.template.fill=s.stroke,l.title.fill=s.stroke,e.legend=new E.c,e.legend.reverseOrder=!0;var d=e.legend.markers.template;d.width=40,d.height=40,e.legend.position="right",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=_,e.cursor=new E.i,e.scrollbarX=c},A=a(199),W=a(148),z=a(117);function L(e){return Object(d.a)(e,"yyyy-MM-dd")}var P=function(e,t){var a=function(e){for(var t=[],a=new Date(e.startDate),n=new Date(e.endDate);!Object(W.a)(a,n);){var r=Object(z.a)(a);t.push({startDate:L(a),endDate:L(r)}),a=Object(M.a)(r,1)}return t.push({startDate:L(a),endDate:L(n)}),t}(t);return Promise.all(a.map((function(t){return fetch("".concat("https://api.worldweatheronline.com/premium/v1/past-weather.ashx","?key=").concat("3f2b6d0ba2734bc49b6173238202004")+"&"+"q=".concat(e.lat+","+e.lng)+"&format=json&"+"date=".concat(t.startDate,"&enddate=").concat(t.endDate)).then((function(e){return e.json()}))}))).then((function(e){return e.reduce((function(e,t){return e.push.apply(e,Object(A.a)(t.data.weather)),e}),[])}))},U=a(191),Y=(a(237),function(e){var t=e.size,a=e.loading;return r.a.createElement("div",{className:"__Loader__"},r.a.createElement(U.DotLoader,{sizeUnit:"px",color:"#5ac584",size:t||200,loading:a}))});a(238);C.h(j.a);var B=function(e){var t=e.location,a=e.dateRange,o=Object(n.useState)(!0),i=Object(s.a)(o,2),l=i[0],c=i[1];Object(n.useEffect)((function(){var e=C.f("chartdiv",E.g),n=function(e){var t=e.tooltipContainer.createChild(C.b);return t.background.fill=C.e("#fff"),t.background.fillOpacity=.9,t.width=C.g(100),t.height=C.g(100),t}(e);return n.show(),P(t,a).then((function(t){N(e,a),e.data=d(t),setTimeout((function(){n.hide(),c(!1)}),1e3)})),function(){e.dispose()}}),[t,a]);var d=function(e){var t=[],a=0;return e.forEach((function(e,n){0===a&&(a=new Date(e.date).getTime()),e.hourly.forEach((function(n){var r={date:a,DewPointC:n.DewPointC,Humidity:n.humidity,cloudcover:n.cloudcover,WeatherPictogram:2,WindPictogram:1,weatherDesc:n.weatherDesc.length?n.weatherDesc[0].value:"",weatherIconUrl:n.weatherIconUrl.length?n.weatherIconUrl[0].value:null,winddirDegree:n.winddirDegree,windspeedKmph:n.windspeedKmph,mintempC:e.mintempC,maxtempC:e.maxtempC,tempC:n.tempC};t.push(r),a+=108e5}))})),t};return r.a.createElement("div",{className:"__Chart__"},r.a.createElement(Y,{loading:l}),r.a.createElement("div",{id:"chartdiv",className:"chart"}))},R=(a(239),function(e){return Object(d.a)(new Date(e),"MMM d")}),X=function(){var e=y(),t=Object(n.useState)({lat:e.get("lat",x),lng:e.get("lng",O)}),a=Object(s.a)(t,1)[0],o=Object(n.useState)({startDate:e.get("startDate","2020-03-01"),endDate:e.get("endDate","2020-03-31")}),i=Object(s.a)(o,1)[0],l=Object(n.useState)(e.get("name",D(e))),d=Object(s.a)(l,1)[0],m=Object(n.useState)(!1),p=Object(s.a)(m,2),h=p[0],g=p[1];return h?r.a.createElement(c.a,{to:"/parameters?"+"lat=".concat(a.lat)+"&"+"lng=".concat(a.lng)+"&"+"name=".concat(d)+"&"+"startDate=".concat(i.startDate)+"&"+"endDate=".concat(i.endDate)}):r.a.createElement("div",{className:"__Weather__"},r.a.createElement("div",{className:"weather-info"},r.a.createElement("h5",{className:"name",title:d},d),r.a.createElement("h5",{className:"date-range"},R(i.startDate)+" - "+R(i.endDate)),r.a.createElement(u.a,{color:"primary",type:"button",onClick:function(){g(!0)},className:"button"},"Parameters")),r.a.createElement(B,{location:a,dateRange:i}),r.a.createElement("a",{href:"https://www.worldweatheronline.com/developer/",className:"weather-reference",target:"_blank",rel:"noopener noreferrer"},"Powered by World Weather Online"))},H=a(193),q=a(285),G=a(284),I=(a(246),function(e){var t=e.startDate,a=e.endDate,o=e.onChange,i=Object(n.useState)(!1),l=Object(s.a)(i,2),c=l[0],m=l[1];return r.a.createElement("div",{className:"__DateRange__"},r.a.createElement("div",{className:"daterange"},r.a.createElement("h5",{className:"title"},"Date range:"),r.a.createElement("div",{className:"range",id:"popover"},r.a.createElement("h5",{className:"text"},Object(d.a)(t,"MMM d, yyyy")," - ",Object(d.a)(a,"MMM d, yyyy")),r.a.createElement(u.a,{outline:!c,color:"secondary",className:"change"},c?"Done":"Change"))),r.a.createElement(q.a,{placement:"bottom",isOpen:c,target:"popover",toggle:function(){m((function(e){return!e}))}},r.a.createElement(G.a,null,r.a.createElement(H.DateRangePicker,{showSelectionPreview:!0,moveRangeOnFirstSelection:!1,maxDate:new Date,months:2,direction:"horizontal",ranges:[{startDate:t,endDate:a,key:"selection"}],onChange:function(e){o(e.selection)}}))))}),K=a(203),J=a(10),Z=a.n(J),V=(a(276),a(269),a(196)),$=a.n(V),Q=a(197),ee=a.n(Q),te=Z.a.icon({iconUrl:$.a,shadowUrl:ee.a,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-27]});Z.a.Marker.prototype.options.icon=te;var ae=function(e){var t=e.latlng,a=e.query,o=e.onChange;return Object(n.useEffect)((function(){var e=function(e){o({latlng:[e.center.lat,e.center.lng],name:e.name})},n=Z.a.map("map",{center:t,zoom:16,zoomControl:!1,layers:[Z.a.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),Z.a.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})]});Z.a.control.zoom({position:"topright"}).addTo(n);var r=new Z.a.Control.Geocoder.Nominatim,i=Z.a.Control.geocoder({collapsed:!0,position:"topleft",geocoder:r,query:a,suggestMinLength:3,placeholder:"Search query or lat,lng"}).on("markgeocode",(function(t){e(t.geocode),setTimeout((function(){i._expand()}),500)})).on("collapse",(function(){setTimeout((function(){i._expand()}),500)})).addTo(n);i._toggle=i._geocode;var l=document.querySelector(".leaflet-control-geocoder-form input"),c=function(t){t.bbox||(t.bbox=Z.a.latLngBounds(t.center,t.center)),t.html||t.name||(t.html="[".concat(t.center.lat,", ").concat(t.center.lng,"]"),t.name=""),i.markGeocode(t),e(t),setTimeout((function(){i._expand()}),500)};r.geocode(a,(function(e){var a=e.length?e[0]:{center:Z.a.latLng(t)};c(a)})),n.on("expand",(function(){l.focus()})),n.on("dblclick",(function(e){var t=Z.a.latLng(e.latlng);r.reverse(t,1,(function(e){l.value=t.lat+"."+t.lng;var a=e.length?e[0]:{};a=Object(K.a)({},a,{center:t}),c(a)}))})),setTimeout((function(){i._expand()}),500)}),[]),r.a.createElement("div",{className:"__Location__"},r.a.createElement("h5",{className:"title"},"Location (search or double click on map):"),r.a.createElement("div",{id:"map",className:"leaflet-map"}))},ne=(a(270),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],i=y(),l=new Date(i.get("startDate","2020-03-01")),d=new Date(i.get("endDate","2020-03-31")),m=[parseFloat(i.get("lat",x)),parseFloat(i.get("lng",O))],p=i.get("name",D(i)),h=Object(n.useState)({startDate:l,endDate:d}),g=Object(s.a)(h,2),f=g[0],v=g[1],w=Object(n.useState)({latlng:m,name:p}),b=Object(s.a)(w,2),C=b[0],E=b[1];return a?r.a.createElement(c.a,{to:"/?"+"lat=".concat(C.latlng[0].toFixed(3))+"&"+"lng=".concat(C.latlng[1].toFixed(3))+"&"+"name=".concat(C.name)+"&"+"startDate=".concat(L(f.startDate))+"&"+"endDate=".concat(L(f.endDate))}):r.a.createElement("div",{className:"__Parameters__"},r.a.createElement("div",{className:"weather-button"},r.a.createElement(I,{startDate:f.startDate,endDate:f.endDate,onChange:v}),r.a.createElement(u.a,{color:"primary",className:"button",onClick:function(){o(!0)}},"Show Weather")),r.a.createElement(ae,{latlng:m,query:p,onChange:E}))}),re=function(){return r.a.createElement(l.a,{basename:"/"},r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/parameters"},r.a.createElement(ne,null)),r.a.createElement(c.b,{path:"/"},r.a.createElement(X,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(271),a(272),a(273),a(274),a(275);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,3]]]);
//# sourceMappingURL=main.e12fec60.chunk.js.map