(this["webpackJsonpvv-map"]=this["webpackJsonpvv-map"]||[]).push([[0],{206:function(e,t,a){e.exports=a(279)},239:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},248:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),o=a(107),i=a.n(o),l=a(170),c=a(150),s=a(88),d=a(187),u=a(188),m=a(92),p=a(203),h=a(200),g=a(189),f=a(202),v=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(p.a)(Object(m.a)(a.prototype),"get",this).call(this,e);return null!==n?n:t}}]),a}(Object(f.a)(URLSearchParams));var w="51.533",b="-0.129";function y(e){return e.get("lat")||e.get("lng")?"":"London"}function D(){var e=new v(Object(s.f)().search);return{location:{lat:e.get("lat",w),lng:e.get("lng",b)},dateRange:{startDate:e.get("startDate","2020-03-01"),endDate:e.get("endDate","2020-03-31")},name:e.get("name",y(e))}}var x=a(99),O=a(151),E=a(285),C=a(53),j=a(38),k=a(204),M=a(116),T=a(56),_="DejaVu Sans Mono";function F(e){var t=e.createChild(C.a);t.width=5,t.height=5,t.horizontalCenter="middle",t.verticalCenter="middle",e.states.create("hover").properties.scale=2}function A(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.propertyFields.rotation="winddirDegree";var a=e.createChild(C.d);a.horizontalCenter="middle",a.verticalCenter="bottom",a.strokeWidth=1,a.strokeOpacity=.7,a.direction="top",a.scale=2,a.width=5,t?a.propertyFields.height="windspeedKmph":a.height=10,a.fillOpacity=.5;var n=e.states.create("hover");n.properties.scale=2}function N(e){e.title.text="Temperature (\xb0C)",e.title.fontWeight=700,e.title.fontFamily=_,e.strictMinMax=!0,e.renderer.minGridDistance=30}function S(e,t){!function(e,t,a){e.renderer.grid.template.disabled=!0;var n=Object(M.a)(new Date(t),1);n.setHours(18);var r=Object(T.a)(new Date(a),1);r.setHours(6),e.min=n.getTime(),e.max=r.getTime(),e.renderer.labels.template.location=.5,e.tooltipDateFormat="MM-dd:HH",e.groupData=!0,e.groupCount=300,e.groupIntervals.setAll([{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"month",count:1},{timeUnit:"year",count:1},{timeUnit:"year",count:10}]),e.zoomToDates(e.min,e.max)}(e.xAxes.getIndex(0),t.startDate,t.endDate)}var W=function(e){e.leftAxesContainer.layout="vertical",e.rightAxesContainer.layout="vertical",e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[C.e("blue"),C.e("red"),C.e("#573fd1"),C.e("green"),C.e("#0384fc"),C.e("#6f9ec9"),C.e("magenta"),C.e("white")],e.xAxes.push(new j.b);var t=e.yAxes.push(new j.f);!function(e){e.title.text="Percent (%)",e.title.fontWeight=700,e.title.fontFamily=_,e.min=-10,e.max=110,e.strictMinMax=!0,e.renderer.minGridDistance=30}(t),t.marginTop=10,t.marginBottom=10;var a=e.yAxes.push(new j.f);N(a),a.marginTop=40,a.marginBottom=10;var n=e.yAxes.push(new j.f);N(n),n.marginTop=40,n.marginBottom=10,n.renderer.opposite=!0;var r=e.yAxes.push(new j.f);!function(e){e.title.text="Speed (km/h)",e.title.fontWeight=700,e.title.fontFamily=_,e.min=-20,e.max=120,e.strictMinMax=!0,e.renderer.minGridDistance=30}(r),r.marginTop=10,r.marginBottom=10,r.renderer.opposite=!0;var o=new j.h,i=e.series.push(new j.e);!function(e){e.name="Min. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="mintempC",e.tooltipText="Min.: {valueY.value} \xb0C",e.startLocation=.5}(i),i.yAxis=a,o.series.push(i),function(e){e.name="Max. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="maxtempC",e.tooltipText="Max.: {valueY.value} \xb0C",e.startLocation=.5}(i=e.series.push(new j.e)),i.yAxis=a,o.series.push(i),function(e){e.name="Temperature",e.dataFields.dateX="date",e.dataFields.valueY="tempC",e.tooltipText="Temperature: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new j.a))}(i=e.series.push(new j.d)),i.yAxis=a,o.series.push(i),function(e){e.name="Dew point",e.dataFields.dateX="date",e.dataFields.valueY="DewPointC",e.tooltipText="DewPoint: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new j.a))}(i=e.series.push(new j.d)),i.yAxis=a,function(e){e.name="Relative humidity",e.dataFields.dateX="date",e.dataFields.valueY="Humidity",e.tooltipText="Humidity: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new j.a))}(i=e.series.push(new j.d)),i.yAxis=t,t.renderer.line.stroke=i.stroke,t.renderer.labels.template.fill=i.stroke,function(e){e.name="Cloud cover",e.dataFields.dateX="date",e.dataFields.valueY="cloudcover",e.tooltipText="Clouds: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=5,F(e.bullets.push(new j.a))}(i=e.series.push(new j.d)),i.yAxis=t,t.title.fill=i.stroke,function(e){e.name="Wind",e.dataFields.dateX="date",e.dataFields.valueY="windspeedKmph",e.tooltipText="wind ({winddirDegree}\xb0): {windspeedKmph} km/h",A(e.bullets.push(new j.a)),e.strokeWidth=1}(i=e.series.push(new j.d)),i.yAxis=r,r.renderer.line.stroke=i.stroke,r.renderer.labels.template.fill=i.stroke,r.title.fill=i.stroke,e.legend=new j.c,e.legend.reverseOrder=!0;var l=e.legend.markers.template;l.width=40,l.height=40,e.legend.position="right",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=_,e.cursor=new j.i,e.scrollbarX=o},z=a(192),P=function(e,t){S(e,t);var a=e.yAxes.getIndex(0);a.zoomToValues(a.min+1,a.max-1);var n=e.yAxes.getIndex(3);n.zoomToValues(n.min+1,n.max-1);var r,o=Object(z.a)(e.series);try{for(o.s();!(r=o.n()).done;){r.value.bulletsContainer.disposeChildren()}}catch(i){o.e(i)}finally{o.f()}},R=a(201),L=a(149),U=a(117);function Y(e){return Object(O.a)(e,"yyyy-MM-dd")}var B=function(e,t){var a=function(e){for(var t=[],a=new Date(e.startDate),n=new Date(e.endDate);!Object(L.a)(a,n);){var r=Object(U.a)(a);t.push({startDate:Y(a),endDate:Y(r)}),a=Object(T.a)(r,1)}return t.push({startDate:Y(a),endDate:Y(n)}),t}(t);return Promise.all(a.map((function(t){return fetch("".concat("https://api.worldweatheronline.com/premium/v1/past-weather.ashx","?key=").concat("3f2b6d0ba2734bc49b6173238202004")+"&"+"q=".concat(e.lat+","+e.lng)+"&format=json&"+"date=".concat(t.startDate,"&enddate=").concat(t.endDate)).then((function(e){return e.json()}))}))).then((function(e){return e.reduce((function(e,t){if(t.data.weather)e.push.apply(e,Object(R.a)(t.data.weather));else if(t.data.error){var a=t.data.error;throw console.error(a),a}return e}),[])}))},I=a(193),H=(a(239),function(e){var t=e.size,a=e.loading;return r.a.createElement("div",{className:"__Loader__"},r.a.createElement(I.DotLoader,{sizeUnit:"px",color:"#5ac584",size:t||200,loading:a}))});a(240);C.h(k.a);var X=null,q=null;window.onbeforeunload=function(e){X&&(X.dispose(),X=null)};var G=function(e){var t=e.location,a=e.dateRange,o=Object(n.useState)(!1),i=Object(x.a)(o,2),l=i[0],c=i[1];Object(n.useEffect)((function(){t&&a&&(null===X&&(console.log("---\x3e CREATING CHART"),X=C.f("chartdiv",j.g),q=function(e){var t=e.tooltipContainer.createChild(C.b);return t.background.fill=C.e("#fff"),t.background.fillOpacity=1,t.width=C.g(100),t.height=C.g(100),t}(X),W(X),X.events.on("datavalidated",(function(){c(!1),q.hide()}))),q.show(),c(!0),B(t,a).then((function(e){null!==X&&(P(X,a),X.data=s(e))})).catch((function(e){null!==X&&(P(X,a),X.data=[],alert(JSON.stringify(e)))})).finally((function(){X.invalidateData()})))}),[t.lat,t.lng,a.startDate,a.endDate]);var s=function(e){var t=[],a=0;return e.forEach((function(e,n){0===a&&(a=new Date(e.date).getTime()),e.hourly.forEach((function(n){var r={date:a,DewPointC:n.DewPointC,Humidity:n.humidity,cloudcover:n.cloudcover,WeatherPictogram:2,WindPictogram:1,weatherDesc:n.weatherDesc.length?n.weatherDesc[0].value:"",weatherIconUrl:n.weatherIconUrl.length?n.weatherIconUrl[0].value:null,winddirDegree:n.winddirDegree,windspeedKmph:n.windspeedKmph,mintempC:e.mintempC,maxtempC:e.maxtempC,tempC:n.tempC};t.push(r),a+=108e5}))})),t};return r.a.createElement("div",{className:"__Chart__"},r.a.createElement(H,{loading:l}),r.a.createElement("div",{id:"chartdiv",className:"chart"}))},K=(a(241),function(e){return Object(O.a)(new Date(e),"MMM d")}),J=function(e){var t=e.location,a=e.dateRange,o=e.name,i=Object(n.useState)(!1),l=Object(x.a)(i,2),c=l[0],d=l[1];Object(n.useEffect)((function(){d(!1)}),[t,a,o]);return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(s.a,{to:"/parameters?"+"lat=".concat(t.lat)+"&"+"lng=".concat(t.lng)+"&"+"name=".concat(o)+"&"+"startDate=".concat(a.startDate)+"&"+"endDate=".concat(a.endDate)}):null,r.a.createElement("div",{className:"__Weather__"},r.a.createElement("div",{className:"weather-info"},r.a.createElement("h5",{className:"name",title:o},o),r.a.createElement("h5",{className:"date-range"},K(a.startDate)+" - "+K(a.endDate)),r.a.createElement(E.a,{color:"primary",type:"button",onClick:function(){d(!0)},className:"button"},"Parameters")),r.a.createElement(G,{location:t,dateRange:a}),r.a.createElement("a",{href:"https://www.worldweatheronline.com/developer",className:"weather-reference",target:"_blank",rel:"noopener noreferrer"},"Powered by World Weather Online")))},V=a(195),Z=a(287),$=a(286),Q=(a(248),function(e){var t=e.startDate,a=e.endDate,n=e.onChange,o=e.popoverOpen,i=e.onTogglePopover;return r.a.createElement("div",{className:"__DateRange__"},r.a.createElement("div",{className:"daterange"},r.a.createElement("h5",{className:"title"},"Date range:"),r.a.createElement("div",{className:"range",id:"popover"},r.a.createElement("h5",{className:"text"},Object(O.a)(t,"MMM d, yyyy")," - ",Object(O.a)(a,"MMM d, yyyy")),r.a.createElement(E.a,{outline:!o,color:"secondary",className:"change"},o?"Done":"Change"))),r.a.createElement(Z.a,{placement:"bottom",isOpen:o,target:"popover",toggle:i},r.a.createElement($.a,null,r.a.createElement(V.DateRangePicker,{showSelectionPreview:!0,moveRangeOnFirstSelection:!1,maxDate:new Date,months:2,direction:"horizontal",ranges:[{startDate:t,endDate:a,key:"selection"}],staticRanges:[],onChange:function(e){n(e.selection)}}))))}),ee=a(205),te=a(10),ae=a.n(te),ne=(a(278),a(271),a(198)),re=a.n(ne),oe=a(199),ie=a.n(oe),le=ae.a.icon({iconUrl:re.a,shadowUrl:ie.a,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-27]});ae.a.Marker.prototype.options.icon=le;var ce=function(e){var t=e.latlng,a=e.query,o=e.onChange;return Object(n.useEffect)((function(){var e=function(e){o({latlng:[e.center.lat,e.center.lng],name:e.name})},n=ae.a.map("map",{center:t,zoomControl:!1,zoom:13,layers:[ae.a.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),ae.a.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:17,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})]});ae.a.control.zoom({position:"topright"}).addTo(n);var r=new ae.a.Control.Geocoder.Nominatim,i=ae.a.Control.geocoder({collapsed:!0,position:"topleft",geocoder:r,query:a,suggestMinLength:3,placeholder:"Search query or lat,lng"}).on("markgeocode",(function(t){e(t.geocode),setTimeout((function(){i._expand()}),500)})).on("collapse",(function(){setTimeout((function(){i._expand()}),500)})).addTo(n);i._toggle=i._geocode;var l=document.querySelector(".leaflet-control-geocoder-form input"),c=function(t){t.bbox||(t.bbox=ae.a.latLngBounds(t.center,t.center)),t.html||t.name||(t.html="[".concat(t.center.lat,", ").concat(t.center.lng,"]"),t.name=""),i.markGeocode(t),e(t),setTimeout((function(){i._expand()}),500)};r.geocode(a,(function(e){var a=e.length?e[0]:{center:ae.a.latLng(t)};c(a)})),n.on("expand",(function(){l.focus()})),n.on("dblclick",(function(e){var t=ae.a.latLng(e.latlng);r.reverse(t,1,(function(e){l.value=t.lat+"."+t.lng;var a=e.length?e[0]:{};a=Object(ee.a)({},a,{center:t}),c(a)}))})),setTimeout((function(){i._expand()}),500)}),[]),r.a.createElement("div",{className:"__Location__"},r.a.createElement("h5",{className:"title"},"Location (search or double click on map):"),r.a.createElement("div",{id:"map",className:"leaflet-map"}))},se=(a(272),function(e){var t=e.location,a=e.dateRange,o=e.name,i=new Date(a.startDate),l=new Date(a.endDate),c=[parseFloat(t.lat),parseFloat(t.lng)],d=Object(n.useState)({startDate:i,endDate:l}),u=Object(x.a)(d,2),m=u[0],p=u[1],h=Object(n.useState)({latlng:c,name:o}),g=Object(x.a)(h,2),f=g[0],v=g[1],w=Object(n.useState)({weather:!1,popoverOpen:!1}),b=Object(x.a)(w,2),y=b[0],D=b[1];Object(n.useEffect)((function(){D({weather:!1,popoverOpen:!1})}),[t,a,o]);return r.a.createElement(r.a.Fragment,null,y.weather?r.a.createElement(s.a,{to:"/?"+"lat=".concat(f.latlng[0].toFixed(3))+"&"+"lng=".concat(f.latlng[1].toFixed(3))+"&"+"name=".concat(f.name)+"&"+"startDate=".concat(Y(m.startDate))+"&"+"endDate=".concat(Y(m.endDate))}):null,r.a.createElement("div",{className:"__Parameters__"},r.a.createElement("div",{className:"weather-button"},r.a.createElement(Q,{startDate:m.startDate,endDate:m.endDate,onChange:p,popoverOpen:y.popoverOpen,onTogglePopover:function(){D((function(e){return{weather:!1,popoverOpen:!e.popoverOpen}}))}}),r.a.createElement(E.a,{color:"primary",className:"button",onClick:function(){D({weather:!0,popoverOpen:!1})}},"Show Weather")),r.a.createElement(ce,{latlng:f.latlng,query:f.name,onChange:v})))}),de=function(e){var t=e.match,a=e.children;return r.a.createElement("div",{style:t?{display:"block"}:{display:"none"}},a)},ue=function(){var e=D();return r.a.createElement(se,e)},me=function(){var e=D();return r.a.createElement(J,e)},pe=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(s.b,{path:"/parameters",exact:!0,children:function(e){var t=e.match,a=Object(l.a)(e,["match"]);return r.a.createElement(de,{match:t},r.a.createElement(ue,a))}}),r.a.createElement(s.b,{path:"/",exact:!0,children:function(e){var t=e.match,a=Object(l.a)(e,["match"]);return r.a.createElement(de,{match:t},r.a.createElement(me,a))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(273),a(274),a(275),a(276),a(277);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[206,1,3]]]);
//# sourceMappingURL=main.42d05f3e.chunk.js.map