(this["webpackJsonpvv-map"]=this["webpackJsonpvv-map"]||[]).push([[0],{181:function(e,t,a){},209:function(e,t,a){e.exports=a(283)},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},268:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},277:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),i=a(108),o=a.n(i),l=a(177),c=a(154),s=a(89),u=a(194),d=a(195),m=a(94),p=a(208),f=a(206),h=a(196),v=a(207),g=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(p.a)(Object(m.a)(a.prototype),"get",this).call(this,e);return null!==n?n:t}}]),a}(Object(v.a)(URLSearchParams));var b="51.533",w="-0.129";function A(e){return e.get("lat")||e.get("lng")?"":"London"}function E(){var e=new g(Object(s.f)().search);return{location:{lat:e.get("lat",b),lng:e.get("lng",w)},dateRange:{startDate:e.get("startDate","2020-03-01"),endDate:e.get("endDate","2020-03-31")},name:e.get("name",A(e))}}var M=a(66),y=a(295),D=a(296),C=a(297),x=a(291),N=a(298),O=a(299),T=a(155),S=a(29),R=a(30),I=(a(193),a(117)),k=a(59),F=864e5,L=P("2020-03-29");function G(e){return Object(T.a)(e,"yyyy-MM-dd")}function P(e){return new Date(e+"T00:00:00").getTime()}var B="DejaVu Sans Mono";function U(e){var t=e.createChild(S.a);t.width=5,t.height=5,t.horizontalCenter="middle",t.verticalCenter="middle",e.states.create("hover").properties.scale=2}function j(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.propertyFields.rotation="winddirDegree";var a=e.createChild(S.d);a.horizontalCenter="middle",a.verticalCenter="bottom",a.strokeWidth=1,a.strokeOpacity=.7,a.direction="top",a.scale=2,a.width=5,t?a.propertyFields.height="windspeedKmph":a.height=10,a.fillOpacity=.5;var n=e.states.create("hover");n.properties.scale=2}function _(e){e.title.text="Percent (%)",e.title.fontWeight=700,e.title.fontFamily=B,e.min=-10,e.max=110,e.strictMinMax=!0,e.renderer.minGridDistance=30}function W(e){e.title.text="Temperature (\xb0C)",e.title.fontWeight=700,e.title.fontFamily=B,e.strictMinMax=!0,e.renderer.minGridDistance=30}function H(e){e.name="Relative humidity",e.dataFields.dateX="date",e.dataFields.valueY="Humidity",e.tooltipText="Humidity: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}function K(e){e.name="Cloud cover",e.dataFields.dateX="date",e.dataFields.valueY="cloudcover",e.tooltipText="Clouds: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}function V(e){var t=e.tooltipContainer.createChild(S.b);return t.background.fill=S.e("#fff"),t.background.fillOpacity=1,t.width=S.g(100),t.height=S.g(100),t}function Y(e,t,a){!function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6;e.renderer.grid.template.disabled=!0;var i=Object(I.a)(P(t),1);i.setHours(24-r);var o=Object(k.a)(P(a),1);o.setHours(r),e.min=i.getTime(),e.max=o.getTime(),e.strictMinMax=!0,e.tooltipDateFormat=n,e.groupData=!0,e.groupCount=300,e.groupIntervals.setAll([{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:3},{timeUnit:"day",count:6},{timeUnit:"day",count:15},{timeUnit:"month",count:1},{timeUnit:"year",count:1},{timeUnit:"year",count:10}])}(e.xAxes.getIndex(0),t.startDate,t.endDate,a)}var X=function(e){e.leftAxesContainer.layout="vertical",e.rightAxesContainer.layout="vertical",e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[S.e("blue"),S.e("red"),S.e("#573fd1"),S.e("green"),S.e("#0384fc"),S.e("#6f9ec9"),S.e("magenta"),S.e("#6a086e")],e.xAxes.push(new R.b);var t=e.yAxes.push(new R.f);_(t),t.marginTop=10,t.marginBottom=10;var a=e.yAxes.push(new R.f);W(a),a.marginTop=30,a.marginBottom=10;var n=e.yAxes.push(new R.f);W(n),n.marginTop=30,n.marginBottom=10,n.renderer.opposite=!0;var r=e.yAxes.push(new R.f);!function(e){e.title.text="Speed (km/h), Dist (km)",e.title.fontWeight=700,e.title.fontFamily=B,e.min=-20,e.max=120,e.strictMinMax=!0,e.renderer.minGridDistance=30}(r),r.marginTop=10,r.marginBottom=10,r.renderer.opposite=!0,r.renderer.grid.template.disabled=!0;var i=new R.h,o=e.series.push(new R.e);!function(e){e.name="Min. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="mintempC",e.tooltipText="Min.: {valueY.value} \xb0C",e.startLocation=.5}(o),o.yAxis=a,i.series.push(o),function(e){e.name="Max. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="maxtempC",e.tooltipText="Max.: {valueY.value} \xb0C",e.startLocation=.5}(o=e.series.push(new R.e)),o.yAxis=a,i.series.push(o),function(e){e.name="Temperature",e.dataFields.dateX="date",e.dataFields.valueY="tempC",e.tooltipText="Temperature: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}(o=e.series.push(new R.d)),o.yAxis=a,i.series.push(o),function(e){e.name="Dew point",e.dataFields.dateX="date",e.dataFields.valueY="DewPointC",e.tooltipText="DewPoint: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}(o=e.series.push(new R.d)),o.yAxis=a,H(o=e.series.push(new R.d)),o.yAxis=t,t.renderer.line.stroke=o.stroke,t.renderer.labels.template.fill=o.stroke,K(o=e.series.push(new R.d)),o.yAxis=t,t.title.fill=o.stroke,function(e){e.name="Wind",e.dataFields.dateX="date",e.dataFields.valueY="windspeedKmph",e.tooltipText="Wind ({winddirDegree}\xb0): {windspeedKmph} km/h",j(e.bullets.push(new R.a)),e.strokeWidth=1}(o=e.series.push(new R.d)),o.yAxis=r,r.renderer.line.stroke=o.stroke,r.renderer.labels.template.fill=o.stroke,function(e){e.name="Visibility",e.dataFields.dateX="date",e.dataFields.valueY="visibility",e.tooltipText="Visibility: {visibility} km",e.strokeWidth=3,e.strokeOpacity=.8,e.minBulletDistance=10,U(e.bullets.push(new R.a))}(o=e.series.push(new R.d)),o.yAxis=r,r.title.fill=o.stroke,e.legend=new R.c,e.legend.reverseOrder=!0;var l=e.legend.markers.template;l.width=40,l.height=40,e.legend.position="right",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=B,e.cursor=new R.i,i.minHeight=30,e.scrollbarX=i};function Z(e){e.title.fontWeight=700,e.title.fontFamily=B,e.renderer.minGridDistance=30}function z(e){Z(e),e.title.text="Calc (ref below)",e.marginTop=0,e.strictMinMax=!1,e.marginBottom=0,e.renderer.line.stroke=S.e("#edac15"),e.renderer.grid.template.disabled=!0,e.renderer.labels.template.disabled=!0,e.title.fill=S.e("#edac15"),e.title.disabled=!0,e.renderer.opposite=!0}function J(e){e.name="with visibility",e.dataFields.dateX="date",e.dataFields.valueY="calc1",e.tooltipText="calc vis: {calc1}",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}function Q(e){e.name="without visibility",e.dataFields.dateX="date",e.dataFields.valueY="calc2",e.tooltipText="calc: {calc2}",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}function q(e,t){var a=e.axisRanges.create();a.value=t,a.label.text="{value}"}var $=function(e){e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[S.e("#2e3033"),S.e("#521d75"),S.e("#edac15"),S.e("#e84900")];var t=e.xAxes.push(new R.b);t.renderer.opposite=!0,t.renderer.labels.template.disabled=!0;var a=function(e){var t=e.yAxes.push(new R.f);z(t);var a=e.yAxes.push(new R.f);Z(a),a.title.text="Virus All",a.marginTop=0,a.marginBottom=0,a.renderer.line.stroke=S.e("#521d75"),a.renderer.labels.template.fill=S.e("#521d75"),a.title.fill=S.e("#521d75"),a.renderer.grid.template.disabled=!0,a.renderer.opposite=!0,a.strictMinMax=!0,a.logarithmic=!0;var n=e.yAxes.push(new R.f);return Z(n),n.title.text="Virus New",n.marginTop=0,n.marginBottom=0,n.renderer.line.stroke=S.e("#2e3033"),n.renderer.labels.template.fill=S.e("#2e3033"),n.title.fill=S.e("#2e3033"),n.strictMinMax=!0,{virAllAxis:a,virNewAxis:n,calcAxis:t}}(e),n=a.virAllAxis,r=a.virNewAxis,i=a.calcAxis,o=e.series.push(new R.e);!function(e){e.name="Virus New",e.dataFields.dateX="date",e.dataFields.valueY="new_confirmed",e.tooltipText="new confirmed: {new_confirmed}",e.strokeWidth=3}(o),o.yAxis=r;var l=e.series.push(new R.e);!function(e){e.name="Virus All",e.dataFields.dateX="date",e.dataFields.valueY="confirmed",e.tooltipText="all confirmed: {confirmed}",e.strokeWidth=3}(l),l.yAxis=n,l.hidden=!0,J(l=e.series.push(new R.d)),l.yAxis=i,l.hidden=!0,Q(l=e.series.push(new R.d)),l.yAxis=i,l.hidden=!0;var c=S.f("topLegend",S.b);c.width=S.g(100),c.height=30,e.legend=new R.c,e.legend.parent=c;var s=e.legend.markers.template;s.width=40,s.height=40,e.legend.position="top",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=B,e.cursor=new R.i;var u=new R.h;u.minHeight=10,u.series.push(o),e.scrollbarX=u,e.scrollbarX.background.fill=S.e("#2e3033"),e.scrollbarX.background.fillOpacity=.2,e.scrollbarX.thumb.background.fill=S.e("#848f94"),e.scrollbarX.thumb.background.fillOpacity=.2,e.scrollbarX.parent=e.topAxesContainer,e.rightAxesContainer.width=100,e.leftAxesContainer.width=100},ee=function(e){e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[S.e("#1dad91"),S.e("#0384fc"),S.e("#6f9ec9"),S.e("#edac15"),S.e("#e84900")],e.xAxes.push(new R.b).renderer.labels.template.disabled=!0;var t=function(e){var t=e.yAxes.push(new R.f);z(t);var a=e.yAxes.push(new R.f);_(a),a.strictMinMax=!0,a.marginTop=0,a.marginBottom=0,a.renderer.line.stroke=S.e("#0384fc"),a.renderer.labels.template.fill=S.e("#0384fc"),a.title.fill=S.e("#0384fc"),a.renderer.opposite=!0,a.renderer.grid.template.disabled=!0,a.renderer.grid.template.stroke=S.e("blue"),a.renderer.grid.template.strokeWidth=1,q(a,50),q(a,100);var n=e.yAxes.push(new R.f);return W(n),n.title.text="Dewp - temp (\xb0C)",n.marginTop=0,n.marginBottom=0,n.renderer.line.stroke=S.e("#1dad91"),n.renderer.labels.template.fill=S.e("#1dad91"),n.title.fill=S.e("#1dad91"),n.renderer.grid.template.disabled=!0,q(n,0),q(n,-1),n.renderer.grid.template.stroke=S.e("red"),n.renderer.grid.template.strokeWidth=1,n.renderer.baseGrid.stroke=S.e("red"),n.renderer.baseGrid.strokeWidth=2,n.max=5,{percentAxis:a,temperatureAxis:n,calcAxis:t}}(e),a=t.percentAxis,n=t.temperatureAxis,r=t.calcAxis,i=e.series.push(new R.d);!function(e){e.name="dewpoint - temp",e.dataFields.dateX="date",e.dataFields.valueY="measure",e.tooltipText="dewpoint - temp: {measure}",e.strokeWidth=3,e.minBulletDistance=10,U(e.bullets.push(new R.a))}(i),i.yAxis=n;var o=e.series.push(new R.d);H(o),o.yAxis=a,o.hidden=!0,K(o=e.series.push(new R.d)),o.yAxis=a,o.hidden=!0,J(o=e.series.push(new R.d)),o.yAxis=r,o.hidden=!0,Q(o=e.series.push(new R.d)),o.yAxis=r,o.hidden=!0;var l=S.f("bottomLegend",S.b);l.width=S.g(100),l.height=30,e.legend=new R.c,e.legend.parent=l;var c=e.legend.markers.template;c.width=40,c.height=40,e.legend.position="bottom",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=B,e.cursor=new R.i;var s=new R.h;s.minHeight=10,s.series.push(i),e.scrollbarX=s,e.scrollbarX.background.fill=S.e("#cc6e21"),e.scrollbarX.background.fillOpacity=.2,e.scrollbarX.thumb.background.fill=S.e("#1d997a"),e.scrollbarX.thumb.background.fillOpacity=.2,e.scrollbarX.parent=e.bottomAxesContainer,e.rightAxesContainer.width=100,e.leftAxesContainer.width=100},te=a(174),ae=function(e,t){Y(e,t,"MM-dd:HH");var a=e.xAxes.getIndex(0);a.zoomToDates(new Date(t.startDate),new Date(t.endDate)),a.zoomToDates(a.min,a.max);var n=e.yAxes.getIndex(0);n.zoomToValues(n.min+1,n.max-1);var r=e.yAxes.getIndex(3);r.zoomToValues(r.min+1,r.max-1);var i,o=Object(te.a)(e.series);try{for(o.s();!(i=o.n()).done;){i.value.bulletsContainer.disposeChildren()}}catch(l){o.e(l)}finally{o.f()}},ne=function(e,t,a){Y(e,t,"MM-dd:HH");var n=e.xAxes.getIndex(0);n.zoomToDates(new Date(t.startDate),new Date(t.endDate)),n.zoomToDates(n.min,n.max);var r=e.yAxes.getIndex(0);"Percent (%)"===r.title.text&&r.zoomToValues(r.min+1,r.max-1);var i,o=Object(te.a)(e.series);try{for(o.s();!(i=o.n()).done;){i.value.bulletsContainer.disposeChildren()}}catch(l){o.e(l)}finally{o.f()}},re=a(90),ie=a(152),oe=a(118);var le=function(e,t){var a=function(e){for(var t=[],a=new Date(e.startDate),n=new Date(e.endDate);!Object(ie.a)(a,n);){var r=Object(oe.a)(a);t.push({startDate:G(a),endDate:G(r)}),a=Object(k.a)(r,1)}return t.push({startDate:G(a),endDate:G(n)}),t}(t);return Promise.all(a.map((function(t){return fetch("".concat("https://api.worldweatheronline.com/premium/v1/past-weather.ashx","?key=").concat("3f2b6d0ba2734bc49b6173238202004")+"&"+"q=".concat(e.lat+","+e.lng)+"&format=json&"+"date=".concat(t.startDate,"&enddate=").concat(t.endDate)).then((function(e){return e.json()}))}))).then((function(e){return e.reduce((function(e,t){if(t.data.weather)e.push.apply(e,Object(re.a)(t.data.weather));else if(t.data.error){var a=t.data.error;throw console.error(a),a}return e}),[])}))},ce=a(199),se=(a(242),function(e){var t=e.size,a=e.loading;return r.a.createElement("div",{className:"__Loader__"},r.a.createElement(ce.DotLoader,{sizeUnit:"px",color:"#5ac584",size:t||200,loading:a}))}),ue=(a(181),null),de=null;window.onbeforeunload=function(e){ue&&(ue.dispose(),ue=null)};var me=function(e){var t=e.location,a=e.dateRange,i=e.onDataLoaded,o=Object(n.useState)(!1),l=Object(M.a)(o,2),c=l[0],s=l[1];Object(n.useEffect)((function(){t&&a&&(null===ue&&(ue=S.f("dataChart",R.g),de=V(ue),X(ue),ue.events.on("datavalidated",(function(){s(!1),de.hide(),setTimeout((function(){i(ue.data)}),1e3)}))),de.show(),s(!0),le(t,a).then((function(e){null!==ue&&(ae(ue,a),ue.data=u(e))})).catch((function(e){null!==ue&&(ae(ue,a),ue.data=[],alert(JSON.stringify(e)))})).finally((function(){ue.invalidateData()})))}),[t.lat,t.lng,a.startDate,a.endDate]);var u=function(e){var t=[],a=0;return e.forEach((function(e,n){0===a&&(a=P(e.date)),e.hourly.forEach((function(n){var r={date:a,DewPointC:parseFloat(n.DewPointC),Humidity:parseFloat(n.humidity),cloudcover:parseFloat(n.cloudcover),WeatherPictogram:2,WindPictogram:1,weatherDesc:n.weatherDesc.length?n.weatherDesc[0].value:"",weatherIconUrl:n.weatherIconUrl.length?n.weatherIconUrl[0].value:null,winddirDegree:parseFloat(n.winddirDegree),windspeedKmph:parseFloat(n.windspeedKmph),mintempC:parseFloat(e.mintempC),maxtempC:parseFloat(e.maxtempC),tempC:parseFloat(n.tempC),visibility:parseFloat(n.visibility)};t.push(r),a+=a===L?72e5:108e5}))})),t};return r.a.createElement("div",{className:"__Chart__"},r.a.createElement(se,{loading:c}),r.a.createElement("div",{id:"dataChart",className:"chart"}))},pe=a(163),fe={AD:"AND",AE:"ARE",AF:"AFG",AG:"ATG",AI:"AIA",AL:"ALB",AM:"ARM",AN:"ANT",AO:"AGO",AQ:"ATA",AR:"ARG",AS:"ASM",AT:"AUT",AU:"AUS",AW:"ABW",AZ:"AZE",BA:"BIH",BB:"BRB",BD:"BGD",BE:"BEL",BF:"BFA",BG:"BGR",BH:"BHR",BI:"BDI",BJ:"BEN",BM:"BMU",BN:"BRN",BO:"BOL",BR:"BRA",BS:"BHS",BT:"BTN",BV:"BVT",BW:"BWA",BY:"BLR",BZ:"BLZ",CA:"CAN",CC:"CCK",CD:"COD",CF:"CAF",CG:"COG",CH:"CHE",CI:"CIV",CK:"COK",CL:"CHL",CM:"CMR",CN:"CHN",CO:"COL",CR:"CRI",CU:"CUB",CV:"CPV",CX:"CXR",CY:"CYP",CZ:"CZE",DE:"DEU",DJ:"DJI",DK:"DNK",DM:"DMA",DO:"DOM",DZ:"DZA",EC:"ECU",EE:"EST",EG:"EGY",EH:"ESH",ER:"ERI",ES:"ESP",ET:"ETH",FI:"FIN",FJ:"FJI",FK:"FLK",FM:"FSM",FO:"FRO",FR:"FRA",GA:"GAB",GB:"GBR",GD:"GRD",GE:"GEO",GF:"GUF",GG:"GGY",GH:"GHA",GI:"GIB",GL:"GRL",GM:"GMB",GN:"GIN",GP:"GLP",GQ:"GNQ",GR:"GRC",GS:"SGS",GT:"GTM",GU:"GUM",GW:"GNB",GY:"GUY",HK:"HKG",HM:"HMD",HN:"HND",HR:"HRV",HT:"HTI",HU:"HUN",ID:"IDN",IE:"IRL",IL:"ISR",IM:"IMN",IN:"IND",IO:"IOT",IQ:"IRQ",IR:"IRN",IS:"ISL",IT:"ITA",JE:"JEY",JM:"JAM",JO:"JOR",JP:"JPN",KE:"KEN",KG:"KGZ",KH:"KHM",KI:"KIR",KM:"COM",KN:"KNA",KP:"PRK",KR:"KOR",KW:"KWT",KY:"CYM",KZ:"KAZ",LA:"LAO",LB:"LBN",LC:"LCA",LI:"LIE",LK:"LKA",LR:"LBR",LS:"LSO",LT:"LTU",LU:"LUX",LV:"LVA",LY:"LBY",MA:"MAR",MC:"MCO",MD:"MDA",ME:"MNE",MG:"MDG",MH:"MHL",MK:"MKD",ML:"MLI",MM:"MMR",MN:"MNG",MO:"MAC",MP:"MNP",MQ:"MTQ",MR:"MRT",MS:"MSR",MT:"MLT",MU:"MUS",MV:"MDV",MW:"MWI",MX:"MEX",MY:"MYS",MZ:"MOZ",NA:"NAM",NC:"NCL",NE:"NER",NF:"NFK",NG:"NGA",NI:"NIC",NL:"NLD",NO:"NOR",NP:"NPL",NR:"NRU",NU:"NIU",NZ:"NZL",OM:"OMN",PA:"PAN",PE:"PER",PF:"PYF",PG:"PNG",PH:"PHL",PK:"PAK",PL:"POL",PM:"SPM",PN:"PCN",PR:"PRI",PS:"PSE",PT:"PRT",PW:"PLW",PY:"PRY",QA:"QAT",RE:"REU",RO:"ROU",RS:"SRB",RU:"RUS",RW:"RWA",SA:"SAU",SB:"SLB",SC:"SYC",SD:"SDN",SE:"SWE",SG:"SGP",SH:"SHN",SI:"SVN",SJ:"SJM",SK:"SVK",SL:"SLE",SM:"SMR",SN:"SEN",SO:"SOM",SR:"SUR",ST:"STP",SV:"SLV",SY:"SYR",SZ:"SWZ",TC:"TCA",TD:"TCD",TF:"ATF",TG:"TGO",TH:"THA",TJ:"TJK",TK:"TKL",TL:"TLS",TM:"TKM",TN:"TUN",TO:"TON",TR:"TUR",TT:"TTO",TV:"TUV",TW:"TWN",TZ:"TZA",UA:"UKR",UG:"UGA",UM:"UMI",US:"USA",UY:"URY",UZ:"UZB",VA:"VAT",VC:"VCT",VE:"VEN",VG:"VGB",VI:"VIR",VN:"VNM",VU:"VUT",WF:"WLF",WS:"WSM",YE:"YEM",YT:"MYT",ZA:"ZAF",ZM:"ZMB",ZW:"ZWE"};function he(e,t,a,n){var r=e-a,i=t-n;return r*r+i*i}function ve(e,t){return t?e:[e]}function ge(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(re.a)(Array(t).keys()).reduce((function(t,n){return t.then((function(t){return e(n).then((function(e){return[].concat(Object(re.a)(t),Object(re.a)(ve(e,a)))}))}))}),Promise.resolve([]))}function be(e,t,a,n){var r=n*a,i=Math.min(r+a,t);return Promise.all(Object(re.a)(Array(i-r).keys()).map((function(t){return e(r+t)})))}var we,Ae=a(130),Ee=(we={AL:"Alabama",AK:"Alaska",AS:"American Samoa",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FM:"Federated States of Micronesia",FL:"Florida",GA:"Georgia",GU:"Guam",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MH:"Marshall Islands",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",MP:"Northern Mariana Islands",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PW:"Palau",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VI:"Virgin Islands",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming",AE:"Armed Forces Africa",AA:"Armed Forces Americas (except Canada)"},Object(Ae.a)(we,"AE","Armed Forces Canada"),Object(Ae.a)(we,"AP","Armed Forces Pacific"),we),Me={virusSpreadCountriesTimeline:null},ye=function(e){return e},De=function(e){var t=e.data;return t.forEach((function(e){e.iso3=fe[e.code],e.timelineMap={},e.timeline.forEach((function(t){e.timelineMap[P(t.date)]=t}))})),t};function Ce(e,t){var a=Number.POSITIVE_INFINITY,n=null;return t.forEach((function(t){var r=he(e.lat,e.lng,t.lat,t.lng);r<a&&(a=r,n=t)})),n}var xe=function(e,t){var a=P(t.startDate),n=P(t.endDate);return Object.keys(e.timelineMap).reduce((function(t,r){if(a<=r&&r<=n){var i=e.timelineMap[r];t[r]={confirmed:i.confirmed,new_confirmed:i.new_confirmed}}return t}),{})};function Ne(e,t,a){var n=function(e){for(var t=[],a=P(e.startDate),n=P(e.endDate),r=a;r<=n;r+=r===L?828e5:F)t.push(r);return t}(t);return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return 1===a?ge(e,t):ge((function(n){return be(e,t,a,n)}),Math.ceil(t/a),!0)}((function(t){var r=n[t],i="USA"===e.iso3?"q":"region_province";return fetch("https://covid-api.com/api/reports?"+"date=".concat(G(r))+"&"+"iso=".concat(e.iso3)+"&"+"".concat(i,"=").concat(e.name)+(a?"&city_name=".concat(a.name):"")).then((function(e){return e.json()})).then((function(e){return e.data[0]})).then((function(e){return a?e.region.cities[0]:e})).then((function(e){return{millis:r,confirmed:e&&e.confirmed?Math.max(e.confirmed,1):null,new_confirmed:e?e.confirmed_diff:0}})).catch((function(e){return console.error(e),{millis:r,confirmed:null,new_confirmed:0}}))}),n.length,5).then((function(t){var n=t.filter((function(e){return null===e.confirmed})).length;if(n/t.length>.33)return console.log("-> Province: "+e.name+(a?", City: "+a.name:"")+": MAX ERROR PERCENT EXCEEDED",100*n/t.length),null;for(var r=1;r<t.length;++r)null===t[r].confirmed&&(t[r].confirmed=t[r-1].confirmed);return t})).then((function(e){return e?e.reduce((function(e,t){return e[t.millis]={confirmed:t.confirmed,new_confirmed:t.new_confirmed},e}),{}):null}))}function Oe(e,t,a){return fetch("https://covid-api.com/api/reports?"+"date=".concat(a.startDate)+"&"+"iso=".concat(t.iso3)+"&"+"q=".concat(t.name)).then((function(e){return e.json()})).then((function(e){return e.data})).then((function(t){var a=t.reduce((function(e,t){var a=t.region.cities.map((function(e){return{name:e.name,lat:e.lat,lng:e.long}}));return[].concat(Object(re.a)(e),Object(re.a)(a))}),[]);return Ce(e,a)}))}var Te=function(e,t){var a=function(e,a,n,r){return{country:a.name,population:e?null:a.population,province:e&&n?n.name:null,city:e&&r?r.name:null,timelineMap:e||xe(a,t)}},n=function e(t,n,r,i,o){return Ne(n,r,i).then((function(l){return l||!i?l||o?a(l,t,n,i):null:e(t,n,r,null,o)}))};return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ye;return Me[t]?Promise.resolve(Me[t]):fetch(e).then((function(e){return e.json()})).then((function(e){return Me[t]=a(e),Me[t]})).catch((function(e){throw console.error(e),e}))}("https://corona-api.com/countries?include=timeline","virusSpreadCountriesTimeline",De).then((function(r){return function(e){return fetch("".concat("https://secure.geonames.org/countryCode","?username=").concat("norama")+"&lat=".concat(e.lat,"&lng=").concat(e.lng)).then((function(e){return e.text()})).then((function(e){return e.trim()}))}(e).then((function(e){var t=r.find((function(t){return t.code===e}));if(!t)throw"country with code: "+e+" not found";return t})).catch((function(t){return console.error(t),console.log("country code error, taking closest country",t),function(e,t){var a=Number.POSITIVE_INFINITY,n=null;return t.forEach((function(t){var r=he(e.lat,e.lng,t.coordinates.latitude,t.coordinates.longitude);r<a&&(a=r,n=t)})),n}(e,r)})).then((function(r){return(i=r.iso3,fetch("https://covid-api.com/api/provinces/"+i).then((function(e){return e.json()})).then((function(e){return e.data})).then((function(e){return e.filter((function(e){return null!==e.lat&&null!==e.long}))})).then((function(e){return e.map((function(e){return{iso3:e.iso,name:e.province,lat:e.lat,lng:e.long}}))}))).then((function(i){if("GBR"===r.iso3&&(i=i.filter((function(e){return"Channel Islands"!==e.name&&"Isle of Man"!==e.name}))),i.length<=1)return a(null,r);var o=Ce(e,i);return"USA"===r.iso3?Oe(e,o,t).then((function(l){return n(r,o,t,l).then((function(l){return l||((o=function(e,t){if("USA"!==e.iso3||e.name.length<2)return null;var a=e.name.substring(e.name.length-2),n=Ee[a];return t.find((function(e){return e.name===n}))}(o,i))?Oe(e,o,t).then((function(e){return n(r,o,t,e,!0)})):a(null,r))}))})):n(r,o,t).then((function(a){return a||(o=Ce(e,i.filter((function(e){return e!==o}))),n(r,o,t,null,!0))}))}));var i}))}))},Se=a(290);a(243);var Re=function(e){var t=e.color,a=e.data;return a?r.a.createElement("h3",null,r.a.createElement(Se.a,{color:t},a)):null},Ie=function(e){var t=e.country,a=e.province,n=e.city,i=e.population;return r.a.createElement("div",{className:"__LocationVirusInfo__"},r.a.createElement("div",{className:"label"},"Virus data for"),r.a.createElement("div",{className:"data country"},r.a.createElement(Re,{color:"secondary",data:t})),r.a.createElement("div",{className:"data province"},r.a.createElement(Re,{color:"info",data:a})),r.a.createElement("div",{className:"data city"},r.a.createElement(Re,{color:"danger",data:n})),r.a.createElement("div",{className:"label"},i?"Population:":null),r.a.createElement("div",{className:"data population"},i?function(e){return parseInt(e).toLocaleString()}(i):null))},ke=(a(244),{Czechia:"czech-republic","S. Korea":"south-korea"});function Fe(e){return ke[e]?ke[e]:e}var Le=function(e){var t=e.country,a=e.province;return r.a.createElement("div",{className:"__CountryVirusInfo__"},r.a.createElement("a",{href:"USA"===t&&a?"https://www.worldometers.info/coronavirus/usa/"+a:"https://www.worldometers.info/coronavirus/country/"+Fe(t),target:"_blank",rel:"noopener noreferrer"},"USA"===t?a:t," virus data"))},Ge=a(300),Pe=a(292),Be=a(293),Ue=a(294);a(245);function je(e){e.stopPropagation()}var _e=function(e){var t=e.close,a=Object(n.useState)(!1),i=Object(M.a)(a,2),o=i[0],l=i[1];Object(n.useEffect)((function(){l(!1)}),[t]);return r.a.createElement("div",{className:"__References__"},r.a.createElement("div",{className:"references",id:"references"},r.a.createElement(x.a,{color:"link"},"References")),r.a.createElement(Ge.a,{placement:"top",isOpen:o,target:"references",toggle:function(){l((function(e){return!e}))}},r.a.createElement(Pe.a,{onClick:je},r.a.createElement(Be.a,null,r.a.createElement(Ue.a,{className:"references-popup"},r.a.createElement("h3",null,"Virus data"),r.a.createElement("ul",null,r.a.createElement("li",null,"Data per country:",r.a.createElement("br",null),r.a.createElement("a",{href:"https://about-corona.net/documentation",target:"_blank",rel:"noopener noreferrer"},"corona-api")),r.a.createElement("li",null,"Data per province / USA city:",r.a.createElement("br",null),r.a.createElement("a",{href:"https://covid-api.com/api",target:"_blank",rel:"noopener noreferrer"},"covid-api"))),r.a.createElement("h3",null,"Meteorological approximations (with / without visibility)"),r.a.createElement("a",{href:"https://www.medrxiv.org/content/10.1101/2020.03.16.20037168v1.full.pdf",target:"_blank",rel:"noopener noreferrer"},"Roles of meteorological conditions in COVID-19 transmission on a worldwide scale"))))))},We={estimate:{chart:null,certain:null},virus:{chart:null,certain:null}},He=We;function Ke(){(He=Object(pe.a)({},We)).virus.chart=S.f("virusChart",R.g),He.virus.certain=V(He.virus.chart),He.estimate.chart=S.f("estimateChart",R.g),He.estimate.certain=V(He.estimate.chart),function(e,t){var a,n;$(e),ee(t),a=e,(n=t).zoomOutButton.events.on("hit",(function(e){var t=a.xAxes.getIndex(0);t.zoomToDates(t.min,t.max)})),n.xAxes.getIndex(0).events.on("selectionextremeschanged",(function(e){a.xAxes.getIndex(0).zoomToDates(e.target.minZoomed,e.target.maxZoomed)})),n.cursor.events.on("cursorpositionchanged",(function(e){a.cursor.triggerMove(e.target.point,"none",!0)}))}(He.virus.chart,He.estimate.chart)}function Ve(e){e&&e.dispose()}window.onbeforeunload=function(e){Ve(He.estimate.chart),Ve(He.virus.chart),He=We};var Ye=function(e){var t=e.temp,a=e.wind,n=e.vis,r=e.rh;return-.1366*t*t+3.6046*t-.3883*a*a+20.2509*a+5929.9403/(n+19.1774)-505.8484*r*r*r+316.6004*r*r+189.1295*r-422.3774},Xe=function(e){var t=e.temp,a=e.wind,n=e.rh;return-.18*t*t+3.1628*t-.4385*a*a+21.142*a-228.4231*n*n*n-391.9561*n*n+880.719*n-401.8395};var Ze=function(e){var t=e.weatherData,a=e.location,i=e.dateRange,o=e.reset,l=Object(n.useState)(0),c=Object(M.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(null),m=Object(M.a)(d,2),p=m[0],f=m[1];Object(n.useEffect)((function(){v()}),[o]),Object(n.useEffect)((function(){Ke(),He.virus.chart.events.on("datavalidated",(function(){He!==We&&(He.virus.certain.hide(),He.estimate.certain.hide())}))}),[]),Object(n.useEffect)((function(){if(!t)return f(null),He.virus.certain.show(),void He.estimate.certain.show();f(null),He.virus.certain.show(),He.estimate.certain.show(),h().then((function(e){var t=e.data,a=e.country,n=e.province,r=e.city,o=e.population;if(He!==We){var l;l=12,Math.floor(Math.random()*Math.floor(l));ne(He.estimate.chart,i),ne(He.virus.chart,i),He.virus.chart.data=t,He.estimate.chart.data=t,f({country:a,province:n,city:r,population:o})}})).catch((function(e){if(He!==We){ne(He.virus.chart,i),ne(He.estimate.chart,i),He.virus.chart.data=[],He.estimate.chart.data=[],console.error(e);var t=JSON.stringify(e);"{}"!==t?alert(t):alert("ERROR: see console for details.")}})).finally((function(){He.virus.chart.invalidateData(),He.estimate.chart.invalidateData()}))}),[t]);var h=function(){return Te(a,i).then((function(e){var a=[],n=null;return t.forEach((function(t){var r={temp:t.tempC,wind:t.windspeedKmph/1.60934,vis:t.visibility/1.60934,dewpoint:t.DewPointC,humidity:t.Humidity/100};r.rh=r.humidity;var i={date:t.date,calc1:Ye(r),calc2:Xe(r),measure:r.dewpoint-r.temp,Humidity:t.Humidity,cloudcover:t.cloudcover},o=e.timelineMap[i.date];o?(i.confirmed=o.confirmed,i.new_confirmed=o.new_confirmed,n=i):n?(i.confirmed=n.confirmed,i.new_confirmed=i.date-n.date<F?n.new_confirmed:0):(i.confirmed=null,i.new_confirmed=0),a.push(i)})),{country:e.country,province:e.province,city:e.city,population:e.population,data:a}}))},v=function(){u((function(e){return e+1}))};return r.a.createElement("div",{className:"__Chart__",onClick:v},r.a.createElement(se,{loading:!p}),r.a.createElement("div",{className:"chart"},r.a.createElement("div",{className:"calc-top-chart"},r.a.createElement("div",{id:"topLegend",className:"top-legend"}),r.a.createElement("div",{id:"virusChart",className:"top-chart"})),r.a.createElement("div",{className:"calc-bottom-chart"},r.a.createElement("div",{id:"estimateChart",className:"bottom-chart"}),r.a.createElement("div",{id:"bottomLegend",className:"bottom-legend"}))),p?r.a.createElement(Ie,p):null,p?r.a.createElement(Le,p):null,r.a.createElement(_e,{close:s}))},ze=(a(268),function(e){return Object(T.a)(new Date(e),"MMM d")}),Je=function(e){var t=e.location,a=e.dateRange,i=e.name,o=Object(n.useState)(!1),l=Object(M.a)(o,2),c=l[0],u=l[1],d=Object(n.useState)(null),m=Object(M.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)("1"),v=Object(M.a)(h,2),g=v[0],b=v[1],w=Object(n.useState)(!1),A=Object(M.a)(w,2),E=A[0],T=A[1],S=function(e){g!==e&&(b(e),E||T(!0))};Object(n.useEffect)((function(){u(!1)})),Object(n.useEffect)((function(){f(null),b("1"),T(!1)}),[t.lat,t.lng,a.startDate,a.endDate,i]);return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(s.a,{to:"/parameters?"+"lat=".concat(t.lat)+"&"+"lng=".concat(t.lng)+"&"+"name=".concat(i)+"&"+"startDate=".concat(a.startDate)+"&"+"endDate=".concat(a.endDate)}):null,r.a.createElement("div",{className:"__Weather__"},r.a.createElement("div",{className:"weather-info"},r.a.createElement(y.a,{tabs:!0},r.a.createElement(D.a,null,r.a.createElement(C.a,{className:"1"===g?"active":"",onClick:function(){S("1")},disabled:null===p},"Data")),r.a.createElement(D.a,null,r.a.createElement(C.a,{className:"2"===g?"active":"",onClick:function(){S("2")},disabled:null===p},"Calc"))),r.a.createElement("h5",{className:"name",title:i},i),r.a.createElement("h5",{className:"date-range"},ze(a.startDate)+" - "+ze(a.endDate)),r.a.createElement(x.a,{color:"primary",type:"button",onClick:function(){u(!0)},className:"button"},"Parameters")),r.a.createElement(N.a,{activeTab:g},r.a.createElement(O.a,{tabId:"1"},r.a.createElement(me,{location:t,dateRange:a,onDataLoaded:f})),r.a.createElement(O.a,{tabId:"2"},r.a.createElement(Ze,{weatherData:E?p:null,location:t,dateRange:a,reset:c}))),"1"===g?r.a.createElement("a",{href:"https://www.worldweatheronline.com/developer",className:"weather-reference",target:"_blank",rel:"noopener noreferrer"},"Powered by World Weather Online"):null))},Qe=a(203);a(275);function qe(e){e.stopPropagation()}var $e=function(e){var t=e.startDate,a=e.endDate,n=e.onChange,i=e.popoverOpen,o=e.onTogglePopover;return r.a.createElement("div",{className:"__DateRange__"},r.a.createElement("div",{className:"daterange"},r.a.createElement("h5",{className:"title"},"Date range:"),r.a.createElement("div",{className:"range",id:"daterange"},r.a.createElement("h5",{className:"text"},Object(T.a)(t,"MMM d")," - ",Object(T.a)(a,"MMM d")),r.a.createElement(x.a,{outline:!i,color:"secondary",className:"change"},i?"Done":"Change"))),r.a.createElement(Ge.a,{placement:"bottom",isOpen:i,target:"daterange",toggle:o},r.a.createElement(Pe.a,{onClick:qe},r.a.createElement(Qe.DateRangePicker,{showSelectionPreview:!0,moveRangeOnFirstSelection:!1,maxDate:new Date,months:2,direction:"horizontal",ranges:[{startDate:t,endDate:a,key:"selection"}],staticRanges:[],onChange:function(e){n(e.selection)}}))))},et=a(11),tt=a.n(et),at=(a(284),a(276),a(204)),nt=a.n(at),rt=a(205),it=a.n(rt),ot=tt.a.icon({iconUrl:nt.a,shadowUrl:it.a,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-27]});tt.a.Marker.prototype.options.icon=ot;var lt=function(e){var t=e.latlng,a=e.query,i=e.onChange;return Object(n.useEffect)((function(){var e=function(e){i({latlng:[e.center.lat,e.center.lng],name:e.name})},n=tt.a.map("map",{center:t,zoomControl:!1,zoom:13,maxZoom:18,layers:[tt.a.tileLayer("https://{s}.tile.osm.org/{z}/{x}/{y}.png",{zoom:13,maxZoom:18,attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),tt.a.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{zoom:13,maxZoom:18,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'})]});n.zoomOut(),tt.a.control.zoom({position:"topright"}).addTo(n);var r=new tt.a.Control.Geocoder.Nominatim,o=tt.a.Control.geocoder({collapsed:!0,position:"topleft",geocoder:r,query:a,suggestMinLength:3,placeholder:"Search query or lat,lng"}).on("markgeocode",(function(t){e(t.geocode),setTimeout((function(){o._expand()}),500)})).on("collapse",(function(){setTimeout((function(){o._expand()}),500)})).addTo(n);o._toggle=o._geocode;var l=document.querySelector(".leaflet-control-geocoder-form input"),c=function(t){t.bbox||(t.bbox=tt.a.latLngBounds(t.center,t.center)),t.html||t.name||(t.html="[".concat(t.center.lat,", ").concat(t.center.lng,"]"),t.name=""),o.markGeocode(t),e(t),setTimeout((function(){o._expand()}),500)};r.geocode(a,(function(e){var a=e.length?e[0]:{center:tt.a.latLng(t)};c(a)})),n.on("expand",(function(){l.focus()})),n.on("dblclick",(function(e){var t=tt.a.latLng(e.latlng);r.reverse(t,1,(function(e){l.value=t.lat+"."+t.lng;var a=e.length?e[0]:{};a=Object(pe.a)({},a,{center:t}),c(a)}))})),setTimeout((function(){o._expand()}),500)}),[]),r.a.createElement("div",{className:"__Location__"},r.a.createElement("h5",{className:"title"},"Location (search or double click on map):"),r.a.createElement("div",{id:"map",className:"leaflet-map"}))},ct=(a(277),function(e){var t=e.location,a=e.dateRange,i=e.name,o=new Date(a.startDate),l=new Date(a.endDate),c=[parseFloat(t.lat),parseFloat(t.lng)],u=Object(n.useState)({startDate:o,endDate:l}),d=Object(M.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)({latlng:c,name:i}),h=Object(M.a)(f,2),v=h[0],g=h[1],b=Object(n.useState)({weather:!1,popoverOpen:!1}),w=Object(M.a)(b,2),A=w[0],E=w[1];Object(n.useEffect)((function(){E({weather:!1,popoverOpen:!1})}),[t,a,i]);return r.a.createElement(r.a.Fragment,null,A.weather?r.a.createElement(s.a,{to:"/?"+"lat=".concat(v.latlng[0].toFixed(3))+"&"+"lng=".concat(v.latlng[1].toFixed(3))+"&"+"name=".concat(v.name)+"&"+"startDate=".concat(G(m.startDate))+"&"+"endDate=".concat(G(m.endDate))}):null,r.a.createElement("div",{className:"__Parameters__",onClick:function(e){e.stopPropagation(),E((function(e){return{weather:!1,popoverOpen:!1}}))}},r.a.createElement("div",{className:"weather-button"},r.a.createElement($e,{startDate:m.startDate,endDate:m.endDate,onChange:p,popoverOpen:A.popoverOpen,onTogglePopover:function(e){e.stopPropagation(),E((function(e){return{weather:!1,popoverOpen:!e.popoverOpen}}))}}),r.a.createElement(x.a,{color:"primary",className:"button",onClick:function(e){e.stopPropagation(),E({weather:!0,popoverOpen:!1})}},"Charts")),r.a.createElement(lt,{latlng:v.latlng,query:v.name,onChange:g})))}),st=0;function ut(e){return st||(e&&(st=1),st)}var dt=function(e){var t=e.match,a=e.children;return r.a.createElement("div",{style:t?{display:"block"}:{display:"none"}},a)},mt=function(){var e=E();return r.a.createElement(ct,e)},pt=function(){var e=E();return r.a.createElement(Je,e)},ft=function(){return r.a.createElement(c.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(s.b,{path:"/parameters",exact:!0,children:function(e){var t=e.match,a=Object(l.a)(e,["match"]);return r.a.createElement(dt,{key:ut(t),match:t},r.a.createElement(mt,a))}}),r.a.createElement(s.b,{path:"/",exact:!0,children:function(e){var t=e.match,a=Object(l.a)(e,["match"]);return r.a.createElement(dt,{match:t},r.a.createElement(pt,a))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(278),a(279),a(280),a(281),a(282);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[209,1,3]]]);
//# sourceMappingURL=main.f23ebaeb.chunk.js.map