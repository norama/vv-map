(this["webpackJsonpvv-map"]=this["webpackJsonpvv-map"]||[]).push([[0],{204:function(e,t,a){e.exports=a(277)},237:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},246:function(e,t,a){},269:function(e,t,a){},270:function(e,t,a){},277:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),o=a(107),i=a.n(o),c=a(149),l=a(89),s=a(72),d=a(150),u=a(283),m=a(186),h=a(187),p=a(93),g=a(201),f=a(198),v=a(188),w=a(200),b=function(e){Object(v.a)(a,e);var t=Object(f.a)(a);function a(e){return Object(m.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(g.a)(Object(p.a)(a.prototype),"get",this).call(this,e);return null!==n?n:t}}]),a}(Object(w.a)(URLSearchParams));function D(){return new b(Object(l.g)().search)}function y(e){return e.get("lat")||e.get("lng")?"":"London"}var O="51.533",x="-0.129",E=a(55),j=a(45),C=a(202),k=a(116),_=a(56),F="DejaVu Sans Mono";function M(e){var t=e.createChild(E.a);t.width=5,t.height=5,t.horizontalCenter="middle",t.verticalCenter="middle",e.states.create("hover").properties.scale=2}function N(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.propertyFields.rotation="winddirDegree";var a=e.createChild(E.d);a.horizontalCenter="middle",a.verticalCenter="bottom",a.strokeWidth=1,a.strokeOpacity=.7,a.direction="top",a.scale=2,a.width=5,t?a.propertyFields.height="windspeedKmph":a.height=10,a.fillOpacity=.5;var n=e.states.create("hover");n.properties.scale=2}function S(e){e.title.text="Temperature (\xb0C)",e.title.fontWeight=700,e.title.fontFamily=F,e.renderer.minGridDistance=30}var T=function(e,t){var a=t.startDate,n=t.endDate;e.leftAxesContainer.layout="vertical",e.rightAxesContainer.layout="vertical",e.preloader.disabled=!0,e.paddingRight=30,e.colors.list=[E.e("blue"),E.e("red"),E.e("green"),E.e("#0384fc"),E.e("magenta"),E.e("magenta"),E.e("white")],function(e,t,a){e.renderer.grid.template.disabled=!0;var n=Object(k.a)(new Date(t),1);n.setHours(18);var r=Object(_.a)(new Date(a),1);r.setHours(6),e.min=n.getTime(),e.max=r.getTime(),e.renderer.labels.template.location=.5,e.tooltipDateFormat="MM-dd:HH",e.groupData=!0,e.groupCount=300,e.groupIntervals.setAll([{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"month",count:1},{timeUnit:"year",count:1},{timeUnit:"year",count:10}])}(e.xAxes.push(new j.b),a,n);var r=e.yAxes.push(new j.f);!function(e){e.title.text="Percent (%)",e.title.fontWeight=700,e.title.fontFamily=F,e.min=0,e.max=100,e.renderer.minGridDistance=30}(r),r.marginTop=10,r.marginBottom=10;var o=e.yAxes.push(new j.f);S(o),o.marginTop=40,o.marginBottom=10;var i=e.yAxes.push(new j.f);S(i),i.marginTop=40,i.marginBottom=10,i.renderer.opposite=!0;var c=e.yAxes.push(new j.f);!function(e){e.title.text="Speed (km/h)",e.title.fontWeight=700,e.title.fontFamily=F,e.min=-20,e.max=120,e.renderer.minGridDistance=30}(c),c.marginTop=10,c.marginBottom=10,c.renderer.opposite=!0;var l=new j.h,s=e.series.push(new j.e);!function(e){e.name="Min. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="mintempC",e.tooltipText="Min.: {valueY.value} \xb0C",e.startLocation=.5}(s),s.yAxis=o,function(e){e.name="Max. day temperature",e.dataFields.dateX="date",e.dataFields.valueY="maxtempC",e.tooltipText="Max.: {valueY.value} \xb0C",e.startLocation=.5}(s=e.series.push(new j.e)),s.yAxis=o,function(e){e.name="Dew point",e.dataFields.dateX="date",e.dataFields.valueY="DewPointC",e.tooltipText="DewPoint: {valueY.value} \xb0C",e.strokeWidth=3,e.minBulletDistance=5,M(e.bullets.push(new j.a))}(s=e.series.push(new j.d)),s.yAxis=o,function(e){e.name="Relative humidity (%)",e.dataFields.dateX="date",e.dataFields.valueY="Humidity",e.tooltipText="Humidity: {valueY.value} %",e.strokeWidth=3,e.minBulletDistance=5,M(e.bullets.push(new j.a))}(s=e.series.push(new j.d)),s.yAxis=r,l.series.push(s),r.renderer.line.stroke=s.stroke,r.renderer.labels.template.fill=s.stroke,r.title.fill=s.stroke,function(e){e.name="Wind",e.dataFields.dateX="date",e.dataFields.valueY="windspeedKmph",e.tooltipText="wind ({winddirDegree}\xb0): {windspeedKmph} km/h",N(e.bullets.push(new j.a)),e.strokeWidth=1}(s=e.series.push(new j.d)),s.yAxis=c,c.renderer.line.stroke=s.stroke,c.renderer.labels.template.fill=s.stroke,c.title.fill=s.stroke,e.legend=new j.c,e.legend.reverseOrder=!0;var d=e.legend.markers.template;d.width=40,d.height=40,e.legend.position="right",e.legend.labels.template.fontSize=12,e.legend.labels.template.fontWeight=500,e.legend.labels.template.fontFamily=F,e.cursor=new j.i,e.scrollbarX=l},W=a(199),A=a(148),P=a(117);function U(e){return Object(d.a)(e,"yyyy-MM-dd")}var z=function(e,t){var a=function(e){for(var t=[],a=new Date(e.startDate),n=new Date(e.endDate);!Object(A.a)(a,n);){var r=Object(P.a)(a);t.push({startDate:U(a),endDate:U(r)}),a=Object(_.a)(r,1)}return t.push({startDate:U(a),endDate:U(n)}),t}(t);return Promise.all(a.map((function(t){return fetch("".concat("https://api.worldweatheronline.com/premium/v1/past-weather.ashx","?key=").concat("3f2b6d0ba2734bc49b6173238202004")+"&"+"q=".concat(e.lat+","+e.lng)+"&format=json&"+"date=".concat(t.startDate,"&enddate=").concat(t.endDate)).then((function(e){return e.json()}))}))).then((function(e){return e.reduce((function(e,t){return e.push.apply(e,Object(W.a)(t.data.weather)),e}),[])}))},L=a(191),B=(a(237),function(e){var t=e.size,a=e.loading;return r.a.createElement("div",{className:"__Loader__"},r.a.createElement(L.DotLoader,{sizeUnit:"px",color:"#5ac584",size:t||200,loading:a}))});a(238);E.h(C.a);var Y=function(e){var t=e.location,a=e.dateRange,o=Object(n.useState)(!0),i=Object(s.a)(o,2),c=i[0],l=i[1];Object(n.useEffect)((function(){var e=E.f("chartdiv",j.g),n=function(e){var t=e.tooltipContainer.createChild(E.b);return t.background.fill=E.e("#fff"),t.background.fillOpacity=.9,t.width=E.g(100),t.height=E.g(100),t}(e);return n.show(),z(t,a).then((function(t){T(e,a),e.data=d(t),setTimeout((function(){n.hide(),l(!1)}),1e3)})),function(){e.dispose()}}),[]);var d=function(e){var t=[],a=0;return e.forEach((function(e,n){0===a&&(a=new Date(e.date).getTime()),e.hourly.forEach((function(n){var r={date:a,DewPointC:n.DewPointC,Humidity:n.humidity,WeatherPictogram:2,WindPictogram:1,weatherDesc:n.weatherDesc.length?n.weatherDesc[0].value:"",weatherIconUrl:n.weatherIconUrl.length?n.weatherIconUrl[0].value:null,winddirDegree:n.winddirDegree,windspeedKmph:n.windspeedKmph,mintempC:e.mintempC,maxtempC:e.maxtempC};t.push(r),a+=108e5}))})),t};return r.a.createElement("div",{className:"__Chart__"},r.a.createElement(B,{loading:c}),r.a.createElement("div",{id:"chartdiv",className:"chart"}))},R=(a(239),function(e){return Object(d.a)(new Date(e),"MMM d")}),H=function(){var e=D(),t=Object(n.useState)({lat:e.get("lat",O),lng:e.get("lng",x)}),a=Object(s.a)(t,1)[0],o=Object(n.useState)({startDate:e.get("startDate","2020-03-01"),endDate:e.get("endDate","2020-03-31")}),i=Object(s.a)(o,1)[0],c=Object(n.useState)(e.get("name",y(e))),d=Object(s.a)(c,1)[0],m=Object(n.useState)(!1),h=Object(s.a)(m,2),p=h[0],g=h[1];return p?r.a.createElement(l.a,{to:"/parameters?"+"lat=".concat(a.lat)+"&"+"lng=".concat(a.lng)+"&"+"name=".concat(d)+"&"+"startDate=".concat(i.startDate)+"&"+"endDate=".concat(i.endDate)}):r.a.createElement("div",{className:"__Weather__"},r.a.createElement("div",{className:"weather-info"},r.a.createElement("h5",{className:"name"},d),r.a.createElement("h5",{className:"date-range"},R(i.startDate)+" - "+R(i.endDate)),r.a.createElement(u.a,{color:"primary",type:"button",onClick:function(){g(!0)},className:"button"},"Parameters")),r.a.createElement(Y,{location:a,dateRange:i}),r.a.createElement("a",{href:"https://www.worldweatheronline.com/developer/",className:"weather-reference",target:"_blank",rel:"noopener"},"Powered by World Weather Online"))},q=a(193),X=a(285),G=a(284),I=(a(246),function(e){var t=e.startDate,a=e.endDate,o=e.onChange,i=Object(n.useState)(!1),c=Object(s.a)(i,2),l=c[0],m=c[1];return r.a.createElement("div",{className:"__DateRange__"},r.a.createElement("div",{className:"daterange"},r.a.createElement("h5",{className:"title"},"Date range:"),r.a.createElement("div",{className:"range",id:"popover"},r.a.createElement("h5",{className:"text"},Object(d.a)(t,"MMM d, yyyy")," - ",Object(d.a)(a,"MMM d, yyyy")),r.a.createElement(u.a,{outline:!l,color:"secondary",className:"change"},l?"Done":"Change"))),r.a.createElement(X.a,{placement:"bottom",isOpen:l,target:"popover",toggle:function(){m((function(e){return!e}))}},r.a.createElement(G.a,null,r.a.createElement(q.DateRangePicker,{showSelectionPreview:!0,moveRangeOnFirstSelection:!1,maxDate:new Date,months:2,direction:"horizontal",ranges:[{startDate:t,endDate:a,key:"selection"}],onChange:function(e){o(e.selection)}}))))}),K=a(203),J=a(10),V=a.n(J),$=(a(276),a(269),a(196)),Q=a.n($),Z=a(197),ee=a.n(Z),te=V.a.icon({iconUrl:Q.a,shadowUrl:ee.a,iconSize:[25,41],shadowSize:[41,41],iconAnchor:[13,41],shadowAnchor:[13,41],popupAnchor:[0,-27]});V.a.Marker.prototype.options.icon=te;var ae=function(e){var t=e.latlng,a=e.query,o=e.onChange;return Object(n.useEffect)((function(){var e=function(e){o({latlng:[e.center.lat,e.center.lng],name:e.name})},n=V.a.map("map",{center:t,zoom:16,zoomControl:!1,layers:[V.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})]});V.a.control.zoom({position:"topright"}).addTo(n);var r=new V.a.Control.Geocoder.Nominatim,i=V.a.Control.geocoder({collapsed:!0,position:"topleft",geocoder:r,query:a,suggestMinLength:3,placeholder:"Search query or lat,lng"}).on("markgeocode",(function(t){e(t.geocode),setTimeout((function(){i._expand()}),500)})).on("collapse",(function(){setTimeout((function(){i._expand()}),500)})).addTo(n);i._toggle=i._geocode;var c=document.querySelector(".leaflet-control-geocoder-form input"),l=function(t){t.bbox||(t.bbox=V.a.latLngBounds(t.center,t.center)),t.html||t.name||(t.html="[".concat(t.center.lat,", ").concat(t.center.lng,"]"),t.name=""),i.markGeocode(t),e(t),setTimeout((function(){i._expand()}),500)};r.geocode(a,(function(e){var a=e.length?e[0]:{center:V.a.latLng(t)};l(a)})),n.on("expand",(function(){c.focus()})),n.on("dblclick",(function(e){var t=V.a.latLng(e.latlng);r.reverse(t,1,(function(e){c.value=t.lat+"."+t.lng;var a=e.length?e[0]:{};a=Object(K.a)({},a,{center:t}),l(a)}))})),setTimeout((function(){i._expand()}),500)}),[]),r.a.createElement("div",{className:"__Location__"},r.a.createElement("h5",{className:"title"},"Location (search or double click on map):"),r.a.createElement("div",{id:"map",className:"leaflet-map"}))},ne=(a(270),function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],o=t[1],i=D(),c=new Date(i.get("startDate","2020-03-01")),d=new Date(i.get("endDate","2020-03-31")),m=[parseFloat(i.get("lat",O)),parseFloat(i.get("lng",x))],h=i.get("name",y(i)),p=Object(n.useState)({startDate:c,endDate:d}),g=Object(s.a)(p,2),f=g[0],v=g[1],w=Object(n.useState)({latlng:m,name:h}),b=Object(s.a)(w,2),E=b[0],j=b[1];return a?r.a.createElement(l.a,{to:"/?"+"lat=".concat(E.latlng[0].toFixed(3))+"&"+"lng=".concat(E.latlng[1].toFixed(3))+"&"+"name=".concat(E.name)+"&"+"startDate=".concat(U(f.startDate))+"&"+"endDate=".concat(U(f.endDate))}):r.a.createElement("div",{className:"__Parameters__"},r.a.createElement("div",{className:"weather-button"},r.a.createElement(I,{startDate:f.startDate,endDate:f.endDate,onChange:v}),r.a.createElement(u.a,{color:"primary",className:"button",onClick:function(){o(!0)}},"Show Weather")),r.a.createElement(ae,{latlng:m,query:h,onChange:j}))}),re=function(){return r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/parameters"},r.a.createElement(ne,null)),r.a.createElement(l.b,{path:"/"},r.a.createElement(H,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(271),a(272),a(273),a(274),a(275);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[204,1,3]]]);
//# sourceMappingURL=main.10ab5a13.chunk.js.map