{"version":3,"sources":["util/query.js","util/date.js","chart/configChart.js","chart/manageChart.js","api/fetchWeather.js","components/Loader.js","components/DataChart.js","util/countries.js","util/geo.js","util/promise.js","util/usa.js","api/fetchVirusSpread.js","components/info/LocationVirusInfo.js","components/info/ExternalVirusInfo.js","components/info/References.js","components/CalcChart.js","components/Weather.js","components/parameters/DateRange.js","components/parameters/Location.js","components/Parameters.js","Main.js","serviceWorker.js","index.js"],"names":["Params","name","defaultValue","value","URLSearchParams","LONDON_LATLNG","defaultName","query","get","useQueryParams","useLocation","search","location","lat","lng","dateRange","startDate","endDate","DAY","SUMMER_TIME_START","dateMillis","dateString","date","format","dateStr","Date","getTime","FONT","configCircleBullet","bullet","circle","createChild","am4core","width","height","horizontalCenter","verticalCenter","states","create","properties","scale","configWindBullet","showSize","propertyFields","rotation","arrow","strokeWidth","strokeOpacity","direction","fillOpacity","hoverState","configPercentAxis","percentAxis","title","text","fontWeight","fontFamily","min","max","strictMinMax","renderer","minGridDistance","configTemperatureAxis","temperatureAxis","configHumiditySeries","series","dataFields","dateX","valueY","tooltipText","minBulletDistance","bullets","push","am4charts","configCloudCoverSeries","createCertain","chart","certain","tooltipContainer","background","fill","configDateRange","dateFormat","dateAxis","delta","grid","template","disabled","beforeStartDate","subDays","setHours","afterEndDate","addDays","tooltipDateFormat","groupData","groupCount","groupIntervals","setAll","timeUnit","count","configDateAxis","xAxes","getIndex","configDataChart","leftAxesContainer","layout","rightAxesContainer","preloader","paddingRight","colors","list","yAxes","marginTop","marginBottom","temperatureAxis2","opposite","speedAxis","configSpeedAxis","scrollbarX","startLocation","configMinDayTemperatureSeries","yAxis","configMaxDayTemperatureSeries","configTemperatureSeries","configDewPointSeries","line","stroke","labels","configWindSpeedSeries","configVisibilitySeries","legend","reverseOrder","markerTemplate","markers","position","fontSize","cursor","minHeight","configCalcAxis","calcAxis","configCalcRefAxis","configCalc1Series","configCalc2Series","createGrid","valueAxis","range","axisRanges","label","configVirusChart","virAllAxis","logarithmic","virNewAxis","addVirusAxes","mseries","configVirusNewSeries","configVirusAllSeries","hidden","legendContainer","parent","thumb","topAxesContainer","configEstimateChart","baseGrid","addEstimateAxes","configMeasureSeries","bottomAxesContainer","resetDataChart","zoomToDates","zoomToValues","bulletsContainer","disposeChildren","resetCalcChart","axis","fetchWeather","dateRanges","start","end","isSameMonth","x","endOfMonth","byMonths","Promise","all","map","fetch","process","then","response","json","responses","reduce","acc","data","weather","error","console","Loader","size","loading","className","sizeUnit","color","defaultProps","window","onbeforeunload","event","dispose","DataChart","onDataLoaded","useState","setLoading","useEffect","events","on","hide","setTimeout","show","weatherData","catch","alert","JSON","stringify","finally","invalidateData","millis","forEach","day","i","hourly","hour","item","DewPointC","parseFloat","Humidity","humidity","cloudcover","WeatherPictogram","WindPictogram","weatherDesc","length","weatherIconUrl","winddirDegree","windspeedKmph","mintempC","maxtempC","tempC","visibility","id","ISO_2_TO_3","AD","AE","AF","AG","AI","AL","AM","AN","AO","AQ","AR","AS","AT","AU","AW","AZ","BA","BB","BD","BE","BF","BG","BH","BI","BJ","BM","BN","BO","BR","BS","BT","BV","BW","BY","BZ","CA","CC","CD","CF","CG","CH","CI","CK","CL","CM","CN","CO","CR","CU","CV","CX","CY","CZ","DE","DJ","DK","DM","DO","DZ","EC","EE","EG","EH","ER","ES","ET","FI","FJ","FK","FM","FO","FR","GA","GB","GD","GE","GF","GG","GH","GI","GL","GM","GN","GP","GQ","GR","GS","GT","GU","GW","GY","HK","HM","HN","HR","HT","HU","ID","IE","IL","IM","IN","IO","IQ","IR","IS","IT","JE","JM","JO","JP","KE","KG","KH","KI","KM","KN","KP","KR","KW","KY","KZ","LA","LB","LC","LI","LK","LR","LS","LT","LU","LV","LY","MA","MC","MD","ME","MG","MH","MK","ML","MM","MN","MO","MP","MQ","MR","MS","MT","MU","MV","MW","MX","MY","MZ","NA","NC","NE","NF","NG","NI","NL","NO","NP","NR","NU","NZ","OM","PA","PE","PF","PG","PH","PK","PL","PM","PN","PR","PS","PT","PW","PY","QA","RE","RO","RS","RU","RW","SA","SB","SC","SD","SE","SG","SH","SI","SJ","SK","SL","SM","SN","SO","SR","ST","SV","SY","SZ","TC","TD","TF","TG","TH","TJ","TK","TL","TM","TN","TO","TR","TT","TV","TW","TZ","UA","UG","UM","US","UY","UZ","VA","VC","VE","VG","VI","VN","VU","WF","WS","YE","YT","ZA","ZM","ZW","distance","lon","lat0","lon0","y","toArray","keep","chainSingle","getPromise","promiseCount","spread","Array","keys","index","resolve","allPromise","concurrentCount","Math","provinceNames","AK","CT","DC","FL","HI","IA","KS","MI","NV","NH","NJ","NM","NY","ND","OH","OK","OR","RI","TX","UT","VT","WA","WV","WI","WY","AA","cache","virusSpreadCountriesTimeline","identity","transformVirusSpreadCountriesTimeline","countries","country","iso3","code","timelineMap","timeline","nearestProvince","provinces","minDist","Number","POSITIVE_INFINITY","res","province","dist","virusSpreadForCountry","startMillis","endMillis","Object","confirmed","new_confirmed","fetchVirusSpreadForProvince","city","dates","datesInRange","ceil","chain","provinceQueryParam","region","cities","confirmed_diff","errorCount","started","getErrorCount","log","fetchCity","regionCities","long","fetchVirusSpread","getResult","population","fetchVirusSpreadResult","countryDefault","url","key","transform","getFetched","trim","fetchCountryCode","find","c","coordinates","latitude","longitude","nearestCountry","filter","iso","p","result","substring","largerProvince","DataBadge","Badge","LocationVirusInfo","toLocaleString","formatPopulation","COUNTRY_MAP","Czechia","USA","PROVINCE_MAP","countryMap","provinceMap","ExternalVirusInfo","href","target","rel","preventEventPropagation","e","stopPropagation","References","close","popoverOpen","setPopoverOpen","Button","Popover","placement","isOpen","toggle","open","PopoverBody","onClick","Card","CardBody","START_CHARTS","estimate","virus","charts","initCharts","virusChart","estimateChart","topChart","bottomChart","zoomOutButton","minZoomed","maxZoomed","ev","triggerMove","point","configCalcCharts","disposeChart","calc1","temp","wind","vis","rh","calc2","CalcChart","reset","clicks","setClicks","locationVirusInfo","setLocationVirusInfo","incClicks","fetchVirusDataWithEstimates","floor","random","errorJson","locationData","lastDayItem","hourData","dewpoint","measure","virusDay","displayedDate","str","Weather","parameters","setParameters","setData","activeTab","setActiveTab","activateCalc","setActivateCalc","tab","to","Nav","tabs","NavItem","NavLink","type","TabContent","TabPane","tabId","DateRange","onChange","onTogglePopover","outline","showSelectionPreview","moveRangeOnFirstSelection","maxDate","months","ranges","staticRanges","selection","DefaultIcon","L","icon","iconUrl","shadowUrl","iconShadow","iconSize","shadowSize","iconAnchor","shadowAnchor","popupAnchor","Marker","prototype","options","Location","latlng","handleChange","center","zoomControl","zoom","maxZoom","layers","tileLayer","attribution","zoomOut","control","addTo","geocoder","Control","Geocoder","Nominatim","geocoderControl","collapsed","suggestMinLength","placeholder","geocode","_expand","_toggle","_geocode","searchInput","document","querySelector","markGeocode","bbox","latLngBounds","html","results","latLng","focus","reverse","Parameters","newDateRange","setNewDateRange","newLocation","setNewLocation","state","setState","toFixed","getParametersKey","match","ShowOnMatch","children","style","display","ParametersPage","queryParams","WeatherPage","Main","basename","path","exact","rest","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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CJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MACJC,GAAI,MAC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","file":"static/js/main.bdcaffe4.chunk.js","sourcesContent":["import { useLocation } from 'react-router-dom';\r\n\r\nclass Params extends URLSearchParams {\r\n\r\n    get(name, defaultValue=null) {\r\n        const value = super.get(name);\r\n        return value !== null ? value : defaultValue;\r\n    }\r\n}\r\n\r\n// A custom hook that builds on useLocation to parse\r\n// the query string for you.\r\nexport function useQuery() {\r\n    return new Params(useLocation().search);\r\n}\r\n\r\nexport const LONDON_NAME = 'London';\r\n\r\nexport const START_DATE = '2020-03-01';\r\nexport const END_DATE = '2020-03-31';\r\n\r\nexport const LONDON_LATLNG = {\r\n    lat: '51.533',\r\n    lng: '-0.129'\r\n};\r\n\r\nexport function defaultName(query) {\r\n    return query.get(\"lat\") || query.get(\"lng\") ? \"\" : LONDON_NAME;\r\n}\r\n\r\n\r\nexport function useQueryParams() {\r\n\r\n    const query = useQuery();\r\n\r\n    return {\r\n        location: {\r\n            lat: query.get(\"lat\", LONDON_LATLNG.lat),\r\n            lng: query.get(\"lng\", LONDON_LATLNG.lng)\r\n        },\r\n        dateRange: {\r\n            startDate: query.get(\"startDate\", START_DATE),\r\n            endDate: query.get(\"endDate\", END_DATE)\r\n        },\r\n        name: query.get(\"name\", defaultName(query))\r\n    };\r\n};\r\n\r\nfunction get(p, field) {\r\n    return p && p[field] ? p[field] : null;\r\n}\r\n\r\nexport function equals(p1, p2) {\r\n    return get(p1.location, 'lat') === get(p2.location, 'lat') &&\r\n        get(p1.location, 'lng') === get(p2.location, 'lng') &&\r\n        get(p1.dateRange, 'startDate') === get(p2.dateRange, 'startDate') &&\r\n        get(p1.dateRange, 'endDate') === get(p2.dateRange, 'endDate');\r\n}","import { format, isAfter, addDays } from 'date-fns';\r\n\r\nexport const HOUR = 3600000;\r\nexport const TWO_HOURS = 2 * HOUR;\r\nexport const THREE_HOURS = 3 * HOUR;\r\n\r\nexport const DAY = 24 * HOUR;\r\n\r\nexport const SUMMER_TIME_START = dateMillis('2020-03-29');\r\n\r\nexport function dateString(date) {\r\n    return format(date, 'yyyy-MM-dd');\r\n}\r\n\r\nexport function dateMillis(dateStr) {\r\n    return new Date(dateStr+'T00:00:00').getTime();\r\n}\r\n\r\nexport function datesInRange(dateRange) {\r\n    let dates = [];\r\n    const start = dateMillis(dateRange.startDate);\r\n    const end = dateMillis(dateRange.endDate);\r\n    for (let millis = start;\r\n             millis <= end;\r\n             millis += (millis === SUMMER_TIME_START) ? (DAY - HOUR) : DAY) {\r\n\r\n        dates.push(millis);\r\n    }\r\n    return dates;\r\n}","\r\nimport * as am4core from \"@amcharts/amcharts4/core\";\r\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\r\n\r\nimport { addDays, subDays } from 'date-fns';\r\nimport { dateMillis } from '../util/date';\r\n\r\nconst DEGREE = \"\\u00B0\";\r\nconst FONT = \"DejaVu Sans Mono\";\r\n\r\nfunction configCircleBullet(bullet) {\r\n    var circle = bullet.createChild(am4core.Circle);\r\n    circle.width = 5;\r\n    circle.height = 5;\r\n    circle.horizontalCenter = \"middle\";\r\n    circle.verticalCenter = \"middle\";\r\n\r\n    var hoverState = bullet.states.create(\"hover\");\r\n    hoverState.properties.scale = 2;\r\n}\r\n\r\nfunction configWeatherBullet(bullet) {\r\n    var image = bullet.createChild(am4core.Image);\r\n    image.propertyFields.href = \"weatherIconUrl\";\r\n    // image.tooltipText = \"{desc}\";\r\n\r\n    image.width = 15;\r\n    image.height = 15;\r\n    image.horizontalCenter = \"middle\";\r\n    image.verticalCenter = \"middle\";\r\n\r\n    var hoverState = bullet.states.create(\"hover\");\r\n    hoverState.properties.scale = 3;\r\n}\r\n\r\nfunction configWindBullet(bullet, showSize=true) {\r\n\r\n    // Bind `rotation` property to `angle` field in data\r\n    bullet.propertyFields.rotation = \"winddirDegree\";\r\n\r\n    // Add a triangle to act as am arrow\r\n    var arrow = bullet.createChild(am4core.Triangle);\r\n    arrow.horizontalCenter = \"middle\";\r\n    arrow.verticalCenter = \"bottom\";\r\n    //arrow.stroke = am4core.color(\"#fff\");\r\n    arrow.strokeWidth = 1;\r\n    arrow.strokeOpacity = 0.7;\r\n    arrow.direction = \"top\";\r\n    arrow.scale = 2;\r\n    arrow.width = 5;\r\n    if (showSize) {\r\n        arrow.propertyFields.height = \"windspeedKmph\";\r\n    } else {\r\n        arrow.height = 10;\r\n    }\r\n    arrow.fillOpacity = 0.5;\r\n\r\n    var hoverState = bullet.states.create(\"hover\");\r\n    hoverState.properties.scale = 2;\r\n}\r\n\r\nfunction configDateAxis(dateAxis, startDate, endDate, dateFormat, delta=6) {\r\n    dateAxis.renderer.grid.template.disabled = true;\r\n    //dateAxis.renderer.labels.template.disabled = true;\r\n\r\n    let beforeStartDate = subDays(dateMillis(startDate), 1);\r\n    beforeStartDate.setHours(24 - delta);\r\n\r\n    let afterEndDate = addDays(dateMillis(endDate), 1);\r\n    afterEndDate.setHours(delta);\r\n\r\n    dateAxis.min = beforeStartDate.getTime();\r\n    dateAxis.max = afterEndDate.getTime();\r\n    dateAxis.strictMinMax = true;\r\n\r\n    //dateAxis.renderer.labels.template.location = 0.5;\r\n\r\n    dateAxis.tooltipDateFormat = dateFormat;\r\n\r\n    dateAxis.groupData = true;\r\n    dateAxis.groupCount = 300;\r\n    dateAxis.groupIntervals.setAll([\r\n        { timeUnit: \"hour\", count: 1 },\r\n        { timeUnit: \"hour\", count: 3 },\r\n        { timeUnit: \"hour\", count: 6 },\r\n        { timeUnit: \"hour\", count: 12 },\r\n        { timeUnit: \"day\", count: 1 },\r\n        { timeUnit: \"day\", count: 3 },\r\n        { timeUnit: \"day\", count: 6 },\r\n        { timeUnit: \"day\", count: 15 },\r\n        { timeUnit: \"month\", count: 1 },\r\n        { timeUnit: \"year\", count: 1 },\r\n        { timeUnit: \"year\", count: 10 }\r\n    ]);\r\n}\r\n\r\nfunction configPictogramAxis(pictogramAxis) {\r\n    pictogramAxis.renderer.grid.template.disabled = true;\r\n    pictogramAxis.renderer.labels.template.disabled = true;\r\n    pictogramAxis.tooltip.disabled = true;\r\n    pictogramAxis.renderer.baseGrid.disabled = true;\r\n    pictogramAxis.renderer.maxHeight = 60;\r\n    pictogramAxis.min = 0;\r\n    pictogramAxis.max = 3;\r\n    pictogramAxis.renderer.minGridDistance = 10;\r\n}\r\n\r\nfunction configSpeedAxis(speedAxis) {\r\n    speedAxis.title.text = \"Speed (km/h), Dist (km)\";\r\n    speedAxis.title.fontWeight = 700;\r\n    speedAxis.title.fontFamily = FONT\r\n    speedAxis.min = -20;\r\n    speedAxis.max = 120;\r\n    speedAxis.strictMinMax = true;\r\n    speedAxis.renderer.minGridDistance = 30;\r\n}\r\n\r\nfunction configPercentAxis(percentAxis) {\r\n    percentAxis.title.text = \"Percent (%)\";\r\n    percentAxis.title.fontWeight = 700;\r\n    percentAxis.title.fontFamily = FONT;\r\n    percentAxis.min = -10;\r\n    percentAxis.max = 110;\r\n    percentAxis.strictMinMax = true;\r\n    percentAxis.renderer.minGridDistance = 30;\r\n}\r\n\r\nfunction configTemperatureAxis(temperatureAxis) {\r\n    temperatureAxis.title.text = \"Temperature (\" + DEGREE + \"C)\";\r\n    temperatureAxis.title.fontWeight = 700;\r\n    temperatureAxis.title.fontFamily = FONT;\r\n    //temperatureAxis.min = -30;\r\n    //temperatureAxis.max = 40;\r\n    temperatureAxis.strictMinMax = true;\r\n    temperatureAxis.renderer.minGridDistance = 30;\r\n}\r\n\r\nfunction configMinDayTemperatureSeries(series) {\r\n    series.name = \"Min. day temperature\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"mintempC\";\r\n    series.tooltipText = \"Min.: {valueY.value} \" + DEGREE + \"C\";\r\n    series.startLocation = 0.5;\r\n    //let bullet = series.bullets.push(new am4charts.Bullet());\r\n    //configTemperatureBullet(bullet);\r\n}\r\n\r\nfunction configMaxDayTemperatureSeries(series) {\r\n    series.name = \"Max. day temperature\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"maxtempC\";\r\n    series.tooltipText = \"Max.: {valueY.value} \" + DEGREE + \"C\";\r\n    series.startLocation = 0.5;\r\n    //let bullet = series.bullets.push(new am4charts.Bullet());\r\n    //configTemperatureBullet(bullet);\r\n}\r\n\r\nfunction configTemperatureSeries(series) {\r\n    series.name = \"Temperature\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"tempC\";\r\n    series.tooltipText = \"Temperature: {valueY.value} \" + DEGREE + \"C\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configDewPointSeries(series) {\r\n    series.name = \"Dew point\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"DewPointC\";\r\n    series.tooltipText = \"DewPoint: {valueY.value} \" + DEGREE + \"C\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configHumiditySeries(series) {\r\n    series.name = \"Relative humidity\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"Humidity\";\r\n    series.tooltipText = \"Humidity: {valueY.value} %\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configCloudCoverSeries(series) {\r\n    series.name = \"Cloud cover\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"cloudcover\";\r\n    series.tooltipText = \"Clouds: {valueY.value} %\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configWeatherPictogramSeries(series) {\r\n    series.name = \"Weather\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"WeatherPictogram\";\r\n    series.dataFields.desc = \"weatherDesc\";\r\n    series.strokeWidth = 0;\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configWeatherBullet(bullet);\r\n}\r\n\r\nfunction configWindPictogramSeries(series) {\r\n    series.name = \"Wind\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"WindPictogram\";\r\n    series.tooltipText = \"Wind ({winddirDegree}\" + DEGREE + \"): {windspeedKmph} km/h\";\r\n    series.strokeWidth = 0;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configWindBullet(bullet, true);\r\n}\r\n\r\nfunction configWindSpeedSeries(series) {\r\n    series.name = \"Wind\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"windspeedKmph\";\r\n    series.tooltipText = \"Wind ({winddirDegree}\" + DEGREE + \"): {windspeedKmph} km/h\";\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configWindBullet(bullet);\r\n    series.strokeWidth = 1;\r\n}\r\n\r\nfunction configVisibilitySeries(series) {\r\n    series.name = \"Visibility\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"visibility\";\r\n    series.tooltipText = \"Visibility: {visibility} km\";\r\n    series.strokeWidth = 3;\r\n    series.strokeOpacity = 0.8;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nexport function createCertain(chart) {\r\n    let certain = chart.tooltipContainer.createChild(am4core.Container);\r\n    certain.background.fill = am4core.color(\"#fff\");\r\n    certain.background.fillOpacity = 1;\r\n    certain.width = am4core.percent(100);\r\n    certain.height = am4core.percent(100);\r\n    return certain;\r\n}\r\n\r\nexport function configDateRange(chart, dateRange, dateFormat) {\r\n    const dateAxis = chart.xAxes.getIndex(0);\r\n    configDateAxis(dateAxis, dateRange.startDate, dateRange.endDate, dateFormat);\r\n}\r\n\r\nexport const configDataChart = (chart) => {\r\n\r\n    chart.leftAxesContainer.layout = \"vertical\";\r\n    chart.rightAxesContainer.layout = \"vertical\";\r\n\r\n    chart.preloader.disabled = true;\r\n\r\n    chart.paddingRight = 30;\r\n\r\n    chart.colors.list = [\r\n        am4core.color(\"blue\"),\r\n        am4core.color(\"red\"),\r\n        am4core.color(\"#573fd1\"),\r\n        am4core.color(\"green\"),\r\n        am4core.color(\"#0384fc\"),\r\n        am4core.color(\"#6f9ec9\"),\r\n        am4core.color(\"magenta\"),\r\n        am4core.color(\"#6a086e\")\r\n    ];\r\n\r\n    chart.xAxes.push(new am4charts.DateAxis());\r\n/*\r\n    let pictogramAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configPictogramAxis(pictogramAxis);\r\n    pictogramAxis.marginTop = 10;\r\n    pictogramAxis.marginBottom = 10;\r\n*/\r\n    let percentAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configPercentAxis(percentAxis);\r\n    percentAxis.marginTop = 10;\r\n    percentAxis.marginBottom = 10;\r\n\r\n    let temperatureAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configTemperatureAxis(temperatureAxis);\r\n    temperatureAxis.marginTop = 30;\r\n    temperatureAxis.marginBottom = 10;\r\n\r\n    let temperatureAxis2 = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configTemperatureAxis(temperatureAxis2);\r\n    temperatureAxis2.marginTop = 30;\r\n    temperatureAxis2.marginBottom = 10;\r\n    temperatureAxis2.renderer.opposite = true;\r\n\r\n    let speedAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configSpeedAxis(speedAxis);\r\n    speedAxis.marginTop = 10;\r\n    speedAxis.marginBottom = 10;\r\n    speedAxis.renderer.opposite = true;\r\n    speedAxis.renderer.grid.template.disabled = true;\r\n\r\n/*\r\n    let pictogramAxis2 = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configPictogramAxis(pictogramAxis2);\r\n    pictogramAxis2.marginTop = 10;\r\n    pictogramAxis2.marginBottom = 10;\r\n    pictogramAxis2.renderer.opposite = true;\r\n*/\r\n    let scrollbarX = new am4charts.XYChartScrollbar();\r\n    //let scrollbarY = new am4charts.XYChartScrollbar();\r\n\r\n    // Min. day temperature\r\n    let series = chart.series.push(new am4charts.StepLineSeries());\r\n    configMinDayTemperatureSeries(series);\r\n    series.yAxis = temperatureAxis;\r\n    scrollbarX.series.push(series);\r\n    //scrollbarY.series.push(series);\r\n\r\n    // Max. day temperature\r\n    series = chart.series.push(new am4charts.StepLineSeries());\r\n    configMaxDayTemperatureSeries(series);\r\n    series.yAxis = temperatureAxis;\r\n    scrollbarX.series.push(series);\r\n    //scrollbarY.series.push(series);\r\n\r\n    // Temperature\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configTemperatureSeries(series);\r\n    series.yAxis = temperatureAxis;\r\n    scrollbarX.series.push(series);\r\n\r\n    // Dew point\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configDewPointSeries(series);\r\n    series.yAxis = temperatureAxis;\r\n    //scrollbarX.series.push(series);\r\n    //scrollbarY.series.push(series);\r\n\r\n    // Relative humidity\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configHumiditySeries(series);\r\n    series.yAxis = percentAxis;\r\n    //scrollbarX.series.push(series);\r\n    percentAxis.renderer.line.stroke = series.stroke;\r\n    percentAxis.renderer.labels.template.fill = series.stroke;\r\n\r\n    // Cloud cover\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCloudCoverSeries(series);\r\n    series.yAxis = percentAxis;\r\n    percentAxis.title.fill = series.stroke;\r\n\r\n/*\r\n    // Weather pictogram\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configWeatherPictogramSeries(series);\r\n    series.yAxis = pictogramAxis;\r\n*/\r\n\r\n    // Wind\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configWindSpeedSeries(series);\r\n    series.yAxis = speedAxis;\r\n    speedAxis.renderer.line.stroke = series.stroke;\r\n    speedAxis.renderer.labels.template.fill = series.stroke;\r\n/*\r\n    // Wind pictogram\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configWindPictogramSeries(series);\r\n    series.yAxis = pictogramAxis2;\r\n*/\r\n\r\n    // Visibility\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configVisibilitySeries(series);\r\n    series.yAxis = speedAxis;\r\n    speedAxis.title.fill = series.stroke;\r\n\r\n    chart.legend = new am4charts.Legend();\r\n    chart.legend.reverseOrder = true;\r\n    var markerTemplate = chart.legend.markers.template;\r\n    markerTemplate.width = 40;\r\n    markerTemplate.height = 40;\r\n    chart.legend.position = \"right\";\r\n    chart.legend.labels.template.fontSize = 12;\r\n    chart.legend.labels.template.fontWeight = 500;\r\n    chart.legend.labels.template.fontFamily = FONT;\r\n\r\n    chart.cursor = new am4charts.XYCursor();\r\n\r\n    scrollbarX.minHeight = 30;\r\n    chart.scrollbarX = scrollbarX;\r\n    //chart.scrollbarY = scrollbarY;\r\n};\r\n\r\nfunction configCalcAxis(calcAxis) {\r\n    calcAxis.title.fontWeight = 700;\r\n    calcAxis.title.fontFamily = FONT;\r\n    calcAxis.renderer.minGridDistance = 30;\r\n}\r\n\r\nfunction configCalcRefAxis(calcAxis) {\r\n    configCalcAxis(calcAxis);\r\n    calcAxis.title.text = \"Calc (ref below)\";\r\n    calcAxis.marginTop = 0;\r\n    calcAxis.strictMinMax = false;\r\n    calcAxis.marginBottom = 0;\r\n    calcAxis.renderer.line.stroke = am4core.color(\"#edac15\");\r\n    calcAxis.renderer.grid.template.disabled = true;\r\n    calcAxis.renderer.labels.template.disabled = true;\r\n    calcAxis.title.fill = am4core.color(\"#edac15\");\r\n    calcAxis.title.disabled = true;\r\n    calcAxis.renderer.opposite = true;\r\n}\r\n\r\nfunction configCalc1Series(series) {\r\n    series.name = \"with visibility\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"calc1\";\r\n    series.tooltipText = \"calc vis: {calc1}\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configCalc2Series(series) {\r\n    series.name = \"without visibility\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"calc2\";\r\n    series.tooltipText = \"calc: {calc2}\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configMeasureSeries(series) {\r\n    series.name = \"dewpoint - temp\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"measure\";\r\n    series.tooltipText = \"dewpoint - temp: {measure}\";\r\n    series.strokeWidth = 3;\r\n\r\n    series.minBulletDistance = 10;\r\n    let bullet = series.bullets.push(new am4charts.Bullet());\r\n    configCircleBullet(bullet);\r\n}\r\n\r\nfunction configVirusAllSeries(series) {\r\n    series.name = \"Virus All\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"confirmed\";\r\n    series.tooltipText = \"all confirmed: {confirmed}\";\r\n    series.strokeWidth = 3;\r\n}\r\n\r\nfunction configVirusNewSeries(series) {\r\n    series.name = \"Virus New\";\r\n    series.dataFields.dateX = \"date\";\r\n    series.dataFields.valueY = \"new_confirmed\";\r\n    series.tooltipText = \"new confirmed: {new_confirmed}\";\r\n    series.strokeWidth = 3;\r\n}\r\n\r\nconst addVirusAxes = (chart) => {\r\n\r\n    let calcAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configCalcRefAxis(calcAxis);\r\n\r\n    let virAllAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configCalcAxis(virAllAxis);\r\n    virAllAxis.title.text = \"Virus All\";\r\n    virAllAxis.marginTop = 0;\r\n    virAllAxis.marginBottom = 0;\r\n    //virAllAxis.renderer.opposite = true;\r\n    virAllAxis.renderer.line.stroke = am4core.color(\"#521d75\");\r\n    virAllAxis.renderer.labels.template.fill = am4core.color(\"#521d75\");\r\n    virAllAxis.title.fill = am4core.color(\"#521d75\");\r\n    virAllAxis.renderer.grid.template.disabled = true;\r\n    virAllAxis.renderer.opposite = true;\r\n    virAllAxis.strictMinMax = true;\r\n    virAllAxis.logarithmic = true;\r\n\r\n    let virNewAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configCalcAxis(virNewAxis);\r\n    virNewAxis.title.text = \"Virus New\";\r\n    virNewAxis.marginTop = 0;\r\n    virNewAxis.marginBottom = 0;\r\n    //virNewAxis.renderer.opposite = true;\r\n    virNewAxis.renderer.line.stroke = am4core.color(\"#2e3033\");\r\n    virNewAxis.renderer.labels.template.fill = am4core.color(\"#2e3033\");\r\n    virNewAxis.title.fill = am4core.color(\"#2e3033\");\r\n    //virNewAxis.min = -10;\r\n    virNewAxis.strictMinMax = true;\r\n\r\n    return { virAllAxis, virNewAxis, calcAxis };\r\n};\r\n\r\nfunction createGrid(valueAxis, value) {\r\n    var range = valueAxis.axisRanges.create();\r\n    range.value = value;\r\n    range.label.text = \"{value}\";\r\n}\r\n\r\nconst addEstimateAxes = (chart) => {\r\n\r\n    let calcAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configCalcRefAxis(calcAxis);\r\n\r\n    let percentAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configPercentAxis(percentAxis);\r\n    percentAxis.strictMinMax = true;\r\n    percentAxis.marginTop = 0;\r\n    percentAxis.marginBottom = 0;\r\n    percentAxis.renderer.line.stroke = am4core.color(\"#0384fc\");\r\n    percentAxis.renderer.labels.template.fill = am4core.color(\"#0384fc\");\r\n    percentAxis.title.fill = am4core.color(\"#0384fc\");\r\n    percentAxis.renderer.opposite = true;\r\n    percentAxis.renderer.grid.template.disabled = true;\r\n    //percentAxis.renderer.labels.template.disabled = true;\r\n    percentAxis.renderer.grid.template.stroke = am4core.color(\"blue\");\r\n    percentAxis.renderer.grid.template.strokeWidth = 1;\r\n    createGrid(percentAxis, 50);\r\n    createGrid(percentAxis, 100);\r\n\r\n    let temperatureAxis = chart.yAxes.push(new am4charts.ValueAxis());\r\n    configTemperatureAxis(temperatureAxis);\r\n    temperatureAxis.title.text = \"Dewp - temp (\" + DEGREE + \"C)\";\r\n    //temperatureAxis.strictMinMax = true;\r\n    temperatureAxis.marginTop = 0;\r\n    temperatureAxis.marginBottom = 0;\r\n    temperatureAxis.renderer.line.stroke = am4core.color(\"#1dad91\");\r\n    temperatureAxis.renderer.labels.template.fill = am4core.color(\"#1dad91\");\r\n    temperatureAxis.title.fill = am4core.color(\"#1dad91\");\r\n    temperatureAxis.renderer.grid.template.disabled = true;\r\n    //temperatureAxis.renderer.labels.template.disabled = true;\r\n    createGrid(temperatureAxis, 0);\r\n    createGrid(temperatureAxis, -1);\r\n    temperatureAxis.renderer.grid.template.stroke = am4core.color(\"red\");\r\n    temperatureAxis.renderer.grid.template.strokeWidth = 1;\r\n    temperatureAxis.renderer.baseGrid.stroke = am4core.color(\"red\");\r\n    temperatureAxis.renderer.baseGrid.strokeWidth = 2;\r\n    temperatureAxis.max = 5;\r\n\r\n    //percentAxis.syncWithAxis = temperatureAxis;\r\n    //percentAxis.showOnInit = true;\r\n    //temperatureAxis.showOnInit = true;\r\n\r\n    return { percentAxis, temperatureAxis, calcAxis };\r\n};\r\n\r\nconst syncCalcCharts = (topChart, bottomChart) => {\r\n    bottomChart.zoomOutButton.events.on(\"hit\", zoomOut);\r\n\r\n    function zoomOut(event) {\r\n        let dateAxis = topChart.xAxes.getIndex(0);\r\n        dateAxis.zoomToDates(dateAxis.min, dateAxis.max);\r\n    }\r\n\r\n    let dateAxis = bottomChart.xAxes.getIndex(0);\r\n    dateAxis.events.on(\"selectionextremeschanged\", syncZoom);\r\n\r\n    function syncZoom(event) {\r\n        let dateAxis = topChart.xAxes.getIndex(0);\r\n        dateAxis.zoomToDates(event.target.minZoomed, event.target.maxZoomed);\r\n    }\r\n/*\r\n    for (const series of topChart.series) {\r\n        series.tooltip.pointerOrientation = \"left\";\r\n    }\r\n    for (const series of bottomChart.series) {\r\n        series.tooltip.pointerOrientation = \"right\";\r\n    }\r\n*/\r\n    bottomChart.cursor.events.on(\"cursorpositionchanged\", function(ev) {\r\n        topChart.cursor.triggerMove(ev.target.point, \"none\", true);\r\n    });\r\n};\r\n\r\nconst configVirusChart = (chart) => {\r\n    chart.preloader.disabled = true;\r\n\r\n    chart.paddingRight = 30;\r\n\r\n    chart.colors.list = [\r\n        am4core.color(\"#2e3033\"),\r\n        am4core.color(\"#521d75\"),\r\n        am4core.color(\"#edac15\"),\r\n        am4core.color(\"#e84900\"),\r\n    ];\r\n\r\n    let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n    dateAxis.renderer.opposite = true;\r\n    dateAxis.renderer.labels.template.disabled = true;\r\n\r\n    const { virAllAxis, virNewAxis, calcAxis } = addVirusAxes(chart);\r\n\r\n    // Virus new\r\n    let mseries = chart.series.push(new am4charts.StepLineSeries());\r\n    configVirusNewSeries(mseries);\r\n    mseries.yAxis = virNewAxis;\r\n\r\n    // Virus all\r\n    let series = chart.series.push(new am4charts.StepLineSeries());\r\n    configVirusAllSeries(series);\r\n    series.yAxis = virAllAxis;\r\n    series.hidden = true;\r\n\r\n    // Calc with visibility\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCalc1Series(series);\r\n    series.yAxis = calcAxis;\r\n    series.hidden = true;\r\n\r\n    // Calc without visibility\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCalc2Series(series);\r\n    series.yAxis = calcAxis;\r\n    series.hidden = true;\r\n\r\n    let legendContainer = am4core.create(\"topLegend\", am4core.Container);\r\n    legendContainer.width = am4core.percent(100);\r\n    legendContainer.height = 30;\r\n\r\n    chart.legend = new am4charts.Legend();\r\n    chart.legend.parent = legendContainer;\r\n    //chart.legend.reverseOrder = true;\r\n    var markerTemplate = chart.legend.markers.template;\r\n    markerTemplate.width = 40;\r\n    markerTemplate.height = 40;\r\n    chart.legend.position = \"top\";\r\n    chart.legend.labels.template.fontSize = 12;\r\n    chart.legend.labels.template.fontWeight = 500;\r\n    chart.legend.labels.template.fontFamily = FONT;\r\n\r\n    chart.cursor = new am4charts.XYCursor();\r\n    /*\r\n    chart.cursor.xAxis = dateAxis;\r\n    chart.cursor.fullWidthLineX = true;\r\n    chart.cursor.lineX.strokeWidth = 0;\r\n    chart.cursor.lineX.fill = am4core.color(\"#848f94\");\r\n    chart.cursor.lineX.fillOpacity = 0.1;\r\n    */\r\n\r\n    let scrollbarX = new am4charts.XYChartScrollbar();\r\n    scrollbarX.minHeight = 10;\r\n    scrollbarX.series.push(mseries);\r\n    chart.scrollbarX = scrollbarX;\r\n    chart.scrollbarX.background.fill = am4core.color(\"#2e3033\");\r\n    chart.scrollbarX.background.fillOpacity = 0.2;\r\n    chart.scrollbarX.thumb.background.fill = am4core.color(\"#848f94\");\r\n    chart.scrollbarX.thumb.background.fillOpacity = 0.2;\r\n    chart.scrollbarX.parent = chart.topAxesContainer;\r\n\r\n    chart.rightAxesContainer.width = 100;\r\n    chart.leftAxesContainer.width = 100;\r\n};\r\n\r\nconst configEstimateChart = (chart) => {\r\n    chart.preloader.disabled = true;\r\n\r\n    chart.paddingRight = 30;\r\n\r\n    chart.colors.list = [\r\n        am4core.color(\"#1dad91\"),\r\n        am4core.color(\"#0384fc\"),\r\n        am4core.color(\"#6f9ec9\"),\r\n        am4core.color(\"#edac15\"),\r\n        am4core.color(\"#e84900\"),\r\n    ];\r\n\r\n    let dateAxis = chart.xAxes.push(new am4charts.DateAxis());\r\n    dateAxis.renderer.labels.template.disabled = true;\r\n\r\n    const { percentAxis, temperatureAxis, calcAxis } = addEstimateAxes(chart);\r\n\r\n    // measure: temperature - dewpoint\r\n    let mseries = chart.series.push(new am4charts.LineSeries());\r\n    configMeasureSeries(mseries);\r\n    mseries.yAxis = temperatureAxis;\r\n\r\n    // relative humidity\r\n    let series = chart.series.push(new am4charts.LineSeries());\r\n    configHumiditySeries(series);\r\n    series.yAxis = percentAxis;\r\n    series.hidden = true;\r\n\r\n    // Cloud cover\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCloudCoverSeries(series);\r\n    series.yAxis = percentAxis;\r\n    series.hidden = true;\r\n\r\n    // Calc with visibility\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCalc1Series(series);\r\n    series.yAxis = calcAxis;\r\n    series.hidden = true;\r\n\r\n    // Calc without visibility\r\n    series = chart.series.push(new am4charts.LineSeries());\r\n    configCalc2Series(series);\r\n    series.yAxis = calcAxis;\r\n    series.hidden = true;\r\n\r\n    let legendContainer = am4core.create(\"bottomLegend\", am4core.Container);\r\n    legendContainer.width = am4core.percent(100);\r\n    legendContainer.height = 30;\r\n\r\n    chart.legend = new am4charts.Legend();\r\n    chart.legend.parent = legendContainer;\r\n    //chart.legend.reverseOrder = true;\r\n    var markerTemplate = chart.legend.markers.template;\r\n    markerTemplate.width = 40;\r\n    markerTemplate.height = 40;\r\n    chart.legend.position = \"bottom\";\r\n    chart.legend.labels.template.fontSize = 12;\r\n    chart.legend.labels.template.fontWeight = 500;\r\n    chart.legend.labels.template.fontFamily = FONT;\r\n\r\n    chart.cursor = new am4charts.XYCursor();\r\n\r\n    let scrollbarX = new am4charts.XYChartScrollbar();\r\n    scrollbarX.minHeight = 10;\r\n    scrollbarX.series.push(mseries);\r\n    chart.scrollbarX = scrollbarX;\r\n    chart.scrollbarX.background.fill = am4core.color(\"#cc6e21\");\r\n    chart.scrollbarX.background.fillOpacity = 0.2;\r\n    chart.scrollbarX.thumb.background.fill = am4core.color(\"#1d997a\");\r\n    chart.scrollbarX.thumb.background.fillOpacity = 0.2;\r\n    chart.scrollbarX.parent = chart.bottomAxesContainer;\r\n\r\n    chart.rightAxesContainer.width = 100;\r\n    chart.leftAxesContainer.width = 100;\r\n};\r\n\r\nexport const configCalcCharts = (virusChart, estimateChart) => {\r\n\r\n    configVirusChart(virusChart);\r\n    configEstimateChart(estimateChart);\r\n\r\n    syncCalcCharts(virusChart, estimateChart);\r\n}\r\n","import { addDays, subDays } from 'date-fns';\r\n\r\nimport { configDateRange } from './configChart';\r\n\r\nconst DATE_FORMAT = \"MM-dd:HH\";\r\n\r\nexport const resetDataChart = (chart, dateRange) => {\r\n    configDateRange(chart, dateRange, DATE_FORMAT);\r\n\r\n    let dateAxis = chart.xAxes.getIndex(0);\r\n    dateAxis.zoomToDates(new Date(dateRange.startDate), new Date(dateRange.endDate));\r\n    dateAxis.zoomToDates(dateAxis.min, dateAxis.max);\r\n\r\n    // workaround to display axis ranges properly\r\n    const percentAxis = chart.yAxes.getIndex(0);\r\n    percentAxis.zoomToValues(percentAxis.min + 1, percentAxis.max - 1);\r\n    const speedAxis = chart.yAxes.getIndex(3);\r\n    speedAxis.zoomToValues(speedAxis.min + 1, speedAxis.max - 1);\r\n\r\n    for (const series of chart.series) {\r\n        series.bulletsContainer.disposeChildren()\r\n    }\r\n};\r\n\r\nexport const resetCalcChart = (chart, dateRange, delta) => {\r\n    configDateRange(chart, dateRange, DATE_FORMAT, delta);\r\n\r\n    let dateAxis = chart.xAxes.getIndex(0);\r\n    dateAxis.zoomToDates(new Date(dateRange.startDate), new Date(dateRange.endDate));\r\n    dateAxis.zoomToDates(dateAxis.min, dateAxis.max);\r\n\r\n    // workaround for percent axis\r\n    const axis = chart.yAxes.getIndex(0);\r\n    if (axis.title.text === \"Percent (%)\") {\r\n        axis.zoomToValues(axis.min + 1, axis.max - 1);\r\n    }\r\n\r\n    for (const series of chart.series) {\r\n        series.bulletsContainer.disposeChildren()\r\n    }\r\n};","import { isSameMonth, endOfMonth, addDays } from 'date-fns';\r\n\r\nimport { dateString } from '../util/date';\r\n\r\nfunction byMonths(dateRange) {\r\n    let dateRanges = [];\r\n    let start = new Date(dateRange.startDate);\r\n    let end = new Date(dateRange.endDate);\r\n\r\n    while (!isSameMonth(start, end)) {\r\n        let x = endOfMonth(start);\r\n        dateRanges.push({ startDate: dateString(start), endDate: dateString(x) });\r\n        start = addDays(x, 1);\r\n    }\r\n    dateRanges.push({ startDate: dateString(start), endDate: dateString(end) });\r\n\r\n    return dateRanges;\r\n}\r\n\r\nfunction fetchWeather(location, dateRange) {\r\n    const dateRanges = byMonths(dateRange);\r\n\r\n    return Promise.all(dateRanges.map((dateRange) => (\r\n        fetch(`${process.env.REACT_APP_WEATHER_URL}?key=${process.env.REACT_APP_WEATHER_KEY}` + '&' +\r\n            `q=${location.lat+','+location.lng}` + '&' +\r\n            `format=json` + '&' +\r\n            `date=${dateRange.startDate}&enddate=${dateRange.endDate}`\r\n        ).then((response) => (response.json()))\r\n    ))).then((responses) => (\r\n        responses.reduce((acc, response) => {\r\n            if (response.data.weather) {\r\n                acc.push(...response.data.weather);\r\n            } else if (response.data.error) {\r\n                const error = response.data.error;\r\n                console.error(error);\r\n                throw error;\r\n            }\r\n            return acc;\r\n        }, [])\r\n    ));\r\n}\r\n\r\nexport default fetchWeather;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { DotLoader } from 'react-spinners';\r\n\r\nimport './Loader.css';\r\n\r\nconst Loader = ({ size, loading }) => {\r\n\r\n    return (\r\n        <div className=\"__Loader__\">\r\n            <DotLoader\r\n                sizeUnit={\"px\"}\r\n                color={'#5ac584'}\r\n                size={size}\r\n                loading={loading}\r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nLoader.defaultProps = {\r\n    size: 200,\r\n    loading: false\r\n};\r\n\r\nLoader.propTypes = {\r\n    size: PropTypes.number,\r\n    loading: PropTypes.bool\r\n};\r\n\r\nexport default Loader;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport * as am4core from \"@amcharts/amcharts4/core\";\r\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\r\n//import theme from \"@amcharts/amcharts4/themes/animated\";\r\n\r\nimport { configDataChart, createCertain } from '../chart/configChart';\r\nimport { resetDataChart } from '../chart/manageChart';\r\n\r\nimport { dateMillis } from '../util/date';\r\n\r\nimport fetchWeather from '../api/fetchWeather';\r\n\r\nimport Loader from './Loader';\r\n\r\nimport './Chart.css';\r\n\r\nimport { TWO_HOURS, THREE_HOURS, SUMMER_TIME_START } from '../util/date';\r\n\r\n//am4core.useTheme(theme);\r\n\r\nlet chart = null;\r\nlet certain = null;\r\n\r\nwindow.onbeforeunload = function(event) {\r\n    if (chart) {\r\n        chart.dispose();\r\n        chart = null;\r\n    }\r\n};\r\n\r\nconst DataChart = ({ location, dateRange, onDataLoaded }) => {\r\n\r\n    const [ loading, setLoading ] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!location || !dateRange) {\r\n            return;\r\n        }\r\n\r\n        // console.log('location: [' + location.lat + ', ' + location.lng + '], dateRange: ' + dateRange.startDate + ' - ' + dateRange.endDate);\r\n\r\n        if (chart === null) {\r\n            // console.log('---> CREATING CHART')\r\n            chart = am4core.create(\"dataChart\", am4charts.XYChart);\r\n            certain = createCertain(chart);\r\n\r\n            configDataChart(chart);\r\n\r\n            chart.events.on(\"datavalidated\", function () {\r\n                setLoading(false);\r\n                certain.hide();\r\n                setTimeout(() => {\r\n                    onDataLoaded(chart.data);\r\n                }, 1000);\r\n            });\r\n        }\r\n\r\n        certain.show();\r\n        setLoading(true);\r\n\r\n        fetchWeather(location, dateRange).then((weather) => {\r\n            if (chart === null) {\r\n                return;\r\n            }\r\n            resetDataChart(chart, dateRange, true);\r\n            chart.data = weatherData(weather);\r\n        }).catch((error) => {\r\n            if (chart === null) {\r\n                return;\r\n            }\r\n            resetDataChart(chart, dateRange, true);\r\n            chart.data = [];\r\n\r\n            alert(JSON.stringify(error));\r\n        }).finally(() => {\r\n            chart.invalidateData();\r\n        });\r\n\r\n    }, [ location.lat, location.lng, dateRange.startDate, dateRange.endDate ]);\r\n\r\n    const weatherData = (weather) => {\r\n\r\n        let data = [];\r\n        let millis = 0;\r\n\r\n        weather.forEach((day, i) => {\r\n            if (millis === 0) {\r\n                millis = dateMillis(day.date);\r\n            }\r\n\r\n            day.hourly.forEach((hour) => {\r\n                let item = {\r\n                    date: millis,\r\n                    DewPointC: parseFloat(hour.DewPointC),\r\n                    Humidity: parseFloat(hour.humidity),\r\n                    cloudcover: parseFloat(hour.cloudcover),\r\n                    WeatherPictogram: 2,\r\n                    WindPictogram: 1,\r\n                    weatherDesc: hour.weatherDesc.length ? hour.weatherDesc[0].value : '',\r\n                    weatherIconUrl: hour.weatherIconUrl.length ? hour.weatherIconUrl[0].value : null,\r\n                    winddirDegree: parseFloat(hour.winddirDegree),\r\n                    windspeedKmph: parseFloat(hour.windspeedKmph),\r\n                    mintempC: parseFloat(day.mintempC),\r\n                    maxtempC: parseFloat(day.maxtempC),\r\n                    tempC: parseFloat(hour.tempC),\r\n                    visibility: parseFloat(hour.visibility)\r\n                };\r\n                data.push(item);\r\n                if (millis === SUMMER_TIME_START) {\r\n                    millis += TWO_HOURS;\r\n                } else {\r\n                    millis += THREE_HOURS;\r\n                }\r\n            });\r\n        });\r\n\r\n        return data;\r\n    };\r\n\r\n    return (\r\n        <div className=\"__Chart__\">\r\n            <Loader loading={loading} />\r\n            <div id=\"dataChart\" className=\"chart\"></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nDataChart.propTypes = {\r\n    location: PropTypes.shape({\r\n        lat: PropTypes.string.isRequired,\r\n        lng: PropTypes.string.isRequired\r\n    }).isRequired,\r\n    dateRange: PropTypes.shape({\r\n        startDate: PropTypes.string.isRequired, // 'yyyy-MM-dd'\r\n        endDate: PropTypes.string.isRequired    // 'yyyy-MM-dd'\r\n    }).isRequired,\r\n    onDataLoaded: PropTypes.func.isRequired\r\n};\r\n\r\nexport default DataChart;","// source: https://gist.github.com/tadast/8827699\r\n\r\n// [\"Country\",\"Alpha-2code\",\"Alpha-3code\",\"Numericcode\",\"Latitude(average)\",\"Longitude(average)\"],\r\nexport const COUNTRIES = [\r\n    [\"Afghanistan\",\"AF\",\"AFG\",\"4\",\"33\",\"65\"],\r\n    [\"Albania\",\"AL\",\"ALB\",\"8\",\"41\",\"20\"],\r\n    [\"Algeria\",\"DZ\",\"DZA\",\"12\",\"28\",\"3\"],\r\n    [\"AmericanSamoa\",\"AS\",\"ASM\",\"16\",\"-14.3333\",\"-170\"],\r\n    [\"Andorra\",\"AD\",\"AND\",\"20\",\"42.5\",\"1.6\"],\r\n    [\"Angola\",\"AO\",\"AGO\",\"24\",\"-12.5\",\"18.5\"],\r\n    [\"Anguilla\",\"AI\",\"AIA\",\"660\",\"18.25\",\"-63.1667\"],\r\n    [\"Antarctica\",\"AQ\",\"ATA\",\"10\",\"-90\",\"0\"],\r\n    [\"AntiguaandBarbuda\",\"AG\",\"ATG\",\"28\",\"17.05\",\"-61.8\"],\r\n    [\"Argentina\",\"AR\",\"ARG\",\"32\",\"-34\",\"-64\"],\r\n    [\"Armenia\",\"AM\",\"ARM\",\"51\",\"40\",\"45\"],\r\n    [\"Aruba\",\"AW\",\"ABW\",\"533\",\"12.5\",\"-69.9667\"],\r\n    [\"Australia\",\"AU\",\"AUS\",\"36\",\"-27\",\"133\"],\r\n    [\"Austria\",\"AT\",\"AUT\",\"40\",\"47.3333\",\"13.3333\"],\r\n    [\"Azerbaijan\",\"AZ\",\"AZE\",\"31\",\"40.5\",\"47.5\"],\r\n    [\"Bahamas\",\"BS\",\"BHS\",\"44\",\"24.25\",\"-76\"],\r\n    [\"Bahrain\",\"BH\",\"BHR\",\"48\",\"26\",\"50.55\"],\r\n    [\"Bangladesh\",\"BD\",\"BGD\",\"50\",\"24\",\"90\"],\r\n    [\"Barbados\",\"BB\",\"BRB\",\"52\",\"13.1667\",\"-59.5333\"],\r\n    [\"Belarus\",\"BY\",\"BLR\",\"112\",\"53\",\"28\"],\r\n    [\"Belgium\",\"BE\",\"BEL\",\"56\",\"50.8333\",\"4\"],\r\n    [\"Belize\",\"BZ\",\"BLZ\",\"84\",\"17.25\",\"-88.75\"],\r\n    [\"Benin\",\"BJ\",\"BEN\",\"204\",\"9.5\",\"2.25\"],\r\n    [\"Bermuda\",\"BM\",\"BMU\",\"60\",\"32.3333\",\"-64.75\"],\r\n    [\"Bhutan\",\"BT\",\"BTN\",\"64\",\"27.5\",\"90.5\"],\r\n    [\"Bolivia,PlurinationalStateof\",\"BO\",\"BOL\",\"68\",\"-17\",\"-65\"],\r\n    [\"Bolivia\",\"BO\",\"BOL\",\"68\",\"-17\",\"-65\"],\r\n    [\"BosniaandHerzegovina\",\"BA\",\"BIH\",\"70\",\"44\",\"18\"],\r\n    [\"Botswana\",\"BW\",\"BWA\",\"72\",\"-22\",\"24\"],\r\n    [\"BouvetIsland\",\"BV\",\"BVT\",\"74\",\"-54.4333\",\"3.4\"],\r\n    [\"Brazil\",\"BR\",\"BRA\",\"76\",\"-10\",\"-55\"],\r\n    [\"BritishIndianOceanTerritory\",\"IO\",\"IOT\",\"86\",\"-6\",\"71.5\"],\r\n    [\"BruneiDarussalam\",\"BN\",\"BRN\",\"96\",\"4.5\",\"114.6667\"],\r\n    [\"Brunei\",\"BN\",\"BRN\",\"96\",\"4.5\",\"114.6667\"],\r\n    [\"Bulgaria\",\"BG\",\"BGR\",\"100\",\"43\",\"25\"],\r\n    [\"BurkinaFaso\",\"BF\",\"BFA\",\"854\",\"13\",\"-2\"],\r\n    [\"Burundi\",\"BI\",\"BDI\",\"108\",\"-3.5\",\"30\"],\r\n    [\"Cambodia\",\"KH\",\"KHM\",\"116\",\"13\",\"105\"],\r\n    [\"Cameroon\",\"CM\",\"CMR\",\"120\",\"6\",\"12\"],\r\n    [\"Canada\",\"CA\",\"CAN\",\"124\",\"60\",\"-95\"],\r\n    [\"CapeVerde\",\"CV\",\"CPV\",\"132\",\"16\",\"-24\"],\r\n    [\"CaymanIslands\",\"KY\",\"CYM\",\"136\",\"19.5\",\"-80.5\"],\r\n    [\"CentralAfricanRepublic\",\"CF\",\"CAF\",\"140\",\"7\",\"21\"],\r\n    [\"Chad\",\"TD\",\"TCD\",\"148\",\"15\",\"19\"],\r\n    [\"Chile\",\"CL\",\"CHL\",\"152\",\"-30\",\"-71\"],\r\n    [\"China\",\"CN\",\"CHN\",\"156\",\"35\",\"105\"],\r\n    [\"ChristmasIsland\",\"CX\",\"CXR\",\"162\",\"-10.5\",\"105.6667\"],\r\n    [\"Cocos(Keeling)Islands\",\"CC\",\"CCK\",\"166\",\"-12.5\",\"96.8333\"],\r\n    [\"Colombia\",\"CO\",\"COL\",\"170\",\"4\",\"-72\"],\r\n    [\"Comoros\",\"KM\",\"COM\",\"174\",\"-12.1667\",\"44.25\"],\r\n    [\"Congo\",\"CG\",\"COG\",\"178\",\"-1\",\"15\"],\r\n    [\"Congo,theDemocraticRepublicofthe\",\"CD\",\"COD\",\"180\",\"0\",\"25\"],\r\n    [\"CookIslands\",\"CK\",\"COK\",\"184\",\"-21.2333\",\"-159.7667\"],\r\n    [\"CostaRica\",\"CR\",\"CRI\",\"188\",\"10\",\"-84\"],\r\n    [\"Cted'Ivoire\",\"CI\",\"CIV\",\"384\",\"8\",\"-5\"],\r\n    [\"IvoryCoast\",\"CI\",\"CIV\",\"384\",\"8\",\"-5\"],\r\n    [\"Croatia\",\"HR\",\"HRV\",\"191\",\"45.1667\",\"15.5\"],\r\n    [\"Cuba\",\"CU\",\"CUB\",\"192\",\"21.5\",\"-80\"],\r\n    [\"Cyprus\",\"CY\",\"CYP\",\"196\",\"35\",\"33\"],\r\n    [\"CzechRepublic\",\"CZ\",\"CZE\",\"203\",\"49.75\",\"15.5\"],\r\n    [\"Denmark\",\"DK\",\"DNK\",\"208\",\"56\",\"10\"],\r\n    [\"Djibouti\",\"DJ\",\"DJI\",\"262\",\"11.5\",\"43\"],\r\n    [\"Dominica\",\"DM\",\"DMA\",\"212\",\"15.4167\",\"-61.3333\"],\r\n    [\"DominicanRepublic\",\"DO\",\"DOM\",\"214\",\"19\",\"-70.6667\"],\r\n    [\"Ecuador\",\"EC\",\"ECU\",\"218\",\"-2\",\"-77.5\"],\r\n    [\"Egypt\",\"EG\",\"EGY\",\"818\",\"27\",\"30\"],\r\n    [\"ElSalvador\",\"SV\",\"SLV\",\"222\",\"13.8333\",\"-88.9167\"],\r\n    [\"EquatorialGuinea\",\"GQ\",\"GNQ\",\"226\",\"2\",\"10\"],\r\n    [\"Eritrea\",\"ER\",\"ERI\",\"232\",\"15\",\"39\"],\r\n    [\"Estonia\",\"EE\",\"EST\",\"233\",\"59\",\"26\"],\r\n    [\"Ethiopia\",\"ET\",\"ETH\",\"231\",\"8\",\"38\"],\r\n    [\"FalklandIslands(Malvinas)\",\"FK\",\"FLK\",\"238\",\"-51.75\",\"-59\"],\r\n    [\"FaroeIslands\",\"FO\",\"FRO\",\"234\",\"62\",\"-7\"],\r\n    [\"Fiji\",\"FJ\",\"FJI\",\"242\",\"-18\",\"175\"],\r\n    [\"Finland\",\"FI\",\"FIN\",\"246\",\"64\",\"26\"],\r\n    [\"France\",\"FR\",\"FRA\",\"250\",\"46\",\"2\"],\r\n    [\"FrenchGuiana\",\"GF\",\"GUF\",\"254\",\"4\",\"-53\"],\r\n    [\"FrenchPolynesia\",\"PF\",\"PYF\",\"258\",\"-15\",\"-140\"],\r\n    [\"FrenchSouthernTerritories\",\"TF\",\"ATF\",\"260\",\"-43\",\"67\"],\r\n    [\"Gabon\",\"GA\",\"GAB\",\"266\",\"-1\",\"11.75\"],\r\n    [\"Gambia\",\"GM\",\"GMB\",\"270\",\"13.4667\",\"-16.5667\"],\r\n    [\"Georgia\",\"GE\",\"GEO\",\"268\",\"42\",\"43.5\"],\r\n    [\"Germany\",\"DE\",\"DEU\",\"276\",\"51\",\"9\"],\r\n    [\"Ghana\",\"GH\",\"GHA\",\"288\",\"8\",\"-2\"],\r\n    [\"Gibraltar\",\"GI\",\"GIB\",\"292\",\"36.1833\",\"-5.3667\"],\r\n    [\"Greece\",\"GR\",\"GRC\",\"300\",\"39\",\"22\"],\r\n    [\"Greenland\",\"GL\",\"GRL\",\"304\",\"72\",\"-40\"],\r\n    [\"Grenada\",\"GD\",\"GRD\",\"308\",\"12.1167\",\"-61.6667\"],\r\n    [\"Guadeloupe\",\"GP\",\"GLP\",\"312\",\"16.25\",\"-61.5833\"],\r\n    [\"Guam\",\"GU\",\"GUM\",\"316\",\"13.4667\",\"144.7833\"],\r\n    [\"Guatemala\",\"GT\",\"GTM\",\"320\",\"15.5\",\"-90.25\"],\r\n    [\"Guernsey\",\"GG\",\"GGY\",\"831\",\"49.5\",\"-2.56\"],\r\n    [\"Guinea\",\"GN\",\"GIN\",\"324\",\"11\",\"-10\"],\r\n    [\"Guinea-Bissau\",\"GW\",\"GNB\",\"624\",\"12\",\"-15\"],\r\n    [\"Guyana\",\"GY\",\"GUY\",\"328\",\"5\",\"-59\"],\r\n    [\"Haiti\",\"HT\",\"HTI\",\"332\",\"19\",\"-72.4167\"],\r\n    [\"HeardIslandandMcDonaldIslands\",\"HM\",\"HMD\",\"334\",\"-53.1\",\"72.5167\"],\r\n    [\"HolySee(VaticanCityState)\",\"VA\",\"VAT\",\"336\",\"41.9\",\"12.45\"],\r\n    [\"Honduras\",\"HN\",\"HND\",\"340\",\"15\",\"-86.5\"],\r\n    [\"HongKong\",\"HK\",\"HKG\",\"344\",\"22.25\",\"114.1667\"],\r\n    [\"Hungary\",\"HU\",\"HUN\",\"348\",\"47\",\"20\"],\r\n    [\"Iceland\",\"IS\",\"ISL\",\"352\",\"65\",\"-18\"],\r\n    [\"India\",\"IN\",\"IND\",\"356\",\"20\",\"77\"],\r\n    [\"Indonesia\",\"ID\",\"IDN\",\"360\",\"-5\",\"120\"],\r\n    [\"Iran,IslamicRepublicof\",\"IR\",\"IRN\",\"364\",\"32\",\"53\"],\r\n    [\"Iraq\",\"IQ\",\"IRQ\",\"368\",\"33\",\"44\"],\r\n    [\"Ireland\",\"IE\",\"IRL\",\"372\",\"53\",\"-8\"],\r\n    [\"IsleofMan\",\"IM\",\"IMN\",\"833\",\"54.23\",\"-4.55\"],\r\n    [\"Israel\",\"IL\",\"ISR\",\"376\",\"31.5\",\"34.75\"],\r\n    [\"Italy\",\"IT\",\"ITA\",\"380\",\"42.8333\",\"12.8333\"],\r\n    [\"Jamaica\",\"JM\",\"JAM\",\"388\",\"18.25\",\"-77.5\"],\r\n    [\"Japan\",\"JP\",\"JPN\",\"392\",\"36\",\"138\"],\r\n    [\"Jersey\",\"JE\",\"JEY\",\"832\",\"49.21\",\"-2.13\"],\r\n    [\"Jordan\",\"JO\",\"JOR\",\"400\",\"31\",\"36\"],\r\n    [\"Kazakhstan\",\"KZ\",\"KAZ\",\"398\",\"48\",\"68\"],\r\n    [\"Kenya\",\"KE\",\"KEN\",\"404\",\"1\",\"38\"],\r\n    [\"Kiribati\",\"KI\",\"KIR\",\"296\",\"1.4167\",\"173\"],\r\n    [\"Korea,DemocraticPeople'sRepublicof\",\"KP\",\"PRK\",\"408\",\"40\",\"127\"],\r\n    [\"Korea,Republicof\",\"KR\",\"KOR\",\"410\",\"37\",\"127.5\"],\r\n    [\"SouthKorea\",\"KR\",\"KOR\",\"410\",\"37\",\"127.5\"],\r\n    [\"Kuwait\",\"KW\",\"KWT\",\"414\",\"29.3375\",\"47.6581\"],\r\n    [\"Kyrgyzstan\",\"KG\",\"KGZ\",\"417\",\"41\",\"75\"],\r\n    [\"LaoPeople'sDemocraticRepublic\",\"LA\",\"LAO\",\"418\",\"18\",\"105\"],\r\n    [\"Latvia\",\"LV\",\"LVA\",\"428\",\"57\",\"25\"],\r\n    [\"Lebanon\",\"LB\",\"LBN\",\"422\",\"33.8333\",\"35.8333\"],\r\n    [\"Lesotho\",\"LS\",\"LSO\",\"426\",\"-29.5\",\"28.5\"],\r\n    [\"Liberia\",\"LR\",\"LBR\",\"430\",\"6.5\",\"-9.5\"],\r\n    [\"LibyanArabJamahiriya\",\"LY\",\"LBY\",\"434\",\"25\",\"17\"],\r\n    [\"Libya\",\"LY\",\"LBY\",\"434\",\"25\",\"17\"],\r\n    [\"Liechtenstein\",\"LI\",\"LIE\",\"438\",\"47.1667\",\"9.5333\"],\r\n    [\"Lithuania\",\"LT\",\"LTU\",\"440\",\"56\",\"24\"],\r\n    [\"Luxembourg\",\"LU\",\"LUX\",\"442\",\"49.75\",\"6.1667\"],\r\n    [\"Macao\",\"MO\",\"MAC\",\"446\",\"22.1667\",\"113.55\"],\r\n    [\"Macedonia,theformerYugoslavRepublicof\",\"MK\",\"MKD\",\"807\",\"41.8333\",\"22\"],\r\n    [\"Madagascar\",\"MG\",\"MDG\",\"450\",\"-20\",\"47\"],\r\n    [\"Malawi\",\"MW\",\"MWI\",\"454\",\"-13.5\",\"34\"],\r\n    [\"Malaysia\",\"MY\",\"MYS\",\"458\",\"2.5\",\"112.5\"],\r\n    [\"Maldives\",\"MV\",\"MDV\",\"462\",\"3.25\",\"73\"],\r\n    [\"Mali\",\"ML\",\"MLI\",\"466\",\"17\",\"-4\"],\r\n    [\"Malta\",\"MT\",\"MLT\",\"470\",\"35.8333\",\"14.5833\"],\r\n    [\"MarshallIslands\",\"MH\",\"MHL\",\"584\",\"9\",\"168\"],\r\n    [\"Martinique\",\"MQ\",\"MTQ\",\"474\",\"14.6667\",\"-61\"],\r\n    [\"Mauritania\",\"MR\",\"MRT\",\"478\",\"20\",\"-12\"],\r\n    [\"Mauritius\",\"MU\",\"MUS\",\"480\",\"-20.2833\",\"57.55\"],\r\n    [\"Mayotte\",\"YT\",\"MYT\",\"175\",\"-12.8333\",\"45.1667\"],\r\n    [\"Mexico\",\"MX\",\"MEX\",\"484\",\"23\",\"-102\"],\r\n    [\"Micronesia,FederatedStatesof\",\"FM\",\"FSM\",\"583\",\"6.9167\",\"158.25\"],\r\n    [\"Moldova,Republicof\",\"MD\",\"MDA\",\"498\",\"47\",\"29\"],\r\n    [\"Monaco\",\"MC\",\"MCO\",\"492\",\"43.7333\",\"7.4\"],\r\n    [\"Mongolia\",\"MN\",\"MNG\",\"496\",\"46\",\"105\"],\r\n    [\"Montenegro\",\"ME\",\"MNE\",\"499\",\"42\",\"19\"],\r\n    [\"Montserrat\",\"MS\",\"MSR\",\"500\",\"16.75\",\"-62.2\"],\r\n    [\"Morocco\",\"MA\",\"MAR\",\"504\",\"32\",\"-5\"],\r\n    [\"Mozambique\",\"MZ\",\"MOZ\",\"508\",\"-18.25\",\"35\"],\r\n    [\"Myanmar\",\"MM\",\"MMR\",\"104\",\"22\",\"98\"],\r\n    [\"Burma\",\"MM\",\"MMR\",\"104\",\"22\",\"98\"],\r\n    [\"Namibia\",\"NA\",\"NAM\",\"516\",\"-22\",\"17\"],\r\n    [\"Nauru\",\"NR\",\"NRU\",\"520\",\"-0.5333\",\"166.9167\"],\r\n    [\"Nepal\",\"NP\",\"NPL\",\"524\",\"28\",\"84\"],\r\n    [\"Netherlands\",\"NL\",\"NLD\",\"528\",\"52.5\",\"5.75\"],\r\n    [\"NetherlandsAntilles\",\"AN\",\"ANT\",\"530\",\"12.25\",\"-68.75\"],\r\n    [\"NewCaledonia\",\"NC\",\"NCL\",\"540\",\"-21.5\",\"165.5\"],\r\n    [\"NewZealand\",\"NZ\",\"NZL\",\"554\",\"-41\",\"174\"],\r\n    [\"Nicaragua\",\"NI\",\"NIC\",\"558\",\"13\",\"-85\"],\r\n    [\"Niger\",\"NE\",\"NER\",\"562\",\"16\",\"8\"],\r\n    [\"Nigeria\",\"NG\",\"NGA\",\"566\",\"10\",\"8\"],\r\n    [\"Niue\",\"NU\",\"NIU\",\"570\",\"-19.0333\",\"-169.8667\"],\r\n    [\"NorfolkIsland\",\"NF\",\"NFK\",\"574\",\"-29.0333\",\"167.95\"],\r\n    [\"NorthernMarianaIslands\",\"MP\",\"MNP\",\"580\",\"15.2\",\"145.75\"],\r\n    [\"Norway\",\"NO\",\"NOR\",\"578\",\"62\",\"10\"],\r\n    [\"Oman\",\"OM\",\"OMN\",\"512\",\"21\",\"57\"],\r\n    [\"Pakistan\",\"PK\",\"PAK\",\"586\",\"30\",\"70\"],\r\n    [\"Palau\",\"PW\",\"PLW\",\"585\",\"7.5\",\"134.5\"],\r\n    [\"PalestinianTerritory,Occupied\",\"PS\",\"PSE\",\"275\",\"32\",\"35.25\"],\r\n    [\"Panama\",\"PA\",\"PAN\",\"591\",\"9\",\"-80\"],\r\n    [\"PapuaNewGuinea\",\"PG\",\"PNG\",\"598\",\"-6\",\"147\"],\r\n    [\"Paraguay\",\"PY\",\"PRY\",\"600\",\"-23\",\"-58\"],\r\n    [\"Peru\",\"PE\",\"PER\",\"604\",\"-10\",\"-76\"],\r\n    [\"Philippines\",\"PH\",\"PHL\",\"608\",\"13\",\"122\"],\r\n    [\"Pitcairn\",\"PN\",\"PCN\",\"612\",\"-24.7\",\"-127.4\"],\r\n    [\"Poland\",\"PL\",\"POL\",\"616\",\"52\",\"20\"],\r\n    [\"Portugal\",\"PT\",\"PRT\",\"620\",\"39.5\",\"-8\"],\r\n    [\"PuertoRico\",\"PR\",\"PRI\",\"630\",\"18.25\",\"-66.5\"],\r\n    [\"Qatar\",\"QA\",\"QAT\",\"634\",\"25.5\",\"51.25\"],\r\n    [\"Runion\",\"RE\",\"REU\",\"638\",\"-21.1\",\"55.6\"],\r\n    [\"Romania\",\"RO\",\"ROU\",\"642\",\"46\",\"25\"],\r\n    [\"RussianFederation\",\"RU\",\"RUS\",\"643\",\"60\",\"100\"],\r\n    [\"Russia\",\"RU\",\"RUS\",\"643\",\"60\",\"100\"],\r\n    [\"Rwanda\",\"RW\",\"RWA\",\"646\",\"-2\",\"30\"],\r\n    [\"SaintHelena,AscensionandTristandaCunha\",\"SH\",\"SHN\",\"654\",\"-15.9333\",\"-5.7\"],\r\n    [\"SaintKittsandNevis\",\"KN\",\"KNA\",\"659\",\"17.3333\",\"-62.75\"],\r\n    [\"SaintLucia\",\"LC\",\"LCA\",\"662\",\"13.8833\",\"-61.1333\"],\r\n    [\"SaintPierreandMiquelon\",\"PM\",\"SPM\",\"666\",\"46.8333\",\"-56.3333\"],\r\n    [\"SaintVincentandtheGrenadines\",\"VC\",\"VCT\",\"670\",\"13.25\",\"-61.2\"],\r\n    [\"SaintVincent&theGrenadines\",\"VC\",\"VCT\",\"670\",\"13.25\",\"-61.2\"],\r\n    [\"St.VincentandtheGrenadines\",\"VC\",\"VCT\",\"670\",\"13.25\",\"-61.2\"],\r\n    [\"Samoa\",\"WS\",\"WSM\",\"882\",\"-13.5833\",\"-172.3333\"],\r\n    [\"SanMarino\",\"SM\",\"SMR\",\"674\",\"43.7667\",\"12.4167\"],\r\n    [\"SaoTomeandPrincipe\",\"ST\",\"STP\",\"678\",\"1\",\"7\"],\r\n    [\"SaudiArabia\",\"SA\",\"SAU\",\"682\",\"25\",\"45\"],\r\n    [\"Senegal\",\"SN\",\"SEN\",\"686\",\"14\",\"-14\"],\r\n    [\"Serbia\",\"RS\",\"SRB\",\"688\",\"44\",\"21\"],\r\n    [\"Seychelles\",\"SC\",\"SYC\",\"690\",\"-4.5833\",\"55.6667\"],\r\n    [\"SierraLeone\",\"SL\",\"SLE\",\"694\",\"8.5\",\"-11.5\"],\r\n    [\"Singapore\",\"SG\",\"SGP\",\"702\",\"1.3667\",\"103.8\"],\r\n    [\"Slovakia\",\"SK\",\"SVK\",\"703\",\"48.6667\",\"19.5\"],\r\n    [\"Slovenia\",\"SI\",\"SVN\",\"705\",\"46\",\"15\"],\r\n    [\"SolomonIslands\",\"SB\",\"SLB\",\"90\",\"-8\",\"159\"],\r\n    [\"Somalia\",\"SO\",\"SOM\",\"706\",\"10\",\"49\"],\r\n    [\"SouthAfrica\",\"ZA\",\"ZAF\",\"710\",\"-29\",\"24\"],\r\n    [\"SouthGeorgiaandtheSouthSandwichIslands\",\"GS\",\"SGS\",\"239\",\"-54.5\",\"-37\"],\r\n    [\"Spain\",\"ES\",\"ESP\",\"724\",\"40\",\"-4\"],\r\n    [\"SriLanka\",\"LK\",\"LKA\",\"144\",\"7\",\"81\"],\r\n    [\"Sudan\",\"SD\",\"SDN\",\"736\",\"15\",\"30\"],\r\n    [\"Suriname\",\"SR\",\"SUR\",\"740\",\"4\",\"-56\"],\r\n    [\"SvalbardandJanMayen\",\"SJ\",\"SJM\",\"744\",\"78\",\"20\"],\r\n    [\"Swaziland\",\"SZ\",\"SWZ\",\"748\",\"-26.5\",\"31.5\"],\r\n    [\"Sweden\",\"SE\",\"SWE\",\"752\",\"62\",\"15\"],\r\n    [\"Switzerland\",\"CH\",\"CHE\",\"756\",\"47\",\"8\"],\r\n    [\"SyrianArabRepublic\",\"SY\",\"SYR\",\"760\",\"35\",\"38\"],\r\n    [\"Taiwan,ProvinceofChina\",\"TW\",\"TWN\",\"158\",\"23.5\",\"121\"],\r\n    [\"Taiwan\",\"TW\",\"TWN\",\"158\",\"23.5\",\"121\"],\r\n    [\"Tajikistan\",\"TJ\",\"TJK\",\"762\",\"39\",\"71\"],\r\n    [\"Tanzania,UnitedRepublicof\",\"TZ\",\"TZA\",\"834\",\"-6\",\"35\"],\r\n    [\"Thailand\",\"TH\",\"THA\",\"764\",\"15\",\"100\"],\r\n    [\"Timor-Leste\",\"TL\",\"TLS\",\"626\",\"-8.55\",\"125.5167\"],\r\n    [\"Togo\",\"TG\",\"TGO\",\"768\",\"8\",\"1.1667\"],\r\n    [\"Tokelau\",\"TK\",\"TKL\",\"772\",\"-9\",\"-172\"],\r\n    [\"Tonga\",\"TO\",\"TON\",\"776\",\"-20\",\"-175\"],\r\n    [\"TrinidadandTobago\",\"TT\",\"TTO\",\"780\",\"11\",\"-61\"],\r\n    [\"Trinidad&Tobago\",\"TT\",\"TTO\",\"780\",\"11\",\"-61\"],\r\n    [\"Tunisia\",\"TN\",\"TUN\",\"788\",\"34\",\"9\"],\r\n    [\"Turkey\",\"TR\",\"TUR\",\"792\",\"39\",\"35\"],\r\n    [\"Turkmenistan\",\"TM\",\"TKM\",\"795\",\"40\",\"60\"],\r\n    [\"TurksandCaicosIslands\",\"TC\",\"TCA\",\"796\",\"21.75\",\"-71.5833\"],\r\n    [\"Tuvalu\",\"TV\",\"TUV\",\"798\",\"-8\",\"178\"],\r\n    [\"Uganda\",\"UG\",\"UGA\",\"800\",\"1\",\"32\"],\r\n    [\"Ukraine\",\"UA\",\"UKR\",\"804\",\"49\",\"32\"],\r\n    [\"UnitedArabEmirates\",\"AE\",\"ARE\",\"784\",\"24\",\"54\"],\r\n    [\"UnitedKingdom\",\"GB\",\"GBR\",\"826\",\"54\",\"-2\"],\r\n    [\"UnitedStates\",\"US\",\"USA\",\"840\",\"38\",\"-97\"],\r\n    [\"UnitedStatesMinorOutlyingIslands\",\"UM\",\"UMI\",\"581\",\"19.2833\",\"166.6\"],\r\n    [\"Uruguay\",\"UY\",\"URY\",\"858\",\"-33\",\"-56\"],\r\n    [\"Uzbekistan\",\"UZ\",\"UZB\",\"860\",\"41\",\"64\"],\r\n    [\"Vanuatu\",\"VU\",\"VUT\",\"548\",\"-16\",\"167\"],\r\n    [\"Venezuela,BolivarianRepublicof\",\"VE\",\"VEN\",\"862\",\"8\",\"-66\"],\r\n    [\"Venezuela\",\"VE\",\"VEN\",\"862\",\"8\",\"-66\"],\r\n    [\"VietNam\",\"VN\",\"VNM\",\"704\",\"16\",\"106\"],\r\n    [\"Vietnam\",\"VN\",\"VNM\",\"704\",\"16\",\"106\"],\r\n    [\"VirginIslands,British\",\"VG\",\"VGB\",\"92\",\"18.5\",\"-64.5\"],\r\n    [\"VirginIslands,U.S.\",\"VI\",\"VIR\",\"850\",\"18.3333\",\"-64.8333\"],\r\n    [\"WallisandFutuna\",\"WF\",\"WLF\",\"876\",\"-13.3\",\"-176.2\"],\r\n    [\"WesternSahara\",\"EH\",\"ESH\",\"732\",\"24.5\",\"-13\"],\r\n    [\"Yemen\",\"YE\",\"YEM\",\"887\",\"15\",\"48\"],\r\n    [\"Zambia\",\"ZM\",\"ZMB\",\"894\",\"-15\",\"30\"],\r\n    [\"Zimbabwe\",\"ZW\",\"ZWE\",\"716\",\"-20\",\"30\"]\r\n];\r\n\r\n// COUNTRIES.reduce((acc, c, i) => { acc[c[1]] = c[2]; return acc; }, {})\r\nexport const ISO_2_TO_3 = {\r\n    AD: \"AND\",\r\n    AE: \"ARE\",\r\n    AF: \"AFG\",\r\n    AG: \"ATG\",\r\n    AI: \"AIA\",\r\n    AL: \"ALB\",\r\n    AM: \"ARM\",\r\n    AN: \"ANT\",\r\n    AO: \"AGO\",\r\n    AQ: \"ATA\",\r\n    AR: \"ARG\",\r\n    AS: \"ASM\",\r\n    AT: \"AUT\",\r\n    AU: \"AUS\",\r\n    AW: \"ABW\",\r\n    AZ: \"AZE\",\r\n    BA: \"BIH\",\r\n    BB: \"BRB\",\r\n    BD: \"BGD\",\r\n    BE: \"BEL\",\r\n    BF: \"BFA\",\r\n    BG: \"BGR\",\r\n    BH: \"BHR\",\r\n    BI: \"BDI\",\r\n    BJ: \"BEN\",\r\n    BM: \"BMU\",\r\n    BN: \"BRN\",\r\n    BO: \"BOL\",\r\n    BR: \"BRA\",\r\n    BS: \"BHS\",\r\n    BT: \"BTN\",\r\n    BV: \"BVT\",\r\n    BW: \"BWA\",\r\n    BY: \"BLR\",\r\n    BZ: \"BLZ\",\r\n    CA: \"CAN\",\r\n    CC: \"CCK\",\r\n    CD: \"COD\",\r\n    CF: \"CAF\",\r\n    CG: \"COG\",\r\n    CH: \"CHE\",\r\n    CI: \"CIV\",\r\n    CK: \"COK\",\r\n    CL: \"CHL\",\r\n    CM: \"CMR\",\r\n    CN: \"CHN\",\r\n    CO: \"COL\",\r\n    CR: \"CRI\",\r\n    CU: \"CUB\",\r\n    CV: \"CPV\",\r\n    CX: \"CXR\",\r\n    CY: \"CYP\",\r\n    CZ: \"CZE\",\r\n    DE: \"DEU\",\r\n    DJ: \"DJI\",\r\n    DK: \"DNK\",\r\n    DM: \"DMA\",\r\n    DO: \"DOM\",\r\n    DZ: \"DZA\",\r\n    EC: \"ECU\",\r\n    EE: \"EST\",\r\n    EG: \"EGY\",\r\n    EH: \"ESH\",\r\n    ER: \"ERI\",\r\n    ES: \"ESP\",\r\n    ET: \"ETH\",\r\n    FI: \"FIN\",\r\n    FJ: \"FJI\",\r\n    FK: \"FLK\",\r\n    FM: \"FSM\",\r\n    FO: \"FRO\",\r\n    FR: \"FRA\",\r\n    GA: \"GAB\",\r\n    GB: \"GBR\",\r\n    GD: \"GRD\",\r\n    GE: \"GEO\",\r\n    GF: \"GUF\",\r\n    GG: \"GGY\",\r\n    GH: \"GHA\",\r\n    GI: \"GIB\",\r\n    GL: \"GRL\",\r\n    GM: \"GMB\",\r\n    GN: \"GIN\",\r\n    GP: \"GLP\",\r\n    GQ: \"GNQ\",\r\n    GR: \"GRC\",\r\n    GS: \"SGS\",\r\n    GT: \"GTM\",\r\n    GU: \"GUM\",\r\n    GW: \"GNB\",\r\n    GY: \"GUY\",\r\n    HK: \"HKG\",\r\n    HM: \"HMD\",\r\n    HN: \"HND\",\r\n    HR: \"HRV\",\r\n    HT: \"HTI\",\r\n    HU: \"HUN\",\r\n    ID: \"IDN\",\r\n    IE: \"IRL\",\r\n    IL: \"ISR\",\r\n    IM: \"IMN\",\r\n    IN: \"IND\",\r\n    IO: \"IOT\",\r\n    IQ: \"IRQ\",\r\n    IR: \"IRN\",\r\n    IS: \"ISL\",\r\n    IT: \"ITA\",\r\n    JE: \"JEY\",\r\n    JM: \"JAM\",\r\n    JO: \"JOR\",\r\n    JP: \"JPN\",\r\n    KE: \"KEN\",\r\n    KG: \"KGZ\",\r\n    KH: \"KHM\",\r\n    KI: \"KIR\",\r\n    KM: \"COM\",\r\n    KN: \"KNA\",\r\n    KP: \"PRK\",\r\n    KR: \"KOR\",\r\n    KW: \"KWT\",\r\n    KY: \"CYM\",\r\n    KZ: \"KAZ\",\r\n    LA: \"LAO\",\r\n    LB: \"LBN\",\r\n    LC: \"LCA\",\r\n    LI: \"LIE\",\r\n    LK: \"LKA\",\r\n    LR: \"LBR\",\r\n    LS: \"LSO\",\r\n    LT: \"LTU\",\r\n    LU: \"LUX\",\r\n    LV: \"LVA\",\r\n    LY: \"LBY\",\r\n    MA: \"MAR\",\r\n    MC: \"MCO\",\r\n    MD: \"MDA\",\r\n    ME: \"MNE\",\r\n    MG: \"MDG\",\r\n    MH: \"MHL\",\r\n    MK: \"MKD\",\r\n    ML: \"MLI\",\r\n    MM: \"MMR\",\r\n    MN: \"MNG\",\r\n    MO: \"MAC\",\r\n    MP: \"MNP\",\r\n    MQ: \"MTQ\",\r\n    MR: \"MRT\",\r\n    MS: \"MSR\",\r\n    MT: \"MLT\",\r\n    MU: \"MUS\",\r\n    MV: \"MDV\",\r\n    MW: \"MWI\",\r\n    MX: \"MEX\",\r\n    MY: \"MYS\",\r\n    MZ: \"MOZ\",\r\n    NA: \"NAM\",\r\n    NC: \"NCL\",\r\n    NE: \"NER\",\r\n    NF: \"NFK\",\r\n    NG: \"NGA\",\r\n    NI: \"NIC\",\r\n    NL: \"NLD\",\r\n    NO: \"NOR\",\r\n    NP: \"NPL\",\r\n    NR: \"NRU\",\r\n    NU: \"NIU\",\r\n    NZ: \"NZL\",\r\n    OM: \"OMN\",\r\n    PA: \"PAN\",\r\n    PE: \"PER\",\r\n    PF: \"PYF\",\r\n    PG: \"PNG\",\r\n    PH: \"PHL\",\r\n    PK: \"PAK\",\r\n    PL: \"POL\",\r\n    PM: \"SPM\",\r\n    PN: \"PCN\",\r\n    PR: \"PRI\",\r\n    PS: \"PSE\",\r\n    PT: \"PRT\",\r\n    PW: \"PLW\",\r\n    PY: \"PRY\",\r\n    QA: \"QAT\",\r\n    RE: \"REU\",\r\n    RO: \"ROU\",\r\n    RS: \"SRB\",\r\n    RU: \"RUS\",\r\n    RW: \"RWA\",\r\n    SA: \"SAU\",\r\n    SB: \"SLB\",\r\n    SC: \"SYC\",\r\n    SD: \"SDN\",\r\n    SE: \"SWE\",\r\n    SG: \"SGP\",\r\n    SH: \"SHN\",\r\n    SI: \"SVN\",\r\n    SJ: \"SJM\",\r\n    SK: \"SVK\",\r\n    SL: \"SLE\",\r\n    SM: \"SMR\",\r\n    SN: \"SEN\",\r\n    SO: \"SOM\",\r\n    SR: \"SUR\",\r\n    ST: \"STP\",\r\n    SV: \"SLV\",\r\n    SY: \"SYR\",\r\n    SZ: \"SWZ\",\r\n    TC: \"TCA\",\r\n    TD: \"TCD\",\r\n    TF: \"ATF\",\r\n    TG: \"TGO\",\r\n    TH: \"THA\",\r\n    TJ: \"TJK\",\r\n    TK: \"TKL\",\r\n    TL: \"TLS\",\r\n    TM: \"TKM\",\r\n    TN: \"TUN\",\r\n    TO: \"TON\",\r\n    TR: \"TUR\",\r\n    TT: \"TTO\",\r\n    TV: \"TUV\",\r\n    TW: \"TWN\",\r\n    TZ: \"TZA\",\r\n    UA: \"UKR\",\r\n    UG: \"UGA\",\r\n    UM: \"UMI\",\r\n    US: \"USA\",\r\n    UY: \"URY\",\r\n    UZ: \"UZB\",\r\n    VA: \"VAT\",\r\n    VC: \"VCT\",\r\n    VE: \"VEN\",\r\n    VG: \"VGB\",\r\n    VI: \"VIR\",\r\n    VN: \"VNM\",\r\n    VU: \"VUT\",\r\n    WF: \"WLF\",\r\n    WS: \"WSM\",\r\n    YE: \"YEM\",\r\n    YT: \"MYT\",\r\n    ZA: \"ZAF\",\r\n    ZM: \"ZMB\",\r\n    ZW: \"ZWE\",\r\n};\r\n\r\nexport const ISO3_TO_NAME = {\r\n    ABW: \"Aruba\",\r\n    AFG: \"Afghanistan\",\r\n    AGO: \"Angola\",\r\n    AIA: \"Anguilla\",\r\n    ALB: \"Albania\",\r\n    AND: \"Andorra\",\r\n    ANT: \"NetherlandsAntilles\",\r\n    ARE: \"UnitedArabEmirates\",\r\n    ARG: \"Argentina\",\r\n    ARM: \"Armenia\",\r\n    ASM: \"AmericanSamoa\",\r\n    ATA: \"Antarctica\",\r\n    ATF: \"FrenchSouthernTerritories\",\r\n    ATG: \"AntiguaandBarbuda\",\r\n    AUS: \"Australia\",\r\n    AUT: \"Austria\",\r\n    AZE: \"Azerbaijan\",\r\n    BDI: \"Burundi\",\r\n    BEL: \"Belgium\",\r\n    BEN: \"Benin\",\r\n    BFA: \"BurkinaFaso\",\r\n    BGD: \"Bangladesh\",\r\n    BGR: \"Bulgaria\",\r\n    BHR: \"Bahrain\",\r\n    BHS: \"Bahamas\",\r\n    BIH: \"BosniaandHerzegovina\",\r\n    BLR: \"Belarus\",\r\n    BLZ: \"Belize\",\r\n    BMU: \"Bermuda\",\r\n    BOL: \"Bolivia\",\r\n    BRA: \"Brazil\",\r\n    BRB: \"Barbados\",\r\n    BRN: \"Brunei\",\r\n    BTN: \"Bhutan\",\r\n    BVT: \"BouvetIsland\",\r\n    BWA: \"Botswana\",\r\n    CAF: \"CentralAfricanRepublic\",\r\n    CAN: \"Canada\",\r\n    CCK: \"Cocos(Keeling)Islands\",\r\n    CHE: \"Switzerland\",\r\n    CHL: \"Chile\",\r\n    CHN: \"China\",\r\n    CIV: \"IvoryCoast\",\r\n    CMR: \"Cameroon\",\r\n    COD: \"Congo,theDemocraticRepublicofthe\",\r\n    COG: \"Congo\",\r\n    COK: \"CookIslands\",\r\n    COL: \"Colombia\",\r\n    COM: \"Comoros\",\r\n    CPV: \"CapeVerde\",\r\n    CRI: \"CostaRica\",\r\n    CUB: \"Cuba\",\r\n    CXR: \"ChristmasIsland\",\r\n    CYM: \"CaymanIslands\",\r\n    CYP: \"Cyprus\",\r\n    CZE: \"CzechRepublic\",\r\n    DEU: \"Germany\",\r\n    DJI: \"Djibouti\",\r\n    DMA: \"Dominica\",\r\n    DNK: \"Denmark\",\r\n    DOM: \"DominicanRepublic\",\r\n    DZA: \"Algeria\",\r\n    ECU: \"Ecuador\",\r\n    EGY: \"Egypt\",\r\n    ERI: \"Eritrea\",\r\n    ESH: \"WesternSahara\",\r\n    ESP: \"Spain\",\r\n    EST: \"Estonia\",\r\n    ETH: \"Ethiopia\",\r\n    FIN: \"Finland\",\r\n    FJI: \"Fiji\",\r\n    FLK: \"FalklandIslands(Malvinas)\",\r\n    FRA: \"France\",\r\n    FRO: \"FaroeIslands\",\r\n    FSM: \"Micronesia,FederatedStatesof\",\r\n    GAB: \"Gabon\",\r\n    GBR: \"UK\",\r\n    GEO: \"Georgia\",\r\n    GGY: \"Guernsey\",\r\n    GHA: \"Ghana\",\r\n    GIB: \"Gibraltar\",\r\n    GIN: \"Guinea\",\r\n    GLP: \"Guadeloupe\",\r\n    GMB: \"Gambia\",\r\n    GNB: \"Guinea-Bissau\",\r\n    GNQ: \"EquatorialGuinea\",\r\n    GRC: \"Greece\",\r\n    GRD: \"Grenada\",\r\n    GRL: \"Greenland\",\r\n    GTM: \"Guatemala\",\r\n    GUF: \"FrenchGuiana\",\r\n    GUM: \"Guam\",\r\n    GUY: \"Guyana\",\r\n    HKG: \"HongKong\",\r\n    HMD: \"HeardIslandandMcDonaldIslands\",\r\n    HND: \"Honduras\",\r\n    HRV: \"Croatia\",\r\n    HTI: \"Haiti\",\r\n    HUN: \"Hungary\",\r\n    IDN: \"Indonesia\",\r\n    IMN: \"IsleofMan\",\r\n    IND: \"India\",\r\n    IOT: \"BritishIndianOceanTerritory\",\r\n    IRL: \"Ireland\",\r\n    IRN: \"Iran\",\r\n    IRQ: \"Iraq\",\r\n    ISL: \"Iceland\",\r\n    ISR: \"Israel\",\r\n    ITA: \"Italy\",\r\n    JAM: \"Jamaica\",\r\n    JEY: \"Jersey\",\r\n    JOR: \"Jordan\",\r\n    JPN: \"Japan\",\r\n    KAZ: \"Kazakhstan\",\r\n    KEN: \"Kenya\",\r\n    KGZ: \"Kyrgyzstan\",\r\n    KHM: \"Cambodia\",\r\n    KIR: \"Kiribati\",\r\n    KNA: \"SaintKittsandNevis\",\r\n    KOR: \"SouthKorea\",\r\n    KWT: \"Kuwait\",\r\n    LAO: \"Laos\",\r\n    LBN: \"Lebanon\",\r\n    LBR: \"Liberia\",\r\n    LBY: \"Libya\",\r\n    LCA: \"SaintLucia\",\r\n    LIE: \"Liechtenstein\",\r\n    LKA: \"SriLanka\",\r\n    LSO: \"Lesotho\",\r\n    LTU: \"Lithuania\",\r\n    LUX: \"Luxembourg\",\r\n    LVA: \"Latvia\",\r\n    MAC: \"Macao\",\r\n    MAR: \"Morocco\",\r\n    MCO: \"Monaco\",\r\n    MDA: \"Moldova\",\r\n    MDG: \"Madagascar\",\r\n    MDV: \"Maldives\",\r\n    MEX: \"Mexico\",\r\n    MHL: \"MarshallIslands\",\r\n    MKD: \"Macedonia\",\r\n    MLI: \"Mali\",\r\n    MLT: \"Malta\",\r\n    MMR: \"Burma\",\r\n    MNE: \"Montenegro\",\r\n    MNG: \"Mongolia\",\r\n    MNP: \"NorthernMarianaIslands\",\r\n    MOZ: \"Mozambique\",\r\n    MRT: \"Mauritania\",\r\n    MSR: \"Montserrat\",\r\n    MTQ: \"Martinique\",\r\n    MUS: \"Mauritius\",\r\n    MWI: \"Malawi\",\r\n    MYS: \"Malaysia\",\r\n    MYT: \"Mayotte\",\r\n    NAM: \"Namibia\",\r\n    NCL: \"NewCaledonia\",\r\n    NER: \"Niger\",\r\n    NFK: \"NorfolkIsland\",\r\n    NGA: \"Nigeria\",\r\n    NIC: \"Nicaragua\",\r\n    NIU: \"Niue\",\r\n    NLD: \"Netherlands\",\r\n    NOR: \"Norway\",\r\n    NPL: \"Nepal\",\r\n    NRU: \"Nauru\",\r\n    NZL: \"NewZealand\",\r\n    OMN: \"Oman\",\r\n    PAK: \"Pakistan\",\r\n    PAN: \"Panama\",\r\n    PCN: \"Pitcairn\",\r\n    PER: \"Peru\",\r\n    PHL: \"Philippines\",\r\n    PLW: \"Palau\",\r\n    PNG: \"PapuaNewGuinea\",\r\n    POL: \"Poland\",\r\n    PRI: \"PuertoRico\",\r\n    PRK: \"Korea\",\r\n    PRT: \"Portugal\",\r\n    PRY: \"Paraguay\",\r\n    PSE: \"PalestinianTerritory\",\r\n    PYF: \"FrenchPolynesia\",\r\n    QAT: \"Qatar\",\r\n    REU: \"Runion\",\r\n    ROU: \"Romania\",\r\n    RUS: \"Russia\",\r\n    RWA: \"Rwanda\",\r\n    SAU: \"SaudiArabia\",\r\n    SDN: \"Sudan\",\r\n    SEN: \"Senegal\",\r\n    SGP: \"Singapore\",\r\n    SGS: \"SouthGeorgiaandtheSouthSandwichIslands\",\r\n    SHN: \"SaintHelena,AscensionandTristandaCunha\",\r\n    SJM: \"SvalbardandJanMayen\",\r\n    SLB: \"SolomonIslands\",\r\n    SLE: \"SierraLeone\",\r\n    SLV: \"ElSalvador\",\r\n    SMR: \"SanMarino\",\r\n    SOM: \"Somalia\",\r\n    SPM: \"SaintPierreandMiquelon\",\r\n    SRB: \"Serbia\",\r\n    STP: \"SaoTomeandPrincipe\",\r\n    SUR: \"Suriname\",\r\n    SVK: \"Slovakia\",\r\n    SVN: \"Slovenia\",\r\n    SWE: \"Sweden\",\r\n    SWZ: \"Swaziland\",\r\n    SYC: \"Seychelles\",\r\n    SYR: \"SyrianArabRepublic\",\r\n    TCA: \"TurksandCaicosIslands\",\r\n    TCD: \"Chad\",\r\n    TGO: \"Togo\",\r\n    THA: \"Thailand\",\r\n    TJK: \"Tajikistan\",\r\n    TKL: \"Tokelau\",\r\n    TKM: \"Turkmenistan\",\r\n    TLS: \"Timor-Leste\",\r\n    TON: \"Tonga\",\r\n    TTO: \"Trinidad&Tobago\",\r\n    TUN: \"Tunisia\",\r\n    TUR: \"Turkey\",\r\n    TUV: \"Tuvalu\",\r\n    TWN: \"Taiwan\",\r\n    TZA: \"Tanzania\",\r\n    UGA: \"Uganda\",\r\n    UKR: \"Ukraine\",\r\n    UMI: \"UnitedStatesMinorOutlyingIslands\",\r\n    URY: \"Uruguay\",\r\n    USA: \"UnitedStates\",\r\n    UZB: \"Uzbekistan\",\r\n    VAT: \"holy-see\",\r\n    VCT: \"St.VincentandtheGrenadines\",\r\n    VEN: \"Venezuela\",\r\n    VGB: \"VirginIslands,British\",\r\n    VIR: \"VirginIslands,U.S.\",\r\n    VNM: \"Vietnam\",\r\n    VUT: \"Vanuatu\",\r\n    WLF: \"WallisandFutuna\",\r\n    WSM: \"Samoa\",\r\n    YEM: \"Yemen\",\r\n    ZAF: \"SouthAfrica\",\r\n    ZMB: \"Zambia\",\r\n    ZWE: \"Zimbabwe\"\r\n};","// https://jonisalonen.com/2014/computing-distance-between-coordinates-can-be-simple-and-fast/\r\n\r\nconst deglen2 = 110.25 * 110.25;\r\n\r\nexport function distance2(lat, lon, lat0, lon0) {\r\n    const x = lat - lat0;\r\n    const y = (lon - lon0) * Math.cos(lat0);\r\n    return deglen2 * (x*x + y*y);\r\n}\r\n\r\nexport function distance(lat, lon, lat0, lon0) {\r\n    const x = lat - lat0;\r\n    const y = lon - lon0;\r\n    return x*x + y*y;\r\n}\r\n\r\n// https://stackoverflow.com/questions/3518504/regular-expression-for-matching-latitude-longitude-coordinates\r\n\r\n// eslint-disable-next-line\r\nexport const LATLON_PATTERN = '^[-+]?([1-8]?\\d(\\.\\d+)?|90(\\.0+)?)\\s*,\\s*[-+]?(180(\\.0+)?|((1[0-7]\\d)|([1-9]?\\d))(\\.\\d+)?)$';\r\n\r\n\r\nexport function point({ lat, lon }) {\r\n    return {\r\n        type: \"Point\",\r\n        coordinates: [lon, lat]\r\n    };\r\n}","\r\nfunction toArray(x, keep) {\r\n    return keep ? x : [x];\r\n}\r\n\r\nfunction chainSingle(getPromise, promiseCount, spread=false) {\r\n    return [...Array(promiseCount).keys()].reduce((acc, index) => (\r\n        acc.then(responses => getPromise(index).then(response => [...responses, ...toArray(response, spread)]))\r\n    ), Promise.resolve([]));\r\n}\r\n\r\nfunction allPromise(getPromise, promiseCount, concurrentCount, index) {\r\n    const start = index * concurrentCount;\r\n    const end = Math.min(start + concurrentCount, promiseCount);\r\n\r\n    return Promise.all([...Array(end - start).keys()].map((i) => (getPromise(start + i))));\r\n}\r\n\r\n// chain with possibility to group into concurrent tasks by concurrentCount > 1\r\nexport function chain(getPromise, promiseCount, concurrentCount=1) {\r\n    if (concurrentCount === 1) {\r\n        return chainSingle(getPromise, promiseCount);\r\n    }\r\n\r\n    return chainSingle(\r\n        (index) => (allPromise(getPromise, promiseCount, concurrentCount, index)),\r\n        Math.ceil(promiseCount / concurrentCount),\r\n        true\r\n    );\r\n}\r\n\r\n// THIS IS GOOD, but without concurrency\r\n/*\r\nexport function chain(getPromise, promiseCount) {\r\n    return [...Array(promiseCount).keys()].reduce((acc, index) => (\r\n        acc.then(responses => getPromise(index).then(response => [...responses, response]))\r\n    ), Promise.resolve([]));\r\n}\r\n*/\r\n\r\n// THIS IS WRONG!!! Just an implementation of Promise.all,\r\n// promises get to be executed immediately after creation!\r\n\r\n// https://decembersoft.com/posts/promises-in-serial-with-array-reduce/\r\n\r\n/*\r\nexport function chain(promises) {\r\n    return promises.reduce((acc, promise) => (\r\n        acc.then(responses => promise.then(response => [...responses, response]))\r\n    ), Promise.resolve([]));\r\n}\r\n*/","export const provinceNames = {\r\n    AL: 'Alabama',\r\n    AK: 'Alaska',\r\n    AS: 'American Samoa',\r\n    AZ: 'Arizona',\r\n    AR: 'Arkansas',\r\n    CA: 'California',\r\n    CO: 'Colorado',\r\n    CT: 'Connecticut',\r\n    DE: 'Delaware',\r\n    DC: 'District of Columbia',\r\n    FM: 'Federated States of Micronesia',\r\n    FL: 'Florida',\r\n    GA: 'Georgia',\r\n    GU: 'Guam',\r\n    HI: 'Hawaii',\r\n    ID: 'Idaho',\r\n    IL: 'Illinois',\r\n    IN: 'Indiana',\r\n    IA: 'Iowa',\r\n    KS: 'Kansas',\r\n    KY: 'Kentucky',\r\n    LA: 'Louisiana',\r\n    ME: 'Maine',\r\n    MH: 'Marshall Islands',\r\n    MD: 'Maryland',\r\n    MA: 'Massachusetts',\r\n    MI: 'Michigan',\r\n    MN: 'Minnesota',\r\n    MS: 'Mississippi',\r\n    MO: 'Missouri',\r\n    MT: 'Montana',\r\n    NE: 'Nebraska',\r\n    NV: 'Nevada',\r\n    NH: 'New Hampshire',\r\n    NJ: 'New Jersey',\r\n    NM: 'New Mexico',\r\n    NY: 'New York',\r\n    NC: 'North Carolina',\r\n    ND: 'North Dakota',\r\n    MP: 'Northern Mariana Islands',\r\n    OH: 'Ohio',\r\n    OK: 'Oklahoma',\r\n    OR: 'Oregon',\r\n    PW: 'Palau',\r\n    PA: 'Pennsylvania',\r\n    PR: 'Puerto Rico',\r\n    RI: 'Rhode Island',\r\n    SC: 'South Carolina',\r\n    SD: 'South Dakota',\r\n    TN: 'Tennessee',\r\n    TX: 'Texas',\r\n    UT: 'Utah',\r\n    VT: 'Vermont',\r\n    VI: 'Virgin Islands',\r\n    VA: 'Virginia',\r\n    WA: 'Washington',\r\n    WV: 'West Virginia',\r\n    WI: 'Wisconsin',\r\n    WY: 'Wyoming',\r\n    AE: 'Armed Forces Africa',\r\n    AA: 'Armed Forces Americas (except Canada)',\r\n    AE: 'Armed Forces Canada',\r\n    AP: 'Armed Forces Pacific'\r\n};","import { ISO_2_TO_3 } from '../util/countries';\r\nimport { distance } from '../util/geo';\r\nimport { datesInRange, dateString, dateMillis } from '../util/date';\r\nimport { chain } from '../util/promise';\r\nimport { provinceNames } from '../util/usa';\r\n\r\nlet cache = {\r\n    virusSpreadCountriesTimeline: null\r\n};\r\n\r\nconst identity = (data) => (data);\r\n\r\nconst transformVirusSpreadCountriesTimeline = (response) => {\r\n    let countries = response.data;\r\n    countries.forEach((country) => {\r\n        country.iso3 = ISO_2_TO_3[country.code];\r\n        country.timelineMap = {};\r\n        country.timeline.forEach((day) => {\r\n            country.timelineMap[dateMillis(day.date)] = day;\r\n        });\r\n    });\r\n    return countries;\r\n};\r\n\r\nfunction getFetched(url, key, transform = identity) {\r\n    if (cache[key]) {\r\n        return Promise.resolve(cache[key]);\r\n    }\r\n    return fetch(url).then((response) => (response.json())).then((data) => {\r\n        cache[key] = transform(data);\r\n        return cache[key];\r\n    }).catch((error) => {\r\n        console.error(error);\r\n        throw error;\r\n    });\r\n}\r\n\r\nfunction nearestCountry(location, countries) {\r\n    let minDist = Number.POSITIVE_INFINITY;\r\n    let res = null;\r\n\r\n    countries.forEach((country) => {\r\n        const dist = distance(location.lat, location.lng, country.coordinates.latitude, country.coordinates.longitude);\r\n        if (dist < minDist) {\r\n            minDist = dist;\r\n            res = country;\r\n        }\r\n    });\r\n\r\n    return res;\r\n}\r\n\r\nfunction nearestProvince(location, provinces) {\r\n    let minDist = Number.POSITIVE_INFINITY;\r\n    let res = null;\r\n\r\n    provinces.forEach((province) => {\r\n        const dist = distance(location.lat, location.lng, province.lat, province.lng);\r\n        if (dist < minDist) {\r\n            minDist = dist;\r\n            res = province;\r\n        }\r\n    });\r\n\r\n    return res;\r\n}\r\n\r\nfunction largerProvince(province, provinces) {\r\n    if (province.iso3 !== 'USA' || province.name.length < 2) {\r\n        return null;\r\n    }\r\n    const code = province.name.substring(province.name.length - 2);\r\n    const name = provinceNames[code];\r\n    return provinces.find((p) => (p.name === name));\r\n}\r\n\r\nfunction fetchCountryCode(location) {\r\n    return fetch(`${process.env.REACT_APP_GEONAMES_COUNTRY_URL}?username=${process.env.REACT_APP_GEONAMES_USERNAME}` +\r\n                 `&lat=${location.lat}&lng=${location.lng}`)\r\n            .then((response) => (response.text()))\r\n            .then((text) => (text.trim()));\r\n}\r\n\r\nfunction fetchProvinces(iso3) {\r\n    return fetch(process.env.REACT_APP_VIRUS_PROVINCES_URL + '/' + iso3)\r\n        .then((response) => (response.json()))\r\n        .then((response) => (response.data))\r\n        .then((provinces) => (provinces.filter((province) => (province.lat !== null && province.long !== null))))\r\n        .then((provinces) => (provinces.map((province) => ({\r\n            iso3: province.iso,\r\n            name: province.province,\r\n            lat: province.lat,\r\n            lng: province.long\r\n        }))));\r\n}\r\n\r\nconst virusSpreadForCountry = (country, dateRange) => {\r\n    const startMillis = dateMillis(dateRange.startDate);\r\n    const endMillis = dateMillis(dateRange.endDate);\r\n    const timelineMap =  Object.keys(country.timelineMap).reduce((acc, millis) => {\r\n        if (startMillis <= millis && millis <= endMillis) {\r\n            const item = country.timelineMap[millis];\r\n            acc[millis] = {\r\n                confirmed: item.confirmed,\r\n                new_confirmed: item.new_confirmed\r\n            };\r\n        }\r\n        return acc;\r\n    }, {});\r\n    //console.log('VIRUS SPREAD FOR COUNTRY: ' + country.name, timelineMap);\r\n\r\n    return timelineMap;\r\n};\r\n\r\nfunction fetchVirusSpreadForProvince(province, dateRange, city) {\r\n    const dates = datesInRange(dateRange);\r\n\r\n    const getVirusSpreadPromise = (index) => {\r\n        const date = dates[index];\r\n\r\n        const provinceQueryParam = (province.iso3 === 'USA') ? 'q' : 'region_province';\r\n\r\n        return fetch(process.env.REACT_APP_VIRUS_BY_PROVINCE_BY_DATE + `?` +\r\n                `date=${dateString(date)}` + `&` +\r\n                `iso=${province.iso3}` + `&` +\r\n                `${provinceQueryParam}=${province.name}` +\r\n                (city ? `&city_name=${city.name}` : ``))\r\n            .then((response) => (response.json()))\r\n            .then((response) => (response.data[0]))\r\n            .then((data) => (city ? data.region.cities[0] : data))\r\n            .then((data) => ({\r\n                millis: date,\r\n                confirmed: data && data.confirmed ? Math.max(data.confirmed, 1) : null,\r\n                new_confirmed: data ? data.confirmed_diff : 0\r\n            }))\r\n            .catch((error) => {\r\n                console.error(error);\r\n                return {\r\n                    millis: date,\r\n                    confirmed: null,\r\n                    new_confirmed: 0\r\n                };\r\n            });\r\n    };\r\n\r\n    const getErrorCount = (data) => {\r\n        let started = false;\r\n        const count = data.reduce((acc, item) => {\r\n            if (started) {\r\n                if (item.confirmed === null) {\r\n                    acc++;\r\n                }\r\n            } else {\r\n                if (item.confirmed !== null) {\r\n                    started = true;\r\n                }\r\n            }\r\n            return acc;\r\n        }, 0);\r\n        return started ? count : data.length;\r\n    };\r\n\r\n    return chain(getVirusSpreadPromise, dates.length, 5)\r\n        .then((data) => {\r\n            const errorCount = getErrorCount(data);\r\n            if (errorCount / data.length > process.env.REACT_APP_MAX_VIRUS_DATA_ERROR_PERCENT / 100) {\r\n                console.log('-> Province: ' + province.name +\r\n                    (city ? ', City: ' + city.name : '') +\r\n                    ': MAX ERROR PERCENT EXCEEDED',\r\n                    100 * errorCount / data.length);\r\n                return null;\r\n            }\r\n            for (let i = 1; i < data.length; ++i) {\r\n                if (data[i].confirmed === null) {\r\n                    data[i].confirmed = data[i - 1].confirmed;\r\n                }\r\n            }\r\n            return data;\r\n        })\r\n        .then((data) => (\r\n            data ? data.reduce((acc, item) => {\r\n                acc[item.millis] = {\r\n                    confirmed: item.confirmed,\r\n                    new_confirmed: item.new_confirmed\r\n                };\r\n                return acc;\r\n            }, {}) : null\r\n        ));\r\n}\r\n\r\nfunction fetchCity(location, province, dateRange) {\r\n    return fetch(process.env.REACT_APP_VIRUS_BY_PROVINCE_BY_DATE + `?` +\r\n                `date=${dateRange.startDate}` + `&` +\r\n                `iso=${province.iso3}` + `&` +\r\n                `q=${province.name}`)\r\n            .then((response) => (response.json()))\r\n            .then((response) => (response.data))\r\n            .then((data) => {\r\n                //console.log('fetchCity data', data);\r\n                const cities = data.reduce((acc, region) => {\r\n                    const regionCities = region.region.cities.map((city) => ({\r\n                        name: city.name,\r\n                        lat: city.lat,\r\n                        lng: city.long\r\n                    }));\r\n                    return [...acc, ...regionCities];\r\n                }, []);\r\n\r\n                return nearestProvince(location, cities);\r\n            });\r\n}\r\n\r\nfunction fetchVirusSpread(location, dateRange) {\r\n\r\n    const getResult = (timelineMap, country, province, city) => ({\r\n        country: country.name,\r\n        population: (!timelineMap ? country.population : null),\r\n        province: (timelineMap && province ? province.name : null),\r\n        city: (timelineMap && city ? city.name : null),\r\n        timelineMap: (timelineMap ? timelineMap : virusSpreadForCountry(country, dateRange))\r\n    });\r\n\r\n    const fetchVirusSpreadResult = (country, province, dateRange, city, countryDefault) => (\r\n        fetchVirusSpreadForProvince(province, dateRange, city).then((timelineMap) => {\r\n            return timelineMap || !city ? \r\n                (timelineMap || countryDefault ?\r\n                    getResult(timelineMap, country, province, city) :\r\n                    null) :\r\n                fetchVirusSpreadResult(country, province, dateRange, null, countryDefault) // only province without city\r\n        })\r\n    );\r\n\r\n    return getFetched(process.env.REACT_APP_VIRUS_MAIN_URL, 'virusSpreadCountriesTimeline', transformVirusSpreadCountriesTimeline)\r\n        .then((countries) => {\r\n            return fetchCountryCode(location, countries)\r\n                .then((code) => {\r\n                    const country = countries.find((c) => (c.code === code));\r\n                    if (!country) {\r\n                        throw \"country with code: \" + code + \" not found\";\r\n                    }\r\n                    return country;\r\n                })\r\n                .catch((error) => {\r\n                    console.error(error);\r\n                    console.log('country code error, taking closest country', error);\r\n                    return nearestCountry(location, countries);\r\n                })\r\n                .then((country) => {\r\n\r\n                    //console.log('country data', country);\r\n\r\n                    return fetchProvinces(country.iso3).then((provinces) => {\r\n                        //console.log('provinces', provinces);\r\n\r\n                        // hack for London -> Channel Islands\r\n                        if (country.iso3 === 'GBR') {\r\n                            provinces = provinces.filter((p) => (p.name !== \"Channel Islands\" && p.name !== \"Isle of Man\"));\r\n                        }\r\n\r\n                        if (provinces.length <= 1) {\r\n                            return getResult(null, country);\r\n                        } else {\r\n                            let province = nearestProvince(location, provinces);\r\n                            //console.log('province', province);\r\n                            return (country.iso3 === 'USA') ?\r\n                                fetchCity(location, province, dateRange).then((city) => (\r\n                                    fetchVirusSpreadResult(country, province, dateRange, city).then((result) => {\r\n                                        if (result) {\r\n                                            return result;\r\n                                        } else {\r\n                                            // second trial with larger province\r\n                                            province = largerProvince(province, provinces);\r\n                                            //console.log('larger province', province);\r\n                                            if (province) {\r\n                                                return fetchCity(location, province, dateRange).then((city) => (\r\n                                                    fetchVirusSpreadResult(country, province, dateRange, city, true)\r\n                                                ));\r\n                                            } else {\r\n                                                return getResult(null, country);\r\n                                            }\r\n                                        }\r\n                                    })\r\n                                ))\r\n                            :\r\n                                fetchVirusSpreadResult(country, province, dateRange).then((result) => {\r\n                                    if (result) {\r\n                                        return result;\r\n                                    } else {\r\n                                        // second trial with second nearest province\r\n                                        province = nearestProvince(location, provinces.filter((p) => (p !== province)));\r\n                                        //console.log('second province', province);\r\n                                        return fetchVirusSpreadResult(country, province, dateRange, null, true);\r\n                                    }\r\n                                });\r\n                        }\r\n                    });\r\n                });\r\n        });\r\n}\r\n\r\nexport default fetchVirusSpread;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Badge } from 'reactstrap';\r\n\r\nimport './LocationVirusInfo.css';\r\n\r\nfunction formatPopulation(population) {\r\n    return population ? population.toLocaleString() : null;\r\n}\r\n\r\nconst DataBadge = ({ color, data }) => data ? (\r\n    <h3><Badge color={color}>{data}</Badge></h3>\r\n) : null;\r\n\r\nconst LocationVirusInfo = ({ country, province, city, population }) => (\r\n    <div className=\"__LocationVirusInfo__\">\r\n        <div className=\"label\">Virus data for</div>\r\n        <div className=\"data country\"><DataBadge color=\"secondary\" data={country} /></div>\r\n        <div className=\"data province\"><DataBadge color=\"info\" data={province} /></div>\r\n        <div className=\"data city\"><DataBadge color=\"danger\" data={city} /></div>\r\n        <div className=\"label\">{population ? 'Population:' : null}</div>\r\n        <div className=\"data population\">{formatPopulation(population)}</div>\r\n    </div>\r\n);\r\n\r\nLocationVirusInfo.propTypes = {\r\n    country: PropTypes.string.isRequired,\r\n    province: PropTypes.string,\r\n    city: PropTypes.string,\r\n    population: PropTypes.number\r\n};\r\n\r\nexport default LocationVirusInfo;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport './ExternalVirusInfo.css';\r\n\r\nconst COUNTRY_MAP = {\r\n    Czechia: 'czech-republic',\r\n    'S. Korea': 'south-korea',\r\n    USA: 'US'\r\n};\r\n\r\nconst PROVINCE_MAP = {\r\n    'New York City, NY': 'new-york'\r\n};\r\n\r\nfunction countryMap(country) {\r\n    return COUNTRY_MAP[country] ? COUNTRY_MAP[country] : country;\r\n}\r\n\r\nfunction provinceMap(province) {\r\n    return PROVINCE_MAP[province] ? PROVINCE_MAP[province] : province;\r\n}\r\n\r\nconst ExternalVirusInfo = ({ country, province }) => (\r\n    <div className=\"__CountryVirusInfo__\">\r\n        <a href={country === 'USA' && province ?\r\n            process.env.REACT_APP_VIRUS_USA_REFERENCE_BASE_URL+'/'+provinceMap(province) :\r\n            process.env.REACT_APP_VIRUS_COUNTRY_REFERENCE_BASE_URL+'/'+countryMap(country)}\r\n            target=\"_blank\" rel=\"noopener noreferrer\"\r\n        >\r\n            {country === 'USA' && province ? province : country} virus data\r\n        </a>\r\n    </div>\r\n);\r\n\r\nExternalVirusInfo.propTypes = {\r\n    country: PropTypes.string.isRequired,\r\n    province: PropTypes.string\r\n};\r\n\r\nexport default ExternalVirusInfo;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Button, Popover, PopoverBody, Card, CardBody } from 'reactstrap';\r\n\r\nimport './References.css';\r\n\r\nfunction preventEventPropagation(e) {\r\n    e.stopPropagation();\r\n}\r\n\r\nconst References = ({ close }) => {\r\n\r\n    const [ popoverOpen, setPopoverOpen ] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setPopoverOpen(false);\r\n    }, [ close ]);\r\n\r\n    const handleTogglePopover = () => {\r\n        setPopoverOpen((open) => (!open));\r\n    };\r\n\r\n    return (\r\n        <div className=\"__References__\">\r\n            <div className=\"references\" id=\"references\"><Button color=\"link\">References</Button></div>\r\n            <Popover placement=\"top\" isOpen={popoverOpen} target=\"references\" toggle={handleTogglePopover}>\r\n                <PopoverBody onClick={preventEventPropagation}>\r\n                    <Card>\r\n                        <CardBody className=\"references-popup\">\r\n                            <h3>Virus data</h3>\r\n                            <ul>\r\n                                <li>Data per country:<br/><a href=\"https://about-corona.net/documentation\" target=\"_blank\" rel=\"noopener noreferrer\">corona-api</a></li>\r\n                                <li>Data per province / USA city:<br/><a href=\"https://covid-api.com/api\" target=\"_blank\" rel=\"noopener noreferrer\">covid-api</a></li>\r\n                            </ul> \r\n                            <h3>Meteorological approximations (with / without visibility)</h3>\r\n                            <a href={process.env.REACT_APP_METEO_ARTICLE_URL} target=\"_blank\" rel=\"noopener noreferrer\">Roles of meteorological conditions in COVID-19 transmission on a worldwide scale</a>\r\n                        </CardBody>\r\n                    </Card>\r\n                </PopoverBody>\r\n            </Popover>\r\n        </div>\r\n    );\r\n};\r\n\r\nReferences.propTypes = {\r\n    close: PropTypes.number // forced closing popup upon change\r\n};\r\n\r\nexport default References;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport * as am4core from \"@amcharts/amcharts4/core\";\r\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\r\n//import theme from \"@amcharts/amcharts4/themes/animated\";\r\n\r\nimport { createCertain, configCalcCharts } from '../chart/configChart';\r\nimport { resetCalcChart } from '../chart/manageChart';\r\n\r\nimport fetchVirusSpread from '../api/fetchVirusSpread';\r\nimport { DAY } from '../util/date';\r\n\r\nimport LocationVirusInfo from './info/LocationVirusInfo';\r\nimport ExternalVirusInfo from './info/ExternalVirusInfo';\r\nimport References from './info/References';\r\n\r\nimport Loader from './Loader';\r\n\r\nimport './Chart.css';\r\n\r\n//am4core.useTheme(theme);\r\n\r\n// https://www.medrxiv.org/content/10.1101/2020.03.16.20037168v1.full.pdf\r\n\r\nconst MILE = 1.60934;\r\n\r\nconst START_CHARTS = {\r\n    estimate: {\r\n        chart: null,\r\n        certain: null\r\n    },\r\n    virus: {\r\n        chart: null,\r\n        certain: null\r\n    }\r\n};\r\n\r\nlet charts = START_CHARTS;\r\n\r\nfunction initCharts() {\r\n    charts = {...START_CHARTS};\r\n    charts.virus.chart = am4core.create(\"virusChart\", am4charts.XYChart);\r\n    charts.virus.certain = createCertain(charts.virus.chart);\r\n    charts.estimate.chart = am4core.create(\"estimateChart\", am4charts.XYChart);\r\n    charts.estimate.certain = createCertain(charts.estimate.chart);\r\n\r\n    configCalcCharts(charts.virus.chart, charts.estimate.chart);\r\n\r\n}\r\n\r\nfunction disposeChart(chart) {\r\n    if (chart) {\r\n        chart.dispose();\r\n    }\r\n}\r\n\r\nwindow.onbeforeunload = function(event) {\r\n    disposeChart(charts.estimate.chart);\r\n    disposeChart(charts.virus.chart);\r\n    charts = START_CHARTS;\r\n};\r\n\r\n// case counts with visibility =\r\n// - 0.1366*T^2 + 3.6046*T\r\n// - 0.3883*SPD^2 + 20.2509*SPD\r\n// + 5929.9403/(VSB+19.1774)\r\n// - 505.8484*RH^3 + 316.6004*RH^2 + 189.1295*RH\r\n// - 422.3774\r\n// (SPD: wind speed in miles/h, VSB: visibility in miles, RH: rel humidity in %, T: temperature in Celsius)\r\nconst calc1 = ({ temp, wind, vis, rh }) => (\r\n    - 0.1366 * temp * temp + 3.6046 * temp\r\n    - 0.3883 * wind * wind + 20.2509 * wind\r\n    + 5929.9403 / (vis + 19.1774)\r\n    - 505.8484 * rh * rh * rh + 316.6004 * rh * rh + 189.1295 * rh\r\n    - 422.3774\r\n);\r\n\r\n// case counts without visibility =\r\n// - 0.18*T^2 + 3.1628*T\r\n// - 0.4385*SPD^2 + 21.1420*SPD\r\n// - 228.4231*RH^3 - 391.9561*RH^2 + 880.7190*RH\r\n// - 401.8395\r\n// (SPD: wind speed in miles/h, RH: rel humidity in %, T: temperature in Celsius)\r\nconst calc2 = ({ temp, wind, rh }) => (\r\n    - 0.18 * temp * temp + 3.1628 * temp\r\n    - 0.4385 * wind * wind + 21.1420 * wind\r\n    - 228.4231 * rh * rh * rh - 391.9561 * rh * rh + 880.7190 * rh\r\n    - 401.8395\r\n);\r\n\r\nconst calcRH = (d, t) => {\r\n    const b = t < 0 ? Math.E : 10;\r\n    return Math.pow(b, (7.5 * d) / (237.3 + d) - (7.5 * t) / (237.3 + t));\r\n};\r\n\r\nconst avg = (arr) => (arr.reduce((a, b) => (a + b), 0) / arr.length);\r\n\r\nconst fieldAvg = (arr, field) => (arr.reduce((a, b) => (a + b[field]), 0) / arr.length);\r\n\r\nfunction getRandomInt(max) {\r\n    return Math.floor(Math.random() * Math.floor(max));\r\n}\r\n\r\nconst CalcChart = ({ weatherData, location, dateRange, reset }) => {\r\n    const [ clicks, setClicks ] = useState(0);\r\n\r\n    const [ locationVirusInfo, setLocationVirusInfo ] = useState(null);\r\n\r\n    useEffect(() => {\r\n        incClicks();\r\n    }, [ reset ]);\r\n\r\n    useEffect(() => {\r\n\r\n        initCharts();\r\n\r\n        charts.virus.chart.events.on(\"datavalidated\", function () {\r\n            if (charts === START_CHARTS) {\r\n                return;\r\n            }\r\n\r\n            charts.virus.certain.hide();\r\n            charts.estimate.certain.hide();\r\n        });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!weatherData) {\r\n            setLocationVirusInfo(null);\r\n            charts.virus.certain.show();\r\n            charts.estimate.certain.show();\r\n            return;\r\n        }\r\n\r\n        // console.log('location: [' + location.lat + ', ' + location.lng + '], dateRange: ' + dateRange.startDate + ' - ' + dateRange.endDate);\r\n\r\n        setLocationVirusInfo(null);\r\n        charts.virus.certain.show();\r\n        charts.estimate.certain.show();\r\n\r\n        fetchVirusDataWithEstimates().then(({ data, country, province, city, population }) => {\r\n            if (charts === START_CHARTS) {\r\n                return;\r\n            }\r\n\r\n            const delta = getRandomInt(12) + 1;\r\n            resetCalcChart(charts.estimate.chart, dateRange, delta);\r\n            resetCalcChart(charts.virus.chart, dateRange, delta);\r\n\r\n            charts.virus.chart.data = data;\r\n            charts.estimate.chart.data = data;\r\n            setLocationVirusInfo({ country, province, city, population });\r\n        }).catch((error) => {\r\n            if (charts === START_CHARTS) {\r\n                return;\r\n            }\r\n\r\n            resetCalcChart(charts.virus.chart, dateRange);\r\n            resetCalcChart(charts.estimate.chart, dateRange);\r\n\r\n            charts.virus.chart.data = [];\r\n            charts.estimate.chart.data = [];\r\n\r\n            console.error(error);\r\n            const errorJson = JSON.stringify(error);\r\n            if (errorJson !== '{}') {\r\n                alert(errorJson);\r\n            } else {\r\n                alert('ERROR: see console for details.')\r\n            }\r\n        }).finally(() => {\r\n            charts.virus.chart.invalidateData();\r\n            charts.estimate.chart.invalidateData();\r\n        });\r\n\r\n    }, [ weatherData ]);\r\n\r\n    const fetchVirusDataWithEstimates = () => {\r\n\r\n        return fetchVirusSpread(location, dateRange).then((locationData) => {\r\n            let data = [];\r\n            let lastDayItem = null;\r\n\r\n            weatherData.forEach((hour) => {\r\n                const hourData = {\r\n                    temp: hour.tempC,\r\n                    wind: hour.windspeedKmph / MILE,\r\n                    vis: hour.visibility / MILE,\r\n                    dewpoint: hour.DewPointC,\r\n                    humidity: hour.Humidity / 100\r\n                };\r\n                hourData.rh = hourData.humidity; //calcRH(hourData.dewpoint, hourData.temp);\r\n                let item = {\r\n                    date: hour.date,\r\n                    calc1: calc1(hourData),\r\n                    calc2: calc2(hourData),\r\n                    measure: hourData.dewpoint - hourData.temp,\r\n                    Humidity: hour.Humidity,\r\n                    cloudcover: hour.cloudcover,\r\n                }\r\n                const virusDay = locationData.timelineMap[item.date];\r\n                if (virusDay) {\r\n                    item.confirmed = virusDay.confirmed;\r\n                    item.new_confirmed = virusDay.new_confirmed;\r\n\r\n                    lastDayItem = item;\r\n                } else {\r\n                    if (lastDayItem) {\r\n                        item.confirmed = lastDayItem.confirmed;\r\n                        item.new_confirmed = (item.date - lastDayItem.date < DAY) ?\r\n                            lastDayItem.new_confirmed : 0;\r\n                    } else {\r\n                        item.confirmed = null;\r\n                        item.new_confirmed = 0;\r\n                    }\r\n                }\r\n                data.push(item);\r\n            });\r\n\r\n            return {\r\n                country: locationData.country,\r\n                province: locationData.province,\r\n                city: locationData.city,\r\n                population: locationData.population,\r\n                data\r\n            };\r\n        });\r\n    };\r\n\r\n    const calcDataPerDay = () => {\r\n\r\n        let data = [];\r\n\r\n        for (let i=0; i < weatherData.length; i += 8) {\r\n            const weatherDay = weatherData.slice(i, i + 8);\r\n            const day = {\r\n                temp: fieldAvg(weatherDay, 'tempC'),\r\n                wind: fieldAvg(weatherDay, 'windspeedKmph') / MILE,\r\n                vis: fieldAvg(weatherDay, 'visibility') / MILE,\r\n                dewpoint: fieldAvg(weatherDay, 'DewPointC'),\r\n                humidity: fieldAvg(weatherDay, 'Humidity') / 100\r\n            };\r\n            day.rh = calcRH(day.dewpoint, day.temp);\r\n            // console.log(day);\r\n            let item = {\r\n                date: weatherDay[0].date,\r\n                calc1: calc1(day),\r\n                calc2: calc2(day),\r\n                measure: day.dewpoint - day.temp,\r\n                Humidity: day.humidity * 100\r\n            }\r\n            data.push(item)\r\n        }\r\n\r\n        return data;\r\n    };\r\n\r\n    const incClicks = () => {\r\n        setClicks((c) => (c + 1));\r\n    };\r\n\r\n    return (\r\n        <div className=\"__Chart__\" onClick={incClicks}>\r\n            <Loader loading={!locationVirusInfo} />\r\n            <div className=\"chart\">\r\n                <div className=\"calc-top-chart\">\r\n                    <div id=\"topLegend\" className=\"top-legend\"></div>\r\n                    <div id=\"virusChart\" className=\"top-chart\"></div>\r\n                </div>\r\n                <div className=\"calc-bottom-chart\">\r\n                    <div id=\"estimateChart\" className=\"bottom-chart\"></div>\r\n                    <div id=\"bottomLegend\" className=\"bottom-legend\"></div>\r\n                </div>\r\n            </div>\r\n            {locationVirusInfo ? (\r\n                <LocationVirusInfo {...locationVirusInfo} />\r\n            ) : null}\r\n            {locationVirusInfo ? (\r\n                <ExternalVirusInfo {...locationVirusInfo} />\r\n            ) : null}\r\n            <References close={clicks} />\r\n        </div>\r\n    );\r\n};\r\n\r\nCalcChart.propTypes = {\r\n    weatherData: PropTypes.array,\r\n    location: PropTypes.shape({\r\n        lat: PropTypes.string.isRequired,\r\n        lng: PropTypes.string.isRequired\r\n    }).isRequired,\r\n    dateRange: PropTypes.shape({\r\n        startDate: PropTypes.string.isRequired, // 'yyyy-MM-dd'\r\n        endDate: PropTypes.string.isRequired    // 'yyyy-MM-dd'\r\n    }).isRequired,\r\n    reset: PropTypes.bool\r\n};\r\n\r\nexport default CalcChart;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Redirect } from 'react-router-dom';\r\nimport { TabContent, TabPane, Nav, NavItem, NavLink, Button } from 'reactstrap';\r\n\r\nimport { format } from 'date-fns';\r\n\r\nimport DataChart from './DataChart';\r\nimport CalcChart from './CalcChart';\r\nimport './Weather.css';\r\n\r\nconst displayedDate = (str) => (format(new Date(str), 'MMM d'));\r\n\r\nconst Weather = ({ location, dateRange, name }) => {\r\n\r\n    const [ parameters, setParameters ] = useState(false);\r\n\r\n    const [ data, setData ] = useState(null);\r\n    const [ activeTab, setActiveTab ] = useState('1');\r\n    const [ activateCalc, setActivateCalc ] = useState(false);\r\n\r\n    const toggle = (tab) => {\r\n        if (activeTab !== tab) {\r\n            setActiveTab(tab);\r\n            if (!activateCalc) {\r\n                setActivateCalc(true);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        setParameters(false);\r\n    });\r\n\r\n    useEffect(() => {\r\n        setData(null);\r\n        setActiveTab('1');\r\n        setActivateCalc(false);\r\n    }, [ location.lat, location.lng, dateRange.startDate, dateRange.endDate, name ]);\r\n\r\n    const handleParameters = () => {\r\n        setParameters(true);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            { parameters ? \r\n                <Redirect to={'/parameters?' + \r\n                    `lat=${location.lat}` + '&' +\r\n                    `lng=${location.lng}` + '&' +\r\n                    `name=${name}` + '&' +\r\n                    `startDate=${dateRange.startDate}` + '&' +\r\n                    `endDate=${dateRange.endDate}`}\r\n                /> : null }\r\n            <div className=\"__Weather__\">\r\n                <div className=\"weather-info\">\r\n                    <Nav tabs>\r\n                        <NavItem>\r\n                            <NavLink\r\n                                className={activeTab === '1' ? 'active' : ''}\r\n                                onClick={() => { toggle('1'); }}\r\n                                disabled={data === null}\r\n                            >\r\n                                Data\r\n                            </NavLink>\r\n                        </NavItem>\r\n                        <NavItem>\r\n                            <NavLink\r\n                                className={activeTab === '2' ? 'active' : ''}\r\n                                onClick={() => { toggle('2'); }}\r\n                                disabled={data === null}\r\n                            >\r\n                                Calc\r\n                            </NavLink>\r\n                        </NavItem>\r\n                    </Nav>\r\n                    <h5 className=\"name\" title={name}>{name}</h5>\r\n                    <h5 className=\"date-range\">{displayedDate(dateRange.startDate) + ' - ' + displayedDate(dateRange.endDate)}</h5>\r\n                    <Button color=\"primary\" type=\"button\" onClick={handleParameters} className=\"button\">Parameters</Button>\r\n                </div>\r\n                <TabContent activeTab={activeTab}>\r\n                    <TabPane tabId=\"1\">\r\n                        <DataChart location={location} dateRange={dateRange} onDataLoaded={setData} />\r\n                    </TabPane>\r\n                    <TabPane tabId=\"2\">\r\n                        <CalcChart weatherData={activateCalc ? data : null} location={location} dateRange={dateRange} reset={parameters} />\r\n                    </TabPane>\r\n                </TabContent>\r\n                {activeTab === '1' ? (\r\n                    <a href={process.env.REACT_APP_WEATHER_REFERENCE_URL} className=\"weather-reference\" target=\"_blank\" rel=\"noopener noreferrer\">Powered by World Weather Online</a>\r\n                ) : null }\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nWeather.propTypes = {\r\n    location: PropTypes.shape({\r\n        lat: PropTypes.string.isRequired,\r\n        lng: PropTypes.string.isRequired\r\n    }).isRequired,\r\n    dateRange: PropTypes.shape({\r\n        startDate: PropTypes.string.isRequired, // 'yyyy-MM-dd'\r\n        endDate: PropTypes.string.isRequired    // 'yyyy-MM-dd'\r\n    }).isRequired,\r\n    name: PropTypes.string\r\n};\r\n\r\nexport default Weather;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { DateRangePicker } from 'react-date-range';\r\nimport { format } from 'date-fns';\r\n\r\nimport { Button, Popover, PopoverBody } from 'reactstrap';\r\n\r\nimport './DateRange.css';\r\n\r\nconst DATE_FORMAT = \"MMM d\";\r\n\r\nfunction preventEventPropagation(e) {\r\n    e.stopPropagation();\r\n}\r\n\r\nconst DateRange = ({ startDate, endDate, onChange, popoverOpen, onTogglePopover }) => {\r\n\r\n    const handleSelect = (item) => {\r\n        onChange(item.selection);\r\n    };\r\n\r\n    return (\r\n        <div className=\"__DateRange__\">\r\n            <div className=\"daterange\">\r\n                <h5 className=\"title\">Date range:</h5>\r\n                <div className=\"range\" id=\"daterange\">\r\n                    <h5 className=\"text\">{format(startDate, DATE_FORMAT)} - {format(endDate, DATE_FORMAT)}</h5>\r\n                    <Button outline={!popoverOpen} color=\"secondary\" className=\"change\">{popoverOpen ? \"Done\" : \"Change\"}</Button>\r\n                </div>\r\n            </div>\r\n            <Popover placement=\"bottom\" isOpen={popoverOpen} target=\"daterange\" toggle={onTogglePopover}>\r\n                <PopoverBody onClick={preventEventPropagation}>\r\n                    <DateRangePicker\r\n                        showSelectionPreview={true}\r\n                        moveRangeOnFirstSelection={false}\r\n                        maxDate={new Date()}\r\n                        months={2}\r\n                        direction=\"horizontal\"\r\n                        ranges={[{ startDate, endDate, key: 'selection' }]}\r\n                        staticRanges={[]}\r\n                        onChange={handleSelect}\r\n                    />\r\n                </PopoverBody>\r\n            </Popover>\r\n        </div>\r\n    );\r\n};\r\n\r\nDateRange.propTypes = {\r\n    startDate: PropTypes.instanceOf(Date).isRequired,\r\n    endDate: PropTypes.instanceOf(Date).isRequired,\r\n    onChange: PropTypes.func,\r\n    popoverOpen: PropTypes.bool,\r\n    onTogglePopover: PropTypes.func\r\n};\r\n\r\nexport default DateRange;","import React, { useEffect } from 'react';\r\nimport L from 'leaflet';\r\n\r\nimport Geocoder from 'leaflet-control-geocoder';\r\n\r\nimport './Location.css';\r\n\r\nimport icon from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nconst DefaultIcon = L.icon({\r\n    iconUrl: icon,\r\n    shadowUrl: iconShadow,\r\n\r\n    iconSize:     [25, 41], // size of the icon\r\n    shadowSize:   [41, 41], // size of the shadow\r\n    iconAnchor:   [13, 41], // point of the icon which will correspond to marker's location\r\n    shadowAnchor: [13, 41], // the same for the shadow\r\n    popupAnchor:  [0, -27]  // point from which the popup should open relative to the iconAnchor\r\n});\r\n\r\nL.Marker.prototype.options.icon = DefaultIcon;\r\n\r\nconst Location = ({ latlng, query, onChange }) => {\r\n\r\n    useEffect(() => {\r\n\r\n        // onChange callback\r\n        const handleChange = (result) => {\r\n            onChange({ latlng: [result.center.lat, result.center.lng], name: result.name });\r\n        };\r\n\r\n        // console.log(\"----------------------> CREATING MAP\");\r\n\r\n        // create map\r\n        const map = L.map('map', {\r\n            center: latlng,\r\n            zoomControl: false,\r\n            zoom: 13,\r\n            maxZoom: 18,\r\n            layers: [\r\n                L.tileLayer('https://{s}.tile.osm.org/{z}/{x}/{y}.png', {\r\n                    zoom: 13,\r\n                    maxZoom: 18,\r\n                    attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                }),\r\n                L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {\r\n                    zoom: 13,\r\n                    maxZoom: 18,\r\n                    attribution: 'Map data: &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, <a href=\"http://viewfinderpanoramas.org\">SRTM</a> | Map style: &copy; <a href=\"https://opentopomap.org\">OpenTopoMap</a> (<a href=\"https://creativecommons.org/licenses/by-sa/3.0/\">CC-BY-SA</a>)'\r\n                })\r\n            ]\r\n        });\r\n\r\n        map.zoomOut();\r\n\r\n        L.control.zoom({\r\n            position:'topright'\r\n        }).addTo(map);\r\n\r\n        const geocoder = new L.Control.Geocoder.Nominatim();\r\n\r\n        const geocoderControl = L.Control.geocoder({\r\n            collapsed: true,\r\n            position: \"topleft\",\r\n            geocoder: geocoder,\r\n            query: query,\r\n            suggestMinLength: 3,\r\n            placeholder: \"Search query or lat,lng\"\r\n        }).on('markgeocode', function(e) {\r\n\r\n            handleChange(e.geocode);\r\n\r\n            setTimeout(() => {\r\n                geocoderControl._expand();\r\n            }, 500);\r\n        }).on('collapse', function() {\r\n            setTimeout(() => {\r\n                geocoderControl._expand();\r\n            }, 500);\r\n        }).addTo(map);\r\n\r\n        geocoderControl._toggle = geocoderControl._geocode;\r\n        \r\n        const searchInput = document.querySelector('.leaflet-control-geocoder-form input');\r\n\r\n        const markGeocode = (result) => {\r\n            if (!result.bbox) {\r\n                result.bbox = L.latLngBounds(result.center, result.center);\r\n            }\r\n            if (!result.html && !result.name) {\r\n                result.html = `[${result.center.lat}, ${result.center.lng}]`;\r\n                result.name = '';\r\n            }\r\n            geocoderControl.markGeocode(result);\r\n\r\n            handleChange(result);\r\n\r\n            setTimeout(() => {\r\n                geocoderControl._expand();\r\n            }, 500);\r\n        }\r\n\r\n        geocoder.geocode(query, (results) => {\r\n            const result = results.length ? results[0] : { center: L.latLng(latlng) };\r\n            markGeocode(result);\r\n        });\r\n\r\n        map.on('expand', function() {\r\n            searchInput.focus();\r\n        });\r\n\r\n        map.on('dblclick', function(event) {\r\n            const latlng = L.latLng(event.latlng);\r\n            geocoder.reverse(latlng, 1, (results) => {\r\n                searchInput.value = \"\" + latlng.lat + \".\" + latlng.lng;\r\n                let result = results.length ? results[0] : {};\r\n                result = { ...result, center: latlng };\r\n                markGeocode(result);\r\n            });\r\n        });\r\n\r\n        setTimeout(() => {\r\n            geocoderControl._expand();\r\n        }, 500);\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"__Location__\">\r\n            <h5 className=\"title\">Location (search or double click on map):</h5>\r\n            <div id=\"map\" className=\"leaflet-map\"></div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Location;","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport { Redirect } from 'react-router';\r\n\r\nimport { Button } from 'reactstrap';\r\n\r\nimport { dateString } from '../util/date';\r\n\r\nimport DateRange from './parameters/DateRange';\r\nimport Location from './parameters/Location';\r\n\r\nimport './Parameters.css';\r\n\r\nconst Parameters = ({ location, dateRange, name }) => {\r\n\r\n    const startDate = new Date(dateRange.startDate);\r\n    const endDate = new Date(dateRange.endDate);\r\n\r\n    const latlng = [ parseFloat(location.lat), parseFloat(location.lng) ];\r\n\r\n    const [ newDateRange, setNewDateRange ] = useState({\r\n        startDate,\r\n        endDate\r\n    });\r\n    const [ newLocation, setNewLocation ] = useState({\r\n        latlng,\r\n        name\r\n    });\r\n\r\n    const [ state, setState ] = useState({ weather: false, popoverOpen: false });\r\n\r\n    const handleTogglePopover = (e) => {\r\n        e.stopPropagation();\r\n\r\n        setState((state) => ({\r\n            weather: false,\r\n            popoverOpen: !state.popoverOpen\r\n        }));\r\n    };\r\n\r\n    const handleClosePopover = (e) => {\r\n        e.stopPropagation();\r\n\r\n        setState((state) => ({\r\n            weather: false,\r\n            popoverOpen: false\r\n        }));\r\n    };\r\n\r\n    useEffect(() => {\r\n        setState({\r\n            weather: false,\r\n            popoverOpen: false\r\n        });\r\n    }, [ location, dateRange, name ]);\r\n\r\n    const handleWeather = (e) => {\r\n        e.stopPropagation();\r\n\r\n        setState({\r\n            weather: true,\r\n            popoverOpen: false\r\n        });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            { state.weather ?\r\n                <Redirect to={'/?' +\r\n                    `lat=${newLocation.latlng[0].toFixed(3)}` + '&' +\r\n                    `lng=${newLocation.latlng[1].toFixed(3)}` + '&' +\r\n                    `name=${newLocation.name}` + '&' +\r\n                    `startDate=${dateString(newDateRange.startDate)}` + '&' +\r\n                    `endDate=${dateString(newDateRange.endDate)}`}\r\n                /> : null }\r\n            <div className=\"__Parameters__\" onClick={handleClosePopover}>\r\n                <div className=\"weather-button\">\r\n                    <DateRange\r\n                        startDate={newDateRange.startDate}\r\n                        endDate={newDateRange.endDate}\r\n                        onChange={setNewDateRange}\r\n                        popoverOpen={state.popoverOpen}\r\n                        onTogglePopover={handleTogglePopover}\r\n                    />\r\n                    <Button color=\"primary\" className=\"button\" onClick={handleWeather}>Charts</Button>\r\n                </div>\r\n                <Location latlng={newLocation.latlng} query={newLocation.name} onChange={setNewLocation} />\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nParameters.propTypes = {\r\n    location: PropTypes.shape({\r\n        lat: PropTypes.string.isRequired,\r\n        lng: PropTypes.string.isRequired\r\n    }).isRequired,\r\n    dateRange: PropTypes.shape({\r\n        startDate: PropTypes.string.isRequired, // 'yyyy-MM-dd'\r\n        endDate: PropTypes.string.isRequired    // 'yyyy-MM-dd'\r\n    }).isRequired,\r\n    name: PropTypes.string\r\n};\r\n\r\nexport default Parameters;","import React from 'react';\r\nimport {\r\n    HashRouter as Router,\r\n    Route\r\n} from \"react-router-dom\";\r\n\r\nimport { useQueryParams } from './util/query';\r\n\r\nimport Weather from './components/Weather';\r\nimport Parameters from './components/Parameters';\r\n\r\nlet key = 0;\r\n\r\n// workaround for leaflet map init:\r\n// create map when it is first shown with display: block,\r\n// ignore mini-map created initially with diaply: none\r\nfunction getParametersKey(match) {\r\n    if (key) {\r\n        return key;\r\n    }\r\n    if (match) {\r\n        key = 1;\r\n    }\r\n    return key;\r\n}\r\n\r\nconst Main = () => {\r\n\r\n    return (\r\n        <Router basename='/'>\r\n            <div>\r\n                <Route path=\"/parameters\" exact children={({ match, ...rest }) => (\r\n                    <ShowOnMatch key={getParametersKey(match)} match={match}>\r\n                        <ParametersPage {...rest} />\r\n                    </ShowOnMatch>\r\n                )} />\r\n                <Route path=\"/\" exact children={({ match, ...rest }) => (\r\n                    <ShowOnMatch match={match}>\r\n                        <WeatherPage {...rest} />\r\n                    </ShowOnMatch>\r\n                )} />\r\n            </div>\r\n        </Router>\r\n    );\r\n};\r\n\r\nconst ShowOnMatch = ({ match, children }) => (\r\n    <div style={ match ? { display: \"block\" } : { display: \"none\" }}>\r\n        {children}\r\n    </div>\r\n);\r\n\r\nconst ParametersPage = () => {\r\n    const queryParams = useQueryParams();\r\n\r\n    return (\r\n        <Parameters {...queryParams} />\r\n    );\r\n};\r\n\r\nconst WeatherPage = () => {\r\n    const queryParams = useQueryParams();\r\n\r\n    return (\r\n        <Weather {...queryParams} />\r\n    );\r\n};\r\n\r\nexport default Main;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Main from './Main';\nimport * as serviceWorker from './serviceWorker';\n\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n// leaflet styles\nimport 'leaflet/dist/leaflet.css';\nimport 'leaflet-control-geocoder/Control.Geocoder.css';\n\n// react-date-range styles\nimport 'react-date-range/dist/styles.css'; // main style file\nimport 'react-date-range/dist/theme/default.css'; // theme css file\n\nReactDOM.render(\n  <React.StrictMode>\n    <Main />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}